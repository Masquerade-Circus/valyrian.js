# 7.4. Server Execution Context

Valyrian provides `valyrian.js/context` for request-scoped values in server runtime flows.

Important:

- This is **server execution context** (request-scope), not a UI tree context.
- It is **not** React Context API, Vue provide/inject, or any component-tree dependency injection API.

## Why it exists

Concurrent SSR requests can run at the same time. Some modules need per-request values without leaking to other requests.

The context module gives one place to store and resolve request-scoped values.

## API

```ts
import { createContextScope, getContext, hasContext, setContext, runWithContext } from "valyrian.js/context";

const scope = createContextScope<string>("example");

runWithContext(scope, "value", () => {
  console.log(getContext(scope)); // "value"
});

const restore = setContext(scope, "another-value");
restore();
```

## Node.js behavior

When `valyrian.js/node` is imported, `ServerStorage.run(...)` creates isolated async request context.

`valyrian.js/context` uses that request context automatically in Node.js.

That means context values are isolated across concurrent requests.

## Modules using this internally

The following modules infer context automatically in Node.js while keeping their existing public API:

- `valyrian.js/router`
- `valyrian.js/request`
- `valyrian.js/translate`
- `valyrian.js/native-store`

You can keep using these modules with the same API. Context resolution is internal behavior for SSR safety.
