//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2NhbFZhbHlyaWFuIiwiaXNOb2RlSnMiLCJCb29sZWFuIiwicHJvY2VzcyIsInZlcnNpb25zIiwibm9kZSIsInNlcmlhbGl6ZSIsIm9iaiIsInByZWZpeCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJwcm9wIiwiayIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJyZXF1ZXN0IiwiUmVxdWVzdGVyIiwiYmFzZVVybCIsIm9wdGlvbnMiLCJhbGxvd2VkTWV0aG9kcyIsInVybCIsInJlcGxhY2UiLCJ0cmltIiwidXJscyIsImJhc2UiLCJhcGkiLCJvcHRzIiwiYXN5bmMiLCJtZXRob2QiLCJkYXRhIiwiaW5uZXJPcHRpb25zIiwidG9VcHBlckNhc2UiLCJoZWFkZXJzIiwicmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2UiLCJBY2NlcHQiLCJhY2NlcHRUeXBlIiwiY29udGVudFR5cGUiLCJpbmRleE9mIiwiRXJyb3IiLCJ0ZXN0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiaSIsImFwcGVuZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJ1IiwicGFydHMiLCJzcGxpdCIsInBhcnNlVXJsIiwib2siLCJlcnIiLCJzdGF0dXNUZXh0IiwidGV4dCIsImpzb24iLCJlcnJvciIsIm5ldyIsInNldE9wdGlvbiIsImtleSIsInZhbHVlIiwibmV4dCIsInJlc3VsdCIsInBhcnNlZCIsImxlbmd0aCIsInNoaWZ0IiwibmV4dElzQXJyYXkiLCJpZHgiLCJ1bnNoaWZ0IiwiZ2V0T3B0aW9ucyIsImZvckVhY2giLCJ2Il0sInNvdXJjZXMiOlsiLi4vLi4vbGliL3JlcXVlc3QvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmFseXJpYW4gfSBmcm9tIFwiVmFseXJpYW5cIjtcblxuaW50ZXJmYWNlIFVybE9wdGlvbnMge1xuICBiYXNlOiBzdHJpbmc7IC8vIFVzZWQgdG8gcHJlZml4IHRoZSB1cmwgZm9yIHNjb3BlZCByZXF1ZXN0cy5cbiAgbm9kZTogc3RyaW5nIHwgbnVsbDsgLy8gVXNlZCB0byByZWRpcmVjdCBsb2NhbCByZXF1ZXN0cyB0byBub2RlIHNlcnZlciBmb3Igc2VydmVyIHNpZGUgcmVuZGVyaW5nLlxuICBhcGk6IHN0cmluZyB8IG51bGw7IC8vIFVzZWQgdG8gcmVkaXJlY3QgYXBpIHJlcXVlc3RzIHRvIG5vZGUgc2VydmVyIGZvciBzZXJ2ZXIgc2lkZSByZW5kZXJpbmcuXG59XG5cbmludGVyZmFjZSBSZXF1ZXN0T3B0aW9ucyB7XG4gIGFsbG93ZWRNZXRob2RzOiBzdHJpbmdbXTtcbiAgdXJscz86IFVybE9wdGlvbnM7XG4gIFtrZXk6IHN0cmluZyB8IG51bWJlciB8IHN5bWJvbF06IGFueTtcbn1cblxuaW50ZXJmYWNlIFJlcXVlc3RPcHRpb25zV2l0aFVybHMgZXh0ZW5kcyBSZXF1ZXN0T3B0aW9ucyB7XG4gIHVybHM6IFVybE9wdGlvbnM7XG59XG5cbmludGVyZmFjZSBTZW5kT3B0aW9ucyBleHRlbmRzIFJlcXVlc3RPcHRpb25zV2l0aFVybHMsIFJlcXVlc3RJbml0IHtcbiAgbWV0aG9kOiBzdHJpbmc7XG4gIGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFJlcXVlc3RJbnRlcmZhY2Uge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgKG1ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sIG9wdGlvbnM/OiBQYXJ0aWFsPFNlbmRPcHRpb25zPik6IGFueSB8IFJlc3BvbnNlO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgbmV3OiAoYmFzZVVybDogc3RyaW5nLCBvcHRpb25zOiBSZXF1ZXN0T3B0aW9ucykgPT4gUmVxdWVzdEludGVyZmFjZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIHNldE9wdGlvbnM6IChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4gdm9pZDtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGdldE9wdGlvbnM6IChrZXk/OiBzdHJpbmcpID0+IFJlcXVlc3RPcHRpb25zIHwgdm9pZDtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGdldD86ICh1cmw6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBhbnkgfCBSZXNwb25zZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIHBvc3Q/OiAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBwdXQ/OiAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBwYXRjaD86ICh1cmw6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBhbnkgfCBSZXNwb25zZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGRlbGV0ZT86ICh1cmw6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBhbnkgfCBSZXNwb25zZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGhlYWQ/OiAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBvcHRpb25zPzogKHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IGFueSB8IFJlc3BvbnNlO1xuICBba2V5OiBzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2xdOiBhbnk7XG59XG5cbmRlY2xhcmUgbW9kdWxlIFwiVmFseXJpYW5cIiB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBpbnRlcmZhY2UgVmFseXJpYW4ge1xuICAgIHJlcXVlc3Q/OiBSZXF1ZXN0SW50ZXJmYWNlO1xuICB9XG59XG5cbmxldCBsb2NhbFZhbHlyaWFuOiBWYWx5cmlhbiA9IHtcbiAgaXNOb2RlSnM6IEJvb2xlYW4odHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy52ZXJzaW9ucyAmJiBwcm9jZXNzLnZlcnNpb25zLm5vZGUpXG59IGFzIHVua25vd24gYXMgVmFseXJpYW47XG5cbi8vIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VyaWFsaXplIGFuIG9iamVjdCBpbnRvIGEgcXVlcnkgc3RyaW5nLlxuZnVuY3Rpb24gc2VyaWFsaXplKG9iajogUmVjb3JkPHN0cmluZywgYW55PiwgcHJlZml4OiBzdHJpbmcgPSBcIlwiKTogc3RyaW5nIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iailcbiAgICAubWFwKChwcm9wOiBzdHJpbmcpID0+IHtcbiAgICAgIGxldCBrID0gcHJlZml4ID8gYCR7cHJlZml4fVske3Byb3B9XWAgOiBwcm9wO1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmpbcHJvcF0gPT09IFwib2JqZWN0XCIgPyBzZXJpYWxpemUob2JqW3Byb3BdLCBrKSA6IGAke2VuY29kZVVSSUNvbXBvbmVudChrKX09JHtlbmNvZGVVUklDb21wb25lbnQob2JqW3Byb3BdKX1gO1xuICAgIH0pXG4gICAgLmpvaW4oXCImXCIpO1xufVxuXG5mdW5jdGlvbiBwYXJzZVVybCh1cmw6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdE9wdGlvbnNXaXRoVXJscykge1xuICBsZXQgdSA9IC9eaHR0cHM/L2dpLnRlc3QodXJsKSA/IHVybCA6IG9wdGlvbnMudXJscy5iYXNlICsgdXJsO1xuXG4gIGxldCBwYXJ0cyA9IHUuc3BsaXQoXCI/XCIpO1xuICB1ID0gcGFydHNbMF0udHJpbSgpLnJlcGxhY2UoL15cXC9cXC8vLCBcIi9cIikucmVwbGFjZSgvXFwvJC8sIFwiXCIpLnRyaW0oKTtcblxuICBpZiAocGFydHNbMV0pIHtcbiAgICB1ICs9IGA/JHtwYXJ0c1sxXX1gO1xuICB9XG5cbiAgaWYgKGxvY2FsVmFseXJpYW4uaXNOb2RlSnMgJiYgdHlwZW9mIG9wdGlvbnMudXJscy5ub2RlID09PSBcInN0cmluZ1wiKSB7XG4gICAgb3B0aW9ucy51cmxzLm5vZGUgPSBvcHRpb25zLnVybHMubm9kZTtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy51cmxzLmFwaSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3B0aW9ucy51cmxzLmFwaSA9IG9wdGlvbnMudXJscy5hcGkucmVwbGFjZSgvXFwvJC9naSwgXCJcIikudHJpbSgpO1xuICAgICAgdSA9IHUucmVwbGFjZShvcHRpb25zLnVybHMuYXBpLCBvcHRpb25zLnVybHMubm9kZSk7XG4gICAgfVxuXG4gICAgaWYgKCEvXmh0dHBzPy9naS50ZXN0KHUpKSB7XG4gICAgICB1ID0gb3B0aW9ucy51cmxzLm5vZGUgKyB1O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1O1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgc29uYXJqcy9jb2duaXRpdmUtY29tcGxleGl0eVxuZnVuY3Rpb24gUmVxdWVzdGVyKGJhc2VVcmwgPSBcIlwiLCBvcHRpb25zOiBSZXF1ZXN0T3B0aW9ucyA9IHsgYWxsb3dlZE1ldGhvZHM6IFtcImdldFwiLCBcInBvc3RcIiwgXCJwdXRcIiwgXCJwYXRjaFwiLCBcImRlbGV0ZVwiXSB9KSB7XG4gIGxldCB1cmwgPSBiYXNlVXJsLnJlcGxhY2UoL1xcLyQvZ2ksIFwiXCIpLnRyaW0oKTtcbiAgaWYgKCFvcHRpb25zLnVybHMpIHtcbiAgICBvcHRpb25zLnVybHMgPSB7XG4gICAgICBiYXNlOiBcIlwiLFxuICAgICAgbm9kZTogbnVsbCxcbiAgICAgIGFwaTogbnVsbFxuICAgIH07XG4gIH1cbiAgbGV0IG9wdHM6IFJlcXVlc3RPcHRpb25zV2l0aFVybHMgPSB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICB1cmxzOiB7XG4gICAgICBub2RlOiBvcHRpb25zLnVybHMubm9kZSB8fCBudWxsLFxuICAgICAgYXBpOiBvcHRpb25zLnVybHMuYXBpIHx8IG51bGwsXG4gICAgICBiYXNlOiBvcHRpb25zLnVybHMuYmFzZSA/IG9wdGlvbnMudXJscy5iYXNlICsgdXJsIDogdXJsXG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlcXVlc3QgPSBhc3luYyBmdW5jdGlvbiByZXF1ZXN0KG1ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sIG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBpbm5lck9wdGlvbnM6IFNlbmRPcHRpb25zID0ge1xuICAgICAgbWV0aG9kOiBtZXRob2QudG9VcHBlckNhc2UoKSxcbiAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgcmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2U6IGZhbHNlLFxuICAgICAgLi4ub3B0cyxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9IGFzIFNlbmRPcHRpb25zO1xuXG4gICAgaWYgKCFpbm5lck9wdGlvbnMuaGVhZGVycy5BY2NlcHQpIHtcbiAgICAgIGlubmVyT3B0aW9ucy5oZWFkZXJzLkFjY2VwdCA9IFwiYXBwbGljYXRpb24vanNvblwiO1xuICAgIH1cblxuICAgIGxldCBhY2NlcHRUeXBlID0gaW5uZXJPcHRpb25zLmhlYWRlcnMuQWNjZXB0O1xuICAgIGxldCBjb250ZW50VHlwZSA9IGlubmVyT3B0aW9ucy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdIHx8IGlubmVyT3B0aW9ucy5oZWFkZXJzW1wiY29udGVudC10eXBlXCJdIHx8IFwiXCI7XG5cbiAgICBpZiAoaW5uZXJPcHRpb25zLmFsbG93ZWRNZXRob2RzLmluZGV4T2YobWV0aG9kKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgYWxsb3dlZFwiKTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YSkge1xuICAgICAgaWYgKGlubmVyT3B0aW9ucy5tZXRob2QgPT09IFwiR0VUXCIgJiYgdHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdXJsICs9IGA/JHtzZXJpYWxpemUoZGF0YSl9YDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlubmVyT3B0aW9ucy5tZXRob2QgIT09IFwiR0VUXCIpIHtcbiAgICAgICAgaWYgKC9qc29uL2dpLnRlc3QoY29udGVudFR5cGUpKSB7XG4gICAgICAgICAgaW5uZXJPcHRpb25zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgZm9ybURhdGE7XG4gICAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBGb3JtRGF0YSkge1xuICAgICAgICAgICAgZm9ybURhdGEgPSBkYXRhO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChpLCBkYXRhW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaW5uZXJPcHRpb25zLmJvZHkgPSBmb3JtRGF0YTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHBhcnNlVXJsKHVybCwgb3B0cyksIGlubmVyT3B0aW9ucyk7XG4gICAgbGV0IGJvZHkgPSBudWxsO1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGxldCBlcnIgPSBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dCkgYXMgRXJyb3IgJiB7IHJlc3BvbnNlPzogYW55OyBib2R5PzogYW55IH07XG4gICAgICBlcnIucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgIGlmICgvdGV4dC9naS50ZXN0KGFjY2VwdFR5cGUpKSB7XG4gICAgICAgIGVyci5ib2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoL2pzb24vZ2kudGVzdChhY2NlcHRUeXBlKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGVyci5ib2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIGlnbm9yZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICBpZiAoaW5uZXJPcHRpb25zLnJlc29sdmVXaXRoRnVsbFJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgaWYgKC90ZXh0L2dpLnRlc3QoYWNjZXB0VHlwZSkpIHtcbiAgICAgIGJvZHkgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICByZXR1cm4gYm9keTtcbiAgICB9XG5cbiAgICBpZiAoL2pzb24vZ2kudGVzdChhY2NlcHRUeXBlKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYm9keSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIGJvZHk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBpZ25vcmVcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0gYXMgdW5rbm93biBhcyBSZXF1ZXN0SW50ZXJmYWNlO1xuXG4gIHJlcXVlc3QubmV3ID0gKGJhc2VVcmw6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdE9wdGlvbnMpID0+IFJlcXVlc3RlcihiYXNlVXJsLCB7IC4uLm9wdHMsIC4uLm9wdGlvbnMgfSk7XG5cbiAgcmVxdWVzdC5zZXRPcHRpb24gPSAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHtcbiAgICBsZXQgcmVzdWx0ID0gb3B0cztcblxuICAgIGxldCBwYXJzZWQgPSBrZXkuc3BsaXQoXCIuXCIpO1xuICAgIGxldCBuZXh0O1xuXG4gICAgd2hpbGUgKHBhcnNlZC5sZW5ndGgpIHtcbiAgICAgIG5leHQgPSBwYXJzZWQuc2hpZnQoKSBhcyBzdHJpbmc7XG5cbiAgICAgIGxldCBuZXh0SXNBcnJheSA9IG5leHQuaW5kZXhPZihcIltcIikgPiAtMTtcbiAgICAgIGlmIChuZXh0SXNBcnJheSkge1xuICAgICAgICBsZXQgaWR4ID0gbmV4dC5yZXBsYWNlKC9cXEQvZ2ksIFwiXCIpO1xuICAgICAgICBuZXh0ID0gbmV4dC5zcGxpdChcIltcIilbMF07XG4gICAgICAgIHBhcnNlZC51bnNoaWZ0KGlkeCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJzZWQubGVuZ3RoID4gMCAmJiB0eXBlb2YgcmVzdWx0W25leHRdICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHJlc3VsdFtuZXh0XSA9IG5leHRJc0FycmF5ID8gW10gOiB7fTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlZC5sZW5ndGggPT09IDAgJiYgdHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJlc3VsdFtuZXh0XSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQgPSByZXN1bHRbbmV4dF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICByZXF1ZXN0LmdldE9wdGlvbnMgPSAoa2V5Pzogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFrZXkpIHtcbiAgICAgIHJldHVybiBvcHRzO1xuICAgIH1cblxuICAgIGxldCByZXN1bHQgPSBvcHRzO1xuICAgIGxldCBwYXJzZWQgPSBrZXkuc3BsaXQoXCIuXCIpO1xuICAgIGxldCBuZXh0O1xuXG4gICAgd2hpbGUgKHBhcnNlZC5sZW5ndGgpIHtcbiAgICAgIG5leHQgPSBwYXJzZWQuc2hpZnQoKSBhcyBzdHJpbmc7XG5cbiAgICAgIGxldCBuZXh0SXNBcnJheSA9IG5leHQuaW5kZXhPZihcIltcIikgPiAtMTtcbiAgICAgIGlmIChuZXh0SXNBcnJheSkge1xuICAgICAgICBsZXQgaWR4ID0gbmV4dC5yZXBsYWNlKC9cXEQvZ2ksIFwiXCIpO1xuICAgICAgICBuZXh0ID0gbmV4dC5zcGxpdChcIltcIilbMF07XG4gICAgICAgIHBhcnNlZC51bnNoaWZ0KGlkeCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJzZWQubGVuZ3RoID4gMCAmJiB0eXBlb2YgcmVzdWx0W25leHRdICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0W25leHRdO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQgPSByZXN1bHRbbmV4dF07XG4gICAgfVxuICB9O1xuXG4gIG9wdHMuYWxsb3dlZE1ldGhvZHMuZm9yRWFjaChcbiAgICAobWV0aG9kKSA9PiAocmVxdWVzdFttZXRob2RdID0gKHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHJlcXVlc3QobWV0aG9kLCB1cmwsIGRhdGEsIG9wdGlvbnMpKVxuICApO1xuXG4gIHJldHVybiByZXF1ZXN0O1xufVxuXG5leHBvcnQgY29uc3QgcmVxdWVzdCA9IFJlcXVlc3RlcigpO1xuY29uc3QgcGx1Z2luID0gKHY6IFZhbHlyaWFuKTogUmVxdWVzdEludGVyZmFjZSA9PiB7XG4gIGxvY2FsVmFseXJpYW4gPSB2O1xuICB2LnJlcXVlc3QgPSByZXF1ZXN0O1xuICByZXR1cm4gcmVxdWVzdDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHBsdWdpbjtcbiJdLCJtYXBwaW5ncyI6Ik1BeURBLElBQUlBLEVBQTBCLENBQzVCQyxTQUFVQyxRQUEyQixvQkFBWkMsU0FBMkJBLFFBQVFDLFVBQVlELFFBQVFDLFNBQVNDLE9BSTNGLFNBQVNDLEVBQVVDLEVBQTBCQyxFQUFpQixJQUM1RCxPQUFPQyxPQUFPQyxLQUFLSCxHQUNoQkksSUFBS0MsSUFDSixJQUFJQyxFQUFJTCxFQUFTLEdBQUdBLEtBQVVJLEtBQVVBLEVBQ3hDLE1BQTRCLGlCQUFkTCxFQUFJSyxHQUFxQk4sRUFBVUMsRUFBSUssR0FBT0MsR0FBSyxHQUFHQyxtQkFBbUJELE1BQU1DLG1CQUFtQlAsRUFBSUssS0FBSyxHQUUxSEcsS0FBSyxJQUNWLENBeU1PLElBQU1DLEVBNUtiLFNBQVNDLEVBQVVDLEVBQVUsR0FBSUMsRUFBMEIsQ0FBRUMsZUFBZ0IsQ0FBQyxNQUFPLE9BQVEsTUFBTyxRQUFTLFlBQzNHLElBQUlDLEVBQU1ILEVBQVFJLFFBQVEsUUFBUyxJQUFJQyxPQUNsQ0osRUFBUUssT0FDWEwsRUFBUUssS0FBTyxDQUNiQyxLQUFNLEdBQ05wQixLQUFNLEtBQ05xQixJQUFLLE9BR1QsSUFBSUMsRUFBK0IsSUFDOUJSLEVBQ0hLLEtBQU0sQ0FDSm5CLEtBQU1jLEVBQVFLLEtBQUtuQixNQUFRLEtBQzNCcUIsSUFBS1AsRUFBUUssS0FBS0UsS0FBTyxLQUN6QkQsS0FBTU4s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