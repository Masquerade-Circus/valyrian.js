//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2NhbFZhbHlyaWFuIiwiaXNOb2RlSnMiLCJCb29sZWFuIiwicHJvY2VzcyIsInZlcnNpb25zIiwibm9kZSIsInNlcmlhbGl6ZSIsIm9iaiIsInByZWZpeCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJwcm9wIiwiayIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJkZWZhdWx0T3B0aW9ucyIsImFsbG93ZWRNZXRob2RzIiwicmVxdWVzdCIsIlJlcXVlc3RlciIsImJhc2VVcmwiLCJvcHRpb25zIiwidXJsIiwicmVwbGFjZSIsInRyaW0iLCJ1cmxzIiwiYmFzZSIsImFwaSIsIm9wdHMiLCJhc3luYyIsIm1ldGhvZCIsImRhdGEiLCJpbm5lck9wdGlvbnMiLCJ0b1VwcGVyQ2FzZSIsImhlYWRlcnMiLCJyZXNvbHZlV2l0aEZ1bGxSZXNwb25zZSIsIkFjY2VwdCIsImFjY2VwdFR5cGUiLCJjb250ZW50VHlwZSIsImluZGV4T2YiLCJFcnJvciIsInRlc3QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJpIiwiYXBwZW5kIiwicmVzcG9uc2UiLCJmZXRjaCIsInUiLCJwYXJ0cyIsInNwbGl0IiwicGFyc2VVcmwiLCJvayIsImVyciIsInN0YXR1c1RleHQiLCJ0ZXh0IiwianNvbiIsImVycm9yIiwibmV3Iiwic2V0T3B0aW9uIiwia2V5IiwidmFsdWUiLCJuZXh0IiwicmVzdWx0IiwicGFyc2VkIiwibGVuZ3RoIiwic2hpZnQiLCJuZXh0SXNBcnJheSIsImlkeCIsInVuc2hpZnQiLCJnZXRPcHRpb25zIiwiZm9yRWFjaCIsInYiXSwic291cmNlcyI6WyIuLi8uLi9saWIvcmVxdWVzdC9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWYWx5cmlhbiB9IGZyb20gXCJWYWx5cmlhblwiO1xuXG5pbnRlcmZhY2UgVXJsT3B0aW9ucyB7XG4gIGJhc2U6IHN0cmluZzsgLy8gVXNlZCB0byBwcmVmaXggdGhlIHVybCBmb3Igc2NvcGVkIHJlcXVlc3RzLlxuICBub2RlOiBzdHJpbmcgfCBudWxsOyAvLyBVc2VkIHRvIHJlZGlyZWN0IGxvY2FsIHJlcXVlc3RzIHRvIG5vZGUgc2VydmVyIGZvciBzZXJ2ZXIgc2lkZSByZW5kZXJpbmcuXG4gIGFwaTogc3RyaW5nIHwgbnVsbDsgLy8gVXNlZCB0byByZWRpcmVjdCBhcGkgcmVxdWVzdHMgdG8gbm9kZSBzZXJ2ZXIgZm9yIHNlcnZlciBzaWRlIHJlbmRlcmluZy5cbn1cblxuaW50ZXJmYWNlIFJlcXVlc3RPcHRpb25zIHtcbiAgYWxsb3dlZE1ldGhvZHM/OiBzdHJpbmdbXTtcbiAgdXJscz86IFVybE9wdGlvbnM7XG4gIFtrZXk6IHN0cmluZyB8IG51bWJlciB8IHN5bWJvbF06IGFueTtcbn1cblxuaW50ZXJmYWNlIFJlcXVlc3RPcHRpb25zV2l0aFVybHMgZXh0ZW5kcyBSZXF1ZXN0T3B0aW9ucyB7XG4gIHVybHM6IFVybE9wdGlvbnM7XG4gIGFsbG93ZWRNZXRob2RzOiBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIFNlbmRPcHRpb25zIGV4dGVuZHMgUmVxdWVzdE9wdGlvbnNXaXRoVXJscywgUmVxdWVzdEluaXQge1xuICBhbGxvd2VkTWV0aG9kczogc3RyaW5nW107XG4gIG1ldGhvZDogc3RyaW5nO1xuICBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICByZXNvbHZlV2l0aEZ1bGxSZXNwb25zZT86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBSZXF1ZXN0SW50ZXJmYWNlIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIChtZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUGFydGlhbDxTZW5kT3B0aW9ucz4pOiBhbnkgfCBSZXNwb25zZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIG5ldzogKGJhc2VVcmw6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdE9wdGlvbnMpID0+IFJlcXVlc3RJbnRlcmZhY2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBzZXRPcHRpb25zOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBnZXRPcHRpb25zOiAoa2V5Pzogc3RyaW5nKSA9PiBSZXF1ZXN0T3B0aW9ucyB8IHZvaWQ7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBnZXQ/OiAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBwb3N0PzogKHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IGFueSB8IFJlc3BvbnNlO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgcHV0PzogKHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IGFueSB8IFJlc3BvbnNlO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgcGF0Y2g/OiAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBkZWxldGU/OiAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBoZWFkPzogKHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IGFueSB8IFJlc3BvbnNlO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgb3B0aW9ucz86ICh1cmw6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBhbnkgfCBSZXNwb25zZTtcbiAgW2tleTogc3RyaW5nIHwgbnVtYmVyIHwgc3ltYm9sXTogYW55O1xufVxuXG5kZWNsYXJlIG1vZHVsZSBcIlZhbHlyaWFuXCIge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgaW50ZXJmYWNlIFZhbHlyaWFuIHtcbiAgICByZXF1ZXN0PzogUmVxdWVzdEludGVyZmFjZTtcbiAgfVxufVxuXG5sZXQgbG9jYWxWYWx5cmlhbjogVmFseXJpYW4gPSB7XG4gIGlzTm9kZUpzOiBCb29sZWFuKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MudmVyc2lvbnMgJiYgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlKVxufSBhcyB1bmtub3duIGFzIFZhbHlyaWFuO1xuXG4vLyBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlcmlhbGl6ZSBhbiBvYmplY3QgaW50byBhIHF1ZXJ5IHN0cmluZy5cbmZ1bmN0aW9uIHNlcmlhbGl6ZShvYmo6IFJlY29yZDxzdHJpbmcsIGFueT4sIHByZWZpeDogc3RyaW5nID0gXCJcIik6IHN0cmluZyB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgLm1hcCgocHJvcDogc3RyaW5nKSA9PiB7XG4gICAgICBsZXQgayA9IHByZWZpeCA/IGAke3ByZWZpeH1bJHtwcm9wfV1gIDogcHJvcDtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqW3Byb3BdID09PSBcIm9iamVjdFwiID8gc2VyaWFsaXplKG9ialtwcm9wXSwgaykgOiBgJHtlbmNvZGVVUklDb21wb25lbnQoayl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KG9ialtwcm9wXSl9YDtcbiAgICB9KVxuICAgIC5qb2luKFwiJlwiKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VVcmwodXJsOiBzdHJpbmcsIG9wdGlvbnM6IFJlcXVlc3RPcHRpb25zV2l0aFVybHMpIHtcbiAgbGV0IHUgPSAvXmh0dHBzPy9naS50ZXN0KHVybCkgPyB1cmwgOiBvcHRpb25zLnVybHMuYmFzZSArIHVybDtcblxuICBsZXQgcGFydHMgPSB1LnNwbGl0KFwiP1wiKTtcbiAgdSA9IHBhcnRzWzBdLnRyaW0oKS5yZXBsYWNlKC9eXFwvXFwvLywgXCIvXCIpLnJlcGxhY2UoL1xcLyQvLCBcIlwiKS50cmltKCk7XG5cbiAgaWYgKHBhcnRzWzFdKSB7XG4gICAgdSArPSBgPyR7cGFydHNbMV19YDtcbiAgfVxuXG4gIGlmIChsb2NhbFZhbHlyaWFuLmlzTm9kZUpzICYmIHR5cGVvZiBvcHRpb25zLnVybHMubm9kZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIG9wdGlvbnMudXJscy5ub2RlID0gb3B0aW9ucy51cmxzLm5vZGU7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudXJscy5hcGkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG9wdGlvbnMudXJscy5hcGkgPSBvcHRpb25zLnVybHMuYXBpLnJlcGxhY2UoL1xcLyQvZ2ksIFwiXCIpLnRyaW0oKTtcbiAgICAgIHUgPSB1LnJlcGxhY2Uob3B0aW9ucy51cmxzLmFwaSwgb3B0aW9ucy51cmxzLm5vZGUpO1xuICAgIH1cblxuICAgIGlmICghL15odHRwcz8vZ2kudGVzdCh1KSkge1xuICAgICAgdSA9IG9wdGlvbnMudXJscy5ub2RlICsgdTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdTtcbn1cblxuY29uc3QgZGVmYXVsdE9wdGlvbnM6IFJlcXVlc3RPcHRpb25zID0geyBhbGxvd2VkTWV0aG9kczogW1wiZ2V0XCIsIFwicG9zdFwiLCBcInB1dFwiLCBcInBhdGNoXCIsIFwiZGVsZXRlXCJdIH07XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBzb25hcmpzL2NvZ25pdGl2ZS1jb21wbGV4aXR5XG5mdW5jdGlvbiBSZXF1ZXN0ZXIoYmFzZVVybCA9IFwiXCIsIG9wdGlvbnM6IFJlcXVlc3RPcHRpb25zID0gZGVmYXVsdE9wdGlvbnMpIHtcbiAgbGV0IHVybCA9IGJhc2VVcmwucmVwbGFjZSgvXFwvJC9naSwgXCJcIikudHJpbSgpO1xuICBpZiAoIW9wdGlvbnMudXJscykge1xuICAgIG9wdGlvbnMudXJscyA9IHtcbiAgICAgIGJhc2U6IFwiXCIsXG4gICAgICBub2RlOiBudWxsLFxuICAgICAgYXBpOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIGlmICghb3B0aW9ucy5hbGxvd2VkTWV0aG9kcykge1xuICAgIG9wdGlvbnMuYWxsb3dlZE1ldGhvZHMgPSBkZWZhdWx0T3B0aW9ucy5hbGxvd2VkTWV0aG9kcztcbiAgfVxuXG4gIGxldCBvcHRzOiBSZXF1ZXN0T3B0aW9uc1dpdGhVcmxzID0ge1xuICAgIC4uLihvcHRpb25zIGFzIFJlcXVlc3RPcHRpb25zV2l0aFVybHMpLFxuICAgIHVybHM6IHtcbiAgICAgIG5vZGU6IG9wdGlvbnMudXJscy5ub2RlIHx8IG51bGwsXG4gICAgICBhcGk6IG9wdGlvbnMudXJscy5hcGkgfHwgbnVsbCxcbiAgICAgIGJhc2U6IG9wdGlvbnMudXJscy5iYXNlID8gb3B0aW9ucy51cmxzLmJhc2UgKyB1cmwgOiB1cmxcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVxdWVzdCA9IGFzeW5jIGZ1bmN0aW9uIHJlcXVlc3QobWV0aG9kOiBzdHJpbmcsIHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IGlubmVyT3B0aW9uczogU2VuZE9wdGlvbnMgPSB7XG4gICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLFxuICAgICAgaGVhZGVyczoge30sXG4gICAgICByZXNvbHZlV2l0aEZ1bGxSZXNwb25zZTogZmFsc2UsXG4gICAgICAuLi5vcHRzLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH0gYXMgU2VuZE9wdGlvbnM7XG5cbiAgICBpZiAoIWlubmVyT3B0aW9ucy5oZWFkZXJzLkFjY2VwdCkge1xuICAgICAgaW5uZXJPcHRpb25zLmhlYWRlcnMuQWNjZXB0ID0gXCJhcHBsaWNhdGlvbi9qc29uXCI7XG4gICAgfVxuXG4gICAgbGV0IGFjY2VwdFR5cGUgPSBpbm5lck9wdGlvbnMuaGVhZGVycy5BY2NlcHQ7XG4gICAgbGV0IGNvbnRlbnRUeXBlID0gaW5uZXJPcHRpb25zLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gfHwgaW5uZXJPcHRpb25zLmhlYWRlcnNbXCJjb250ZW50LXR5cGVcIl0gfHwgXCJcIjtcblxuICAgIGlmIChpbm5lck9wdGlvbnMuYWxsb3dlZE1ldGhvZHMuaW5kZXhPZihtZXRob2QpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBhbGxvd2VkXCIpO1xuICAgIH1cblxuICAgIGlmIChkYXRhKSB7XG4gICAgICBpZiAoaW5uZXJPcHRpb25zLm1ldGhvZCA9PT0gXCJHRVRcIiAmJiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB1cmwgKz0gYD8ke3NlcmlhbGl6ZShkYXRhKX1gO1xuICAgICAgfVxuXG4gICAgICBpZiAoaW5uZXJPcHRpb25zLm1ldGhvZCAhPT0gXCJHRVRcIikge1xuICAgICAgICBpZiAoL2pzb24vZ2kudGVzdChjb250ZW50VHlwZSkpIHtcbiAgICAgICAgICBpbm5lck9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBmb3JtRGF0YTtcbiAgICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEZvcm1EYXRhKSB7XG4gICAgICAgICAgICBmb3JtRGF0YSA9IGRhdGE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGksIGRhdGFbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpbm5lck9wdGlvbnMuYm9keSA9IGZvcm1EYXRhO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocGFyc2VVcmwodXJsLCBvcHRzKSwgaW5uZXJPcHRpb25zKTtcbiAgICBsZXQgYm9keSA9IG51bGw7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgbGV0IGVyciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KSBhcyBFcnJvciAmIHsgcmVzcG9uc2U/OiBhbnk7IGJvZHk/OiBhbnkgfTtcbiAgICAgIGVyci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgaWYgKC90ZXh0L2dpLnRlc3QoYWNjZXB0VHlwZSkpIHtcbiAgICAgICAgZXJyLmJvZHkgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICgvanNvbi9naS50ZXN0KGFjY2VwdFR5cGUpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZXJyLmJvZHkgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gaWdub3JlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgIGlmIChpbm5lck9wdGlvbnMucmVzb2x2ZVdpdGhGdWxsUmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICBpZiAoL3RleHQvZ2kudGVzdChhY2NlcHRUeXBlKSkge1xuICAgICAgYm9keSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIHJldHVybiBib2R5O1xuICAgIH1cblxuICAgIGlmICgvanNvbi9naS50ZXN0KGFjY2VwdFR5cGUpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBib2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gYm9keTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIGlnbm9yZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSBhcyB1bmtub3duIGFzIFJlcXVlc3RJbnRlcmZhY2U7XG5cbiAgcmVxdWVzdC5uZXcgPSAoYmFzZVVybDogc3RyaW5nLCBvcHRpb25zOiBSZXF1ZXN0T3B0aW9ucykgPT4gUmVxdWVzdGVyKGJhc2VVcmwsIHsgLi4ub3B0cywgLi4ub3B0aW9ucyB9KTtcblxuICByZXF1ZXN0LnNldE9wdGlvbiA9IChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4ge1xuICAgIGxldCByZXN1bHQgPSBvcHRzO1xuXG4gICAgbGV0IHBhcnNlZCA9IGtleS5zcGxpdChcIi5cIik7XG4gICAgbGV0IG5leHQ7XG5cbiAgICB3aGlsZSAocGFyc2VkLmxlbmd0aCkge1xuICAgICAgbmV4dCA9IHBhcnNlZC5zaGlmdCgpIGFzIHN0cmluZztcblxuICAgICAgbGV0IG5leHRJc0FycmF5ID0gbmV4dC5pbmRleE9mKFwiW1wiKSA+IC0xO1xuICAgICAgaWYgKG5leHRJc0FycmF5KSB7XG4gICAgICAgIGxldCBpZHggPSBuZXh0LnJlcGxhY2UoL1xcRC9naSwgXCJcIik7XG4gICAgICAgIG5leHQgPSBuZXh0LnNwbGl0KFwiW1wiKVswXTtcbiAgICAgICAgcGFyc2VkLnVuc2hpZnQoaWR4KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlZC5sZW5ndGggPiAwICYmIHR5cGVvZiByZXN1bHRbbmV4dF0gIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgcmVzdWx0W25leHRdID0gbmV4dElzQXJyYXkgPyBbXSA6IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VkLmxlbmd0aCA9PT0gMCAmJiB0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmVzdWx0W25leHRdID0gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdCA9IHJlc3VsdFtuZXh0XTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHJlcXVlc3QuZ2V0T3B0aW9ucyA9IChrZXk/OiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIWtleSkge1xuICAgICAgcmV0dXJuIG9wdHM7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdCA9IG9wdHM7XG4gICAgbGV0IHBhcnNlZCA9IGtleS5zcGxpdChcIi5cIik7XG4gICAgbGV0IG5leHQ7XG5cbiAgICB3aGlsZSAocGFyc2VkLmxlbmd0aCkge1xuICAgICAgbmV4dCA9IHBhcnNlZC5zaGlmdCgpIGFzIHN0cmluZztcblxuICAgICAgbGV0IG5leHRJc0FycmF5ID0gbmV4dC5pbmRleE9mKFwiW1wiKSA+IC0xO1xuICAgICAgaWYgKG5leHRJc0FycmF5KSB7XG4gICAgICAgIGxldCBpZHggPSBuZXh0LnJlcGxhY2UoL1xcRC9naSwgXCJcIik7XG4gICAgICAgIG5leHQgPSBuZXh0LnNwbGl0KFwiW1wiKVswXTtcbiAgICAgICAgcGFyc2VkLnVuc2hpZnQoaWR4KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlZC5sZW5ndGggPiAwICYmIHR5cGVvZiByZXN1bHRbbmV4dF0gIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJzZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRbbmV4dF07XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdCA9IHJlc3VsdFtuZXh0XTtcbiAgICB9XG4gIH07XG5cbiAgb3B0cy5hbGxvd2VkTWV0aG9kcy5mb3JFYWNoKFxuICAgIChtZXRob2QpID0+IChyZXF1ZXN0W21ldGhvZF0gPSAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gcmVxdWVzdChtZXRob2QsIHVybCwgZGF0YSwgb3B0aW9ucykpXG4gICk7XG5cbiAgcmV0dXJuIHJlcXVlc3Q7XG59XG5cbmV4cG9ydCBjb25zdCByZXF1ZXN0ID0gUmVxdWVzdGVyKCk7XG5leHBvcnQgY29uc3QgcGx1Z2luID0gKHY6IFZhbHlyaWFuKTogUmVxdWVzdEludGVyZmFjZSA9PiB7XG4gIGxvY2FsVmFseXJpYW4gPSB2O1xuICB2LnJlcXVlc3QgPSByZXF1ZXN0O1xuICByZXR1cm4gcmVxdWVzdDtcbn07XG4iXSwibWFwcGluZ3MiOiJNQTJEQSxJQUFJQSxFQUEwQixDQUM1QkMsU0FBVUMsUUFBMkIsb0JBQVpDLFNBQTJCQSxRQUFRQyxVQUFZRCxRQUFRQyxTQUFTQyxPQUkzRixTQUFTQyxFQUFVQyxFQUEwQkMsRUFBaUIsSUFDNUQsT0FBT0MsT0FBT0MsS0FBS0gsR0FDaEJJLElBQUtDLElBQ0osSUFBSUMsRUFBSUwsRUFBUyxHQUFHQSxLQUFVSSxLQUFVQSxFQUN4QyxNQUE0QixpQkFBZEwsRUFBSUssR0FBcUJOLEVBQVVDLEVBQUlLLEdBQU9DLEdBQUssR0FBR0MsbUJBQW1CRCxNQUFNQyxtQkFBbUJQLEVBQUlLLEtBQUssR0FFMUhHLEtBQUssSUFDVixDQTRCQSxJQUFNQyxFQUFpQyxDQUFFQyxlQUFnQixDQUFDLE1BQU8sT0FBUSxNQUFPLFFB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