//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2NhbFZhbHlyaWFuIiwiaXNOb2RlSnMiLCJCb29sZWFuIiwicHJvY2VzcyIsInZlcnNpb25zIiwibm9kZSIsInNlcmlhbGl6ZSIsIm9iaiIsInByZWZpeCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJwcm9wIiwiayIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJyZXF1ZXN0IiwiUmVxdWVzdGVyIiwiYmFzZVVybCIsIm9wdGlvbnMiLCJhbGxvd2VkTWV0aG9kcyIsInVybCIsInJlcGxhY2UiLCJ0cmltIiwidXJscyIsImJhc2UiLCJhcGkiLCJvcHRzIiwicmVxdWVzdDIiLCJhc3luYyIsIm1ldGhvZCIsInVybDIiLCJkYXRhIiwib3B0aW9uczIiLCJpbm5lck9wdGlvbnMiLCJ0b0xvd2VyQ2FzZSIsImhlYWRlcnMiLCJyZXNvbHZlV2l0aEZ1bGxSZXNwb25zZSIsIkFjY2VwdCIsImFjY2VwdFR5cGUiLCJjb250ZW50VHlwZSIsImluZGV4T2YiLCJFcnJvciIsInRlc3QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJpIiwiYXBwZW5kIiwicmVzcG9uc2UiLCJmZXRjaCIsInUiLCJwYXJ0cyIsInNwbGl0IiwicGFyc2VVcmwiLCJvayIsImVyciIsInN0YXR1c1RleHQiLCJ0ZXh0IiwianNvbiIsImVycm9yIiwibmV3IiwiYmFzZVVybDIiLCJzZXRPcHRpb24iLCJrZXkiLCJ2YWx1ZSIsIm5leHQiLCJyZXN1bHQiLCJwYXJzZWQiLCJsZW5ndGgiLCJzaGlmdCIsIm5leHRJc0FycmF5IiwiaWR4IiwidW5zaGlmdCIsImdldE9wdGlvbnMiLCJmb3JFYWNoIiwidiJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9yZXF1ZXN0L2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZhbHlyaWFuIH0gZnJvbSBcIi4uL2luZGV4XCI7XG5cbmludGVyZmFjZSBVcmxPcHRpb25zIHtcbiAgYmFzZTogc3RyaW5nOyAvLyBVc2VkIHRvIHByZWZpeCB0aGUgdXJsIGZvciBzY29wZWQgcmVxdWVzdHMuXG4gIG5vZGU6IHN0cmluZyB8IG51bGw7IC8vIFVzZWQgdG8gcmVkaXJlY3QgbG9jYWwgcmVxdWVzdHMgdG8gbm9kZSBzZXJ2ZXIgZm9yIHNlcnZlciBzaWRlIHJlbmRlcmluZy5cbiAgYXBpOiBzdHJpbmcgfCBudWxsOyAvLyBVc2VkIHRvIHJlZGlyZWN0IGFwaSByZXF1ZXN0cyB0byBub2RlIHNlcnZlciBmb3Igc2VydmVyIHNpZGUgcmVuZGVyaW5nLlxufVxuXG5pbnRlcmZhY2UgUmVxdWVzdE9wdGlvbnMge1xuICBhbGxvd2VkTWV0aG9kczogc3RyaW5nW107XG4gIHVybHM/OiBVcmxPcHRpb25zO1xuICBba2V5OiBzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2xdOiBhbnk7XG59XG5cbmludGVyZmFjZSBSZXF1ZXN0T3B0aW9uc1dpdGhVcmxzIGV4dGVuZHMgUmVxdWVzdE9wdGlvbnMge1xuICB1cmxzOiBVcmxPcHRpb25zO1xufVxuXG5pbnRlcmZhY2UgU2VuZE9wdGlvbnMgZXh0ZW5kcyBSZXF1ZXN0T3B0aW9uc1dpdGhVcmxzLCBSZXF1ZXN0SW5pdCB7XG4gIG1ldGhvZDogc3RyaW5nO1xuICBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICByZXNvbHZlV2l0aEZ1bGxSZXNwb25zZT86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBSZXF1ZXN0SW50ZXJmYWNlIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIChtZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUGFydGlhbDxTZW5kT3B0aW9ucz4pOiBhbnkgfCBSZXNwb25zZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIG5ldzogKGJhc2VVcmw6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdE9wdGlvbnMpID0+IFJlcXVlc3RJbnRlcmZhY2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBzZXRPcHRpb25zOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBnZXRPcHRpb25zOiAoa2V5Pzogc3RyaW5nKSA9PiBSZXF1ZXN0T3B0aW9ucyB8IHZvaWQ7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBnZXQ/OiAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBwb3N0PzogKHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IGFueSB8IFJlc3BvbnNlO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgcHV0PzogKHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IGFueSB8IFJlc3BvbnNlO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgcGF0Y2g/OiAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBkZWxldGU/OiAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBoZWFkPzogKHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Piwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IGFueSB8IFJlc3BvbnNlO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgb3B0aW9ucz86ICh1cmw6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBhbnkgfCBSZXNwb25zZTtcbiAgW2tleTogc3RyaW5nIHwgbnVtYmVyIHwgc3ltYm9sXTogYW55O1xufVxuXG5kZWNsYXJlIG1vZHVsZSBcIi4uL2luZGV4XCIge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgaW50ZXJmYWNlIFZhbHlyaWFuIHtcbiAgICByZXF1ZXN0PzogUmVxdWVzdEludGVyZmFjZTtcbiAgfVxufVxuXG5sZXQgbG9jYWxWYWx5cmlhbjogVmFseXJpYW4gPSB7XG4gIGlzTm9kZUpzOiBCb29sZWFuKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MudmVyc2lvbnMgJiYgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlKVxufSBhcyB1bmtub3duIGFzIFZhbHlyaWFuO1xuXG4vLyBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlcmlhbGl6ZSBhbiBvYmplY3QgaW50byBhIHF1ZXJ5IHN0cmluZy5cbmZ1bmN0aW9uIHNlcmlhbGl6ZShvYmo6IFJlY29yZDxzdHJpbmcsIGFueT4sIHByZWZpeDogc3RyaW5nID0gXCJcIik6IHN0cmluZyB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgLm1hcCgocHJvcDogc3RyaW5nKSA9PiB7XG4gICAgICBsZXQgayA9IHByZWZpeCA/IGAke3ByZWZpeH1bJHtwcm9wfV1gIDogcHJvcDtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqW3Byb3BdID09PSBcIm9iamVjdFwiID8gc2VyaWFsaXplKG9ialtwcm9wXSwgaykgOiBgJHtlbmNvZGVVUklDb21wb25lbnQoayl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KG9ialtwcm9wXSl9YDtcbiAgICB9KVxuICAgIC5qb2luKFwiJlwiKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VVcmwodXJsOiBzdHJpbmcsIG9wdGlvbnM6IFJlcXVlc3RPcHRpb25zV2l0aFVybHMpIHtcbiAgbGV0IHUgPSAvXmh0dHBzPy9naS50ZXN0KHVybCkgPyB1cmwgOiBvcHRpb25zLnVybHMuYmFzZSArIHVybDtcblxuICBsZXQgcGFydHMgPSB1LnNwbGl0KFwiP1wiKTtcbiAgdSA9IHBhcnRzWzBdLnRyaW0oKS5yZXBsYWNlKC9eXFwvXFwvLywgXCIvXCIpLnJlcGxhY2UoL1xcLyQvLCBcIlwiKS50cmltKCk7XG5cbiAgaWYgKHBhcnRzWzFdKSB7XG4gICAgdSArPSBgPyR7cGFydHNbMV19YDtcbiAgfVxuXG4gIGlmIChsb2NhbFZhbHlyaWFuLmlzTm9kZUpzICYmIHR5cGVvZiBvcHRpb25zLnVybHMubm9kZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIG9wdGlvbnMudXJscy5ub2RlID0gb3B0aW9ucy51cmxzLm5vZGU7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudXJscy5hcGkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG9wdGlvbnMudXJscy5hcGkgPSBvcHRpb25zLnVybHMuYXBpLnJlcGxhY2UoL1xcLyQvZ2ksIFwiXCIpLnRyaW0oKTtcbiAgICAgIHUgPSB1LnJlcGxhY2Uob3B0aW9ucy51cmxzLmFwaSwgb3B0aW9ucy51cmxzLm5vZGUpO1xuICAgIH1cblxuICAgIGlmICghL15odHRwcz8vZ2kudGVzdCh1KSkge1xuICAgICAgdSA9IG9wdGlvbnMudXJscy5ub2RlICsgdTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdTtcbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHNvbmFyanMvY29nbml0aXZlLWNvbXBsZXhpdHlcbmZ1bmN0aW9uIFJlcXVlc3RlcihiYXNlVXJsID0gXCJcIiwgb3B0aW9uczogUmVxdWVzdE9wdGlvbnMgPSB7IGFsbG93ZWRNZXRob2RzOiBbXCJnZXRcIiwgXCJwb3N0XCIsIFwicHV0XCIsIFwicGF0Y2hcIiwgXCJkZWxldGVcIl0gfSkge1xuICBsZXQgdXJsID0gYmFzZVVybC5yZXBsYWNlKC9cXC8kL2dpLCBcIlwiKS50cmltKCk7XG4gIGlmICghb3B0aW9ucy51cmxzKSB7XG4gICAgb3B0aW9ucy51cmxzID0ge1xuICAgICAgYmFzZTogXCJcIixcbiAgICAgIG5vZGU6IG51bGwsXG4gICAgICBhcGk6IG51bGxcbiAgICB9O1xuICB9XG4gIGxldCBvcHRzOiBSZXF1ZXN0T3B0aW9uc1dpdGhVcmxzID0ge1xuICAgIC4uLm9wdGlvbnMsXG4gICAgdXJsczoge1xuICAgICAgbm9kZTogb3B0aW9ucy51cmxzLm5vZGUgfHwgbnVsbCxcbiAgICAgIGFwaTogb3B0aW9ucy51cmxzLmFwaSB8fCBudWxsLFxuICAgICAgYmFzZTogb3B0aW9ucy51cmxzLmJhc2UgPyBvcHRpb25zLnVybHMuYmFzZSArIHVybCA6IHVybFxuICAgIH1cbiAgfTtcblxuICBjb25zdCByZXF1ZXN0ID0gYXN5bmMgZnVuY3Rpb24gcmVxdWVzdChtZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgaW5uZXJPcHRpb25zOiBTZW5kT3B0aW9ucyA9IHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLnRvTG93ZXJDYXNlKCksXG4gICAgICBoZWFkZXJzOiB7fSxcbiAgICAgIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlOiBmYWxzZSxcbiAgICAgIC4uLm9wdHMsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfSBhcyBTZW5kT3B0aW9ucztcblxuICAgIGlmICghaW5uZXJPcHRpb25zLmhlYWRlcnMuQWNjZXB0KSB7XG4gICAgICBpbm5lck9wdGlvbnMuaGVhZGVycy5BY2NlcHQgPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcbiAgICB9XG5cbiAgICBsZXQgYWNjZXB0VHlwZSA9IGlubmVyT3B0aW9ucy5oZWFkZXJzLkFjY2VwdDtcbiAgICBsZXQgY29udGVudFR5cGUgPSBpbm5lck9wdGlvbnMuaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXSB8fCBpbm5lck9wdGlvbnMuaGVhZGVyc1tcImNvbnRlbnQtdHlwZVwiXSB8fCBcIlwiO1xuXG4gICAgaWYgKGlubmVyT3B0aW9ucy5hbGxvd2VkTWV0aG9kcy5pbmRleE9mKG1ldGhvZCkgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGFsbG93ZWRcIik7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIGlmIChpbm5lck9wdGlvbnMubWV0aG9kID09PSBcImdldFwiICYmIHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHVybCArPSBgPyR7c2VyaWFsaXplKGRhdGEpfWA7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbm5lck9wdGlvbnMubWV0aG9kICE9PSBcImdldFwiKSB7XG4gICAgICAgIGlmICgvanNvbi9naS50ZXN0KGNvbnRlbnRUeXBlKSkge1xuICAgICAgICAgIGlubmVyT3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IGZvcm1EYXRhO1xuICAgICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgRm9ybURhdGEpIHtcbiAgICAgICAgICAgIGZvcm1EYXRhID0gZGF0YTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgaW4gZGF0YSkge1xuICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoaSwgZGF0YVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlubmVyT3B0aW9ucy5ib2R5ID0gZm9ybURhdGE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChwYXJzZVVybCh1cmwsIG9wdHMpLCBpbm5lck9wdGlvbnMpO1xuICAgIGxldCBib2R5ID0gbnVsbDtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBsZXQgZXJyID0gbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpIGFzIEVycm9yICYgeyByZXNwb25zZT86IGFueTsgYm9keT86IGFueSB9O1xuICAgICAgZXJyLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICBpZiAoL3RleHQvZ2kudGVzdChhY2NlcHRUeXBlKSkge1xuICAgICAgICBlcnIuYm9keSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKC9qc29uL2dpLnRlc3QoYWNjZXB0VHlwZSkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBlcnIuYm9keSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBpZ25vcmVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgaWYgKGlubmVyT3B0aW9ucy5yZXNvbHZlV2l0aEZ1bGxSZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cblxuICAgIGlmICgvdGV4dC9naS50ZXN0KGFjY2VwdFR5cGUpKSB7XG4gICAgICBib2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgcmV0dXJuIGJvZHk7XG4gICAgfVxuXG4gICAgaWYgKC9qc29uL2dpLnRlc3QoYWNjZXB0VHlwZSkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGJvZHkgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBib2R5O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gaWdub3JlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9IGFzIHVua25vd24gYXMgUmVxdWVzdEludGVyZmFjZTtcblxuICByZXF1ZXN0Lm5ldyA9IChiYXNlVXJsOiBzdHJpbmcsIG9wdGlvbnM6IFJlcXVlc3RPcHRpb25zKSA9PiBSZXF1ZXN0ZXIoYmFzZVVybCwgeyAuLi5vcHRzLCAuLi5vcHRpb25zIH0pO1xuXG4gIHJlcXVlc3Quc2V0T3B0aW9uID0gKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB7XG4gICAgbGV0IHJlc3VsdCA9IG9wdHM7XG5cbiAgICBsZXQgcGFyc2VkID0ga2V5LnNwbGl0KFwiLlwiKTtcbiAgICBsZXQgbmV4dDtcblxuICAgIHdoaWxlIChwYXJzZWQubGVuZ3RoKSB7XG4gICAgICBuZXh0ID0gcGFyc2VkLnNoaWZ0KCkgYXMgc3RyaW5nO1xuXG4gICAgICBsZXQgbmV4dElzQXJyYXkgPSBuZXh0LmluZGV4T2YoXCJbXCIpID4gLTE7XG4gICAgICBpZiAobmV4dElzQXJyYXkpIHtcbiAgICAgICAgbGV0IGlkeCA9IG5leHQucmVwbGFjZSgvXFxEL2dpLCBcIlwiKTtcbiAgICAgICAgbmV4dCA9IG5leHQuc3BsaXQoXCJbXCIpWzBdO1xuICAgICAgICBwYXJzZWQudW5zaGlmdChpZHgpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VkLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHJlc3VsdFtuZXh0XSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICByZXN1bHRbbmV4dF0gPSBuZXh0SXNBcnJheSA/IFtdIDoge307XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJzZWQubGVuZ3RoID09PSAwICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXN1bHRbbmV4dF0gPSB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0ID0gcmVzdWx0W25leHRdO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgcmVxdWVzdC5nZXRPcHRpb25zID0gKGtleT86IHN0cmluZykgPT4ge1xuICAgIGlmICgha2V5KSB7XG4gICAgICByZXR1cm4gb3B0cztcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0ID0gb3B0cztcbiAgICBsZXQgcGFyc2VkID0ga2V5LnNwbGl0KFwiLlwiKTtcbiAgICBsZXQgbmV4dDtcblxuICAgIHdoaWxlIChwYXJzZWQubGVuZ3RoKSB7XG4gICAgICBuZXh0ID0gcGFyc2VkLnNoaWZ0KCkgYXMgc3RyaW5nO1xuXG4gICAgICBsZXQgbmV4dElzQXJyYXkgPSBuZXh0LmluZGV4T2YoXCJbXCIpID4gLTE7XG4gICAgICBpZiAobmV4dElzQXJyYXkpIHtcbiAgICAgICAgbGV0IGlkeCA9IG5leHQucmVwbGFjZSgvXFxEL2dpLCBcIlwiKTtcbiAgICAgICAgbmV4dCA9IG5leHQuc3BsaXQoXCJbXCIpWzBdO1xuICAgICAgICBwYXJzZWQudW5zaGlmdChpZHgpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VkLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHJlc3VsdFtuZXh0XSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFtuZXh0XTtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0ID0gcmVzdWx0W25leHRdO1xuICAgIH1cbiAgfTtcblxuICBvcHRzLmFsbG93ZWRNZXRob2RzLmZvckVhY2goXG4gICAgKG1ldGhvZCkgPT4gKHJlcXVlc3RbbWV0aG9kXSA9ICh1cmw6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4sIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiByZXF1ZXN0KG1ldGhvZCwgdXJsLCBkYXRhLCBvcHRpb25zKSlcbiAgKTtcblxuICByZXR1cm4gcmVxdWVzdDtcbn1cblxuZXhwb3J0IGNvbnN0IHJlcXVlc3QgPSBSZXF1ZXN0ZXIoKTtcbmNvbnN0IHBsdWdpbiA9ICh2OiBWYWx5cmlhbik6IFJlcXVlc3RJbnRlcmZhY2UgPT4ge1xuICBsb2NhbFZhbHlyaWFuID0gdjtcbiAgdi5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgcmV0dXJuIHJlcXVlc3Q7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBwbHVnaW47XG4iXSwibWFwcGluZ3MiOiJNQXlEQSxJQUFJQSxFQUEwQixDQUM1QkMsU0FBVUMsUUFBMkIsb0JBQVpDLFNBQTJCQSxRQUFRQyxVQUFZRCxRQUFRQyxTQUFTQyxPQUkzRixTQUFBQyxFQUFtQkMsRUFBMEJDLEVBQWlCLElBQzVELE9BQU9DLE9BQU9DLEtBQUtILEdBQ2hCSSxJQUFLQyxJQUNKLElBQUlDLEVBQUlMLEVBQVMsR0FBR0EsS0FBVUksS0FBVUEsRUFDeEMsTUFBNEIsaUJBQWRMLEVBQUlLLEdBQXFCTixFQUFVQyxFQUFJSyxHQUFPQyxHQUFLLEdBQUdDLG1CQUFtQkQsTUFBTUMsbUJBQW1CUCxFQUFJSyxLQUFLLEdBRTFIRyxLQUFLLElBQ1YsQ0F5TU8sSUFBTUMsRUE1S2IsU0FBQUMsRUFBbUJDLEVBQVUsR0FBSUMsRUFBMEIsQ0FBRUMsZUFBZ0IsQ0FBQyxNQUFPLE9BQVEsTUFBTyxRQUFTLFlBQzNHLElBQUlDLEVBQU1ILEVBQVFJLFFBQVEsUUFBUyxJQUFJQyxPQUNsQ0osRUFBUUssT0FDWEwsRUFBUUssS0FBTyxDQUNiQyxLQUFNLEdBQ05wQixLQUFNLEtBQ05xQixJQUFLLE9BR1QsSUFBSUMsRUFBK0IsSUFDOUJSLEVBQ0hLLEtBQU0sQ0FDSm5CLEtBQU1jLEVBQVFLLEtBQUtuQixNQUFRLEtB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