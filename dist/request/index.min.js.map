//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbmRleF9leHBvcnRzIiwiX19leHBvcnQiLCJyZXF1ZXN0IiwiX19FWFBPUlRTX18iLCJpbXBvcnRfdmFseXJpYW4iLCJyZXF1aXJlIiwiaW1wb3J0X3V0aWxzIiwic2VyaWFsaXplIiwib2JqIiwicHJlZml4IiwiVVJMU2VhcmNoUGFyYW1zIiwicGFyYW1zIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJwcm9wIiwia2V5IiwidmFsdWUiLCJuZXN0ZWRLZXkiLCJhcHBlbmQiLCJkZWZhdWx0T3B0aW9ucyIsImFsbG93ZWRNZXRob2RzIiwiUmVxdWVzdGVyIiwiYmFzZVVybCIsIm9wdGlvbnMiLCJ1cmwiLCJyZXBsYWNlIiwidHJpbSIsInVybHMiLCJiYXNlIiwibm9kZSIsImFwaSIsIm9wdHMiLCJhc3luYyIsIm1ldGhvZCIsImRhdGEiLCJpbm5lck9wdGlvbnMiLCJ0b1VwcGVyQ2FzZSIsImhlYWRlcnMiLCJyZXNvbHZlV2l0aEZ1bGxSZXNwb25zZSIsIkFjY2VwdCIsImFjY2VwdFR5cGUiLCJjb250ZW50VHlwZSIsImluY2x1ZGVzIiwiRXJyb3IiLCJqb2luIiwiZmluYWxVcmwiLCJ1cmxXaXRob3V0U2xhc2giLCJ1IiwidGVzdCIsImlzTm9kZUpzIiwiVVJMIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJwYXJzZVVybCIsImVycm9yIiwiZXJyIiwiY2F1c2UiLCJzZWFyY2giLCJ0b1N0cmluZyIsIkZvcm1EYXRhIiwiQmxvYiIsIkFycmF5QnVmZmVyIiwiRGF0YVZpZXciLCJSZWFkYWJsZVN0cmVhbSIsImlzTmF0aXZlQm9keSIsImJvZHkiLCJpc0pzb24iLCJKU09OIiwic3RyaW5naWZ5IiwiZmQiLCJlbnRyaWVzIiwiQXJyYXkiLCJpc0FycmF5IiwidiIsInNlcmlhbGl6ZUZvcm1EYXRhIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsInRleHQiLCJqc29uIiwiY29uc29sZSIsIndhcm4iLCJibG9iIiwiYXJyYXlCdWZmZXIiLCJuZXciLCJzZXRPcHRpb24iLCJzZXQiLCJnZXRPcHRpb25zIiwiZ2V0IiwiYXNzaWduIiwicmVkdWNlIiwiYWNjIl0sInNvdXJjZXMiOlsiLi4vLi4vbGliL3JlcXVlc3QvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNOb2RlSnMgfSBmcm9tIFwidmFseXJpYW4uanNcIjtcbmltcG9ydCB7IGdldCwgc2V0IH0gZnJvbSBcInZhbHlyaWFuLmpzL3V0aWxzXCI7XG5cbmludGVyZmFjZSBVcmxPcHRpb25zIHtcbiAgYmFzZT86IHN0cmluZzsgLy8gVXNlZCB0byBwcmVmaXggdGhlIHVybCBmb3Igc2NvcGVkIHJlcXVlc3RzLlxuICBub2RlPzogc3RyaW5nIHwgbnVsbDsgLy8gVXNlZCB0byByZWRpcmVjdCBsb2NhbCByZXF1ZXN0cyB0byBub2RlIHNlcnZlciBmb3Igc2VydmVyIHNpZGUgcmVuZGVyaW5nLlxuICBhcGk/OiBzdHJpbmcgfCBudWxsOyAvLyBVc2VkIHRvIHJlZGlyZWN0IGFwaSByZXF1ZXN0cyB0byBub2RlIHNlcnZlciBmb3Igc2VydmVyIHNpZGUgcmVuZGVyaW5nLlxufVxuXG5pbnRlcmZhY2UgUmVxdWVzdE9wdGlvbnMge1xuICBhbGxvd2VkTWV0aG9kcz86IHN0cmluZ1tdO1xuICB1cmxzPzogVXJsT3B0aW9ucztcbiAgW2tleTogc3RyaW5nIHwgbnVtYmVyIHwgc3ltYm9sXTogYW55O1xufVxuXG5pbnRlcmZhY2UgUmVxdWVzdE9wdGlvbnNXaXRoVXJscyBleHRlbmRzIFJlcXVlc3RPcHRpb25zIHtcbiAgdXJsczogVXJsT3B0aW9ucztcbiAgYWxsb3dlZE1ldGhvZHM6IHN0cmluZ1tdO1xufVxuXG5pbnRlcmZhY2UgU2VuZE9wdGlvbnMgZXh0ZW5kcyBSZXF1ZXN0T3B0aW9uc1dpdGhVcmxzLCBSZXF1ZXN0SW5pdCB7XG4gIGFsbG93ZWRNZXRob2RzOiBzdHJpbmdbXTtcbiAgbWV0aG9kOiBzdHJpbmc7XG4gIGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIHJlc29sdmVXaXRoRnVsbFJlc3BvbnNlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0SW50ZXJmYWNlIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIChtZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbCwgb3B0aW9ucz86IFBhcnRpYWw8U2VuZE9wdGlvbnM+KTogYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBuZXc6IChiYXNlVXJsOiBzdHJpbmcsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucykgPT4gUmVxdWVzdEludGVyZmFjZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIHNldE9wdGlvbnM6IChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4gdm9pZDtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGdldE9wdGlvbnM6IChrZXk/OiBzdHJpbmcpID0+IFJlcXVlc3RPcHRpb25zIHwgdm9pZDtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGdldDogKHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwsIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBhbnkgfCBSZXNwb25zZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIHBvc3Q6ICh1cmw6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsLCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBwdXQ6ICh1cmw6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsLCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBwYXRjaDogKHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwsIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBhbnkgfCBSZXNwb25zZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGRlbGV0ZTogKHVybDogc3RyaW5nLCBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwsIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBhbnkgfCBSZXNwb25zZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGhlYWQ6ICh1cmw6IHN0cmluZywgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsLCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gYW55IHwgUmVzcG9uc2U7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBvcHRpb25zOiAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbCwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IGFueSB8IFJlc3BvbnNlO1xuICBba2V5OiBzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2xdOiBhbnk7XG59XG5cbi8vIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VyaWFsaXplIGFuIG9iamVjdCBpbnRvIGEgcXVlcnkgc3RyaW5nLlxuZnVuY3Rpb24gc2VyaWFsaXplKG9iajogYW55LCBwcmVmaXg/OiBzdHJpbmcpOiBVUkxTZWFyY2hQYXJhbXMge1xuICBpZiAob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgfVxuXG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcblxuICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goKHByb3ApID0+IHtcbiAgICBjb25zdCBrZXkgPSBwcmVmaXggPyBgJHtwcmVmaXh9WyR7cHJvcH1dYCA6IHByb3A7XG5cbiAgICBpZiAodHlwZW9mIG9ialtwcm9wXSA9PT0gXCJvYmplY3RcIiAmJiBvYmpbcHJvcF0gIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IG5lc3RlZFBhcmFtcyA9IHNlcmlhbGl6ZShvYmpbcHJvcF0sIGtleSk7XG4gICAgICBuZXN0ZWRQYXJhbXMuZm9yRWFjaCgodmFsdWUsIG5lc3RlZEtleSkgPT4ge1xuICAgICAgICBwYXJhbXMuYXBwZW5kKG5lc3RlZEtleSwgdmFsdWUpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcmFtcy5hcHBlbmQoa2V5LCBvYmpbcHJvcF0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwYXJhbXM7XG59XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZUZvcm1EYXRhKGRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBGb3JtRGF0YSB7XG4gIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhKCk7XG4gIE9iamVjdC5lbnRyaWVzKGRhdGEpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB2YWx1ZS5mb3JFYWNoKCh2KSA9PiBmZC5hcHBlbmQoa2V5LCB2KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZkLmFwcGVuZChrZXksIHZhbHVlKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gZmQ7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVXJsKHVybDogc3RyaW5nLCBvcHRpb25zOiBSZXF1ZXN0T3B0aW9uc1dpdGhVcmxzKSB7XG4gIGNvbnN0IHVybFdpdGhvdXRTbGFzaCA9IHVybC5yZXBsYWNlKC9cXC8rJC8sIFwiXCIpLnRyaW0oKTtcbiAgY29uc3QgdSA9IC9eaHR0cHM/L2dpLnRlc3QodXJsV2l0aG91dFNsYXNoKSA/IHVybFdpdGhvdXRTbGFzaCA6IGAke29wdGlvbnMudXJscy5iYXNlIHx8IFwiXCJ9JHt1cmxXaXRob3V0U2xhc2h9YDtcblxuICBpZiAoaXNOb2RlSnMgJiYgdHlwZW9mIG9wdGlvbnMudXJscy5ub2RlID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnVybHMuYXBpID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gbmV3IFVSTCh1LnJlcGxhY2Uob3B0aW9ucy51cmxzLmFwaSwgb3B0aW9ucy51cmxzLm5vZGUpKTtcbiAgICB9XG5cbiAgICBpZiAoIS9eaHR0cHM/L2dpLnRlc3QodSkpIHtcbiAgICAgIHJldHVybiBuZXcgVVJMKHUsIG9wdGlvbnMudXJscy5ub2RlKTtcbiAgICB9XG4gIH1cblxuICBpZiAoL15odHRwcz8vZ2kudGVzdCh1KSkge1xuICAgIHJldHVybiBuZXcgVVJMKHUpO1xuICB9XG5cbiAgaWYgKCFpc05vZGVKcykge1xuICAgIHJldHVybiBuZXcgVVJMKHUsIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBVUkwodSk7XG59XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBSZXF1ZXN0T3B0aW9ucyA9IHsgYWxsb3dlZE1ldGhvZHM6IFtcImdldFwiLCBcInBvc3RcIiwgXCJwdXRcIiwgXCJwYXRjaFwiLCBcImRlbGV0ZVwiLCBcImhlYWRcIiwgXCJvcHRpb25zXCJdIH07XG5cbmNvbnN0IGlzTmF0aXZlQm9keSA9IChkYXRhOiBhbnkpID0+XG4gIGRhdGEgaW5zdGFuY2VvZiBGb3JtRGF0YSB8fFxuICBkYXRhIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zIHx8XG4gIGRhdGEgaW5zdGFuY2VvZiBCbG9iIHx8XG4gIGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fFxuICAodHlwZW9mIERhdGFWaWV3ICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRhVmlldykgfHxcbiAgKHR5cGVvZiBSZWFkYWJsZVN0cmVhbSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgUmVhZGFibGVTdHJlYW0pO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgc29uYXJqcy9jb2duaXRpdmUtY29tcGxleGl0eVxuZnVuY3Rpb24gUmVxdWVzdGVyKGJhc2VVcmwgPSBcIlwiLCBvcHRpb25zOiBSZXF1ZXN0T3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zKSB7XG4gIGNvbnN0IHVybCA9IGJhc2VVcmwucmVwbGFjZSgvXFwvJC9naSwgXCJcIikudHJpbSgpO1xuICBpZiAoIW9wdGlvbnMudXJscykge1xuICAgIG9wdGlvbnMudXJscyA9IHtcbiAgICAgIGJhc2U6IFwiXCIsXG4gICAgICBub2RlOiBudWxsLFxuICAgICAgYXBpOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIGlmICghb3B0aW9ucy5hbGxvd2VkTWV0aG9kcykge1xuICAgIG9wdGlvbnMuYWxsb3dlZE1ldGhvZHMgPSBkZWZhdWx0T3B0aW9ucy5hbGxvd2VkTWV0aG9kcztcbiAgfVxuXG4gIGNvbnN0IG9wdHM6IFJlcXVlc3RPcHRpb25zV2l0aFVybHMgPSB7XG4gICAgLi4uKG9wdGlvbnMgYXMgUmVxdWVzdE9wdGlvbnNXaXRoVXJscyksXG4gICAgdXJsczoge1xuICAgICAgbm9kZTogb3B0aW9ucy51cmxzLm5vZGUgfHwgbnVsbCxcbiAgICAgIGFwaTogb3B0aW9ucy51cmxzLmFwaSB8fCBudWxsLFxuICAgICAgYmFzZTogb3B0aW9ucy51cmxzLmJhc2UgPyBvcHRpb25zLnVybHMuYmFzZSArIHVybCA6IHVybFxuICAgIH1cbiAgfTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuICBjb25zdCByZXF1ZXN0ID0gYXN5bmMgZnVuY3Rpb24gcmVxdWVzdChcbiAgICBtZXRob2Q6IHN0cmluZyxcbiAgICB1cmw6IHN0cmluZyxcbiAgICBkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwsXG4gICAgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9XG4gICkge1xuICAgIGNvbnN0IGlubmVyT3B0aW9uczogU2VuZE9wdGlvbnMgPSB7XG4gICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLFxuICAgICAgaGVhZGVyczoge30sXG4gICAgICByZXNvbHZlV2l0aEZ1bGxSZXNwb25zZTogZmFsc2UsXG4gICAgICAuLi5vcHRzLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH0gYXMgU2VuZE9wdGlvbnM7XG5cbiAgICBpbm5lck9wdGlvbnMuaGVhZGVycyA9IHsgLi4uaW5uZXJPcHRpb25zLmhlYWRlcnMsIC4uLm9wdHMuaGVhZGVycywgLi4ub3B0aW9ucy5oZWFkZXJzIH07XG5cbiAgICBpZiAoIWlubmVyT3B0aW9ucy5oZWFkZXJzLkFjY2VwdCkge1xuICAgICAgaW5uZXJPcHRpb25zLmhlYWRlcnMuQWNjZXB0ID0gXCJhcHBsaWNhdGlvbi9qc29uXCI7XG4gICAgfVxuXG4gICAgY29uc3QgYWNjZXB0VHlwZSA9IGlubmVyT3B0aW9ucy5oZWFkZXJzLkFjY2VwdDtcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IGlubmVyT3B0aW9ucy5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdIHx8IGlubmVyT3B0aW9ucy5oZWFkZXJzW1wiY29udGVudC10eXBlXCJdIHx8IFwiXCI7XG5cbiAgICBpZiAoIWlubmVyT3B0aW9ucy5hbGxvd2VkTWV0aG9kcy5pbmNsdWRlcyhtZXRob2QpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE1ldGhvZCAke21ldGhvZH0gbm90IGFsbG93ZWQuIEFsbG93ZWQgbWV0aG9kczogJHtpbm5lck9wdGlvbnMuYWxsb3dlZE1ldGhvZHMuam9pbihcIiwgXCIpfWApO1xuICAgIH1cblxuICAgIGxldCBmaW5hbFVybDogVVJMO1xuICAgIHRyeSB7XG4gICAgICBmaW5hbFVybCA9IHBhcnNlVXJsKHVybCwgb3B0cyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgRmFpbGVkIHRvIHBhcnNlIFVSTDogJHt1cmx9YCwgeyBjYXVzZTogZXJyb3IgfSk7XG4gICAgICBlcnIuY2F1c2UgPSBlcnJvcjtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICBpZiAoZGF0YSkge1xuICAgICAgaWYgKGlubmVyT3B0aW9ucy5tZXRob2QgPT09IFwiR0VUXCIgJiYgdHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgZmluYWxVcmwuc2VhcmNoID0gc2VyaWFsaXplKGRhdGEpLnRvU3RyaW5nKCk7XG4gICAgICB9IGVsc2UgaWYgKGlzTmF0aXZlQm9keShkYXRhKSB8fCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpbm5lck9wdGlvbnMuYm9keSA9IGRhdGEgYXMgQm9keUluaXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpc0pzb24gPSAvanNvbi9naS50ZXN0KGNvbnRlbnRUeXBlKTtcbiAgICAgICAgaWYgKGlzSnNvbikge1xuICAgICAgICAgIGlubmVyT3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5uZXJPcHRpb25zLmJvZHkgPSBzZXJpYWxpemVGb3JtRGF0YShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZmluYWxVcmwudG9TdHJpbmcoKSwgaW5uZXJPcHRpb25zKTtcbiAgICBsZXQgYm9keSA9IG51bGw7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKGAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKSBhcyBFcnJvciAmIHsgcmVzcG9uc2U/OiBhbnk7IGJvZHk/OiBhbnkgfTtcbiAgICAgIGVyci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgaWYgKC90ZXh0L2dpLnRlc3QoYWNjZXB0VHlwZSkpIHtcbiAgICAgICAgZXJyLmJvZHkgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICgvanNvbi9naS50ZXN0KGFjY2VwdFR5cGUpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZXJyLmJvZHkgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgZXJyLmJvZHkgPSBudWxsO1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIHBhcnNlIEpTT04gcmVzcG9uc2U6XCIsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgaWYgKGlubmVyT3B0aW9ucy5yZXNvbHZlV2l0aEZ1bGxSZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cblxuICAgIGlmICgvdGV4dC9naS50ZXN0KGFjY2VwdFR5cGUpKSB7XG4gICAgICBib2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgIH0gZWxzZSBpZiAoL2pzb24vZ2kudGVzdChhY2NlcHRUeXBlKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYm9keSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBwYXJzZSBKU09OIHJlc3BvbnNlOlwiLCBlcnJvcik7XG4gICAgICAgIGJvZHkgPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoL2Jsb2IvZ2kudGVzdChhY2NlcHRUeXBlKSkge1xuICAgICAgYm9keSA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICB9IGVsc2UgaWYgKC9hcnJheWJ1ZmZlci9naS50ZXN0KGFjY2VwdFR5cGUpKSB7XG4gICAgICBib2R5ID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYm9keSA9IHJlc3BvbnNlO1xuICAgIH1cblxuICAgIHJldHVybiBib2R5IHx8IHJlc3BvbnNlO1xuICB9IGFzIHVua25vd24gYXMgUmVxdWVzdEludGVyZmFjZTtcblxuICByZXF1ZXN0Lm5ldyA9IChiYXNlVXJsOiBzdHJpbmcsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucykgPT4gUmVxdWVzdGVyKGJhc2VVcmwsIHsgLi4ub3B0cywgLi4uKG9wdGlvbnMgfHwge30pIH0pO1xuXG4gIHJlcXVlc3Quc2V0T3B0aW9uID0gKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB7XG4gICAgc2V0KG9wdHMsIGtleSwgdmFsdWUpO1xuICAgIHJldHVybiBvcHRzO1xuICB9O1xuXG4gIHJlcXVlc3QuZ2V0T3B0aW9ucyA9IChrZXk/OiBzdHJpbmcpID0+IHtcbiAgICBpZiAoa2V5KSB7XG4gICAgICByZXR1cm4gZ2V0KG9wdHMsIGtleSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wdHM7XG4gIH07XG5cbiAgT2JqZWN0LmFzc2lnbihcbiAgICByZXF1ZXN0LFxuICAgIG9wdHMuYWxsb3dlZE1ldGhvZHMucmVkdWNlKChhY2M6IFJlY29yZDxzdHJpbmcsIGFueT4sIG1ldGhvZCkgPT4ge1xuICAgICAgYWNjW21ldGhvZF0gPSAodXJsOiBzdHJpbmcsIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbCwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+XG4gICAgICAgIHJlcXVlc3QobWV0aG9kLCB1cmwsIGRhdGEsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSlcbiAgKTtcblxuICByZXR1cm4gcmVxdWVzdDtcbn1cblxuZXhwb3J0IGNvbnN0IHJlcXVlc3QgPSBSZXF1ZXN0ZXIoKTtcbiJdLCJtYXBwaW5ncyI6ImdKQUFBQSxFQUFBLEcseURBQUFDLENBQUFELEVBQUEsQ0FBQUUsUUFBQSxJQUFBQSxJQUFBLEksRUFBQUMsRyxFQUFBSCxFLDBNQUFBSSxFQUF5QkMsUUFBQSxlQUN6QkMsRUFBeUJELFFBQUEscUJBcUR6QixTQUFTRSxFQUFVQyxFQUFVQyxHQUMzQixHQUFJRCxRQUNGLE9BQU8sSUFBSUUsZ0JBR2IsTUFBTUMsRUFBUyxJQUFJRCxnQkFjbkIsT0FaQUUsT0FBT0MsS0FBS0wsR0FBS00sUUFBU0MsSUFDeEIsTUFBTUMsRUFBTVAsRUFBUyxHQUFHQSxLQUFVTSxLQUFVQSxFQUU1QyxHQUF5QixpQkFBZFAsRUFBSU8sSUFBb0MsT0FBZFAsRUFBSU8sR0FBZ0IsQ0FDbENSLEVBQVVDLEVBQUlPLEdBQU9DLEdBQzdCRixRQUFRLENBQUNHLEVBQU9DLEtBQzNCUCxFQUFPUSxPQUFPRCxFQUFXRCxJQUU3QixNQUNFTixFQUFPUSxPQUFPSCxFQUFLUixFQUFJTyxNQUdwQkosQ0FDVCxDQTJDQSxJQUFNUyxFQUFpQyxDQUFFQyxlQUFnQixDQUFDLE1BQU8sT0FBUSxNQUFPLFFBQVMsU0FBVSxPQUFRLFlBZ0twRyxJQUFNbkIsRUFySmIsU0FBU29CLEVBQVVDLEVBQVUsR0FBSUMsRUFBMEJKLEdBQ3pELE1BQU1LLEVBQU1GLEVBQVFHLFFBQVEs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