(()=>{var e={isNodeJs:Boolean("undefined"!=typeof process&&process.versions&&process.versions.node)};function t(e,s=""){return Object.keys(e).map(o=>{let r=s?`${s}[${o}]`:o;return"object"==typeof e[o]?t(e[o],r):`${encodeURIComponent(r)}=${encodeURIComponent(e[o])}`}).join("&")}var s={allowedMethods:["get","post","put","patch","delete"]};var o=function o(r="",l=s){let n=r.replace(/\/$/gi,"").trim();l.urls||(l.urls={base:"",node:null,api:null}),l.allowedMethods||(l.allowedMethods=s.allowedMethods);let i={...l,urls:{node:l.urls.node||null,api:l.urls.api||null,base:l.urls.base?l.urls.base+n:n}};const a=async function(s,o,r,l={}){let n={method:s.toUpperCase(),headers:{},resolveWithFullResponse:!1,...i,...l};n.headers.Accept||(n.headers.Accept="application/json");let a=n.headers.Accept,p=n.headers["Content-Type"]||n.headers["content-type"]||"";if(-1===n.allowedMethods.indexOf(s))throw new Error("Method not allowed");if(r&&("GET"===n.method&&"object"==typeof r&&(o+=`?${t(r)}`),"GET"!==n.method))if(/json/gi.test(p))n.body=JSON.stringify(r);else{let e;if(r instanceof FormData)e=r;else{e=new FormData;for(let t in r)e.append(t,r[t])}n.body=e}let u=await fetch(function(t,s){let o=/^https?/gi.test(t)?t:s.urls.base+t,r=o.split("?");return o=r[0].trim().replace(/^\/\//,"/").replace(/\/$/,"").trim(),r[1]&&(o+=`?${r[1]}`),e.isNodeJs&&"string"==typeof s.urls.node&&(s.urls.node=s.urls.node,"string"==typeof s.urls.api&&(s.urls.api=s.urls.api.replace(/\/$/gi,"").trim(),o=o.replace(s.urls.api,s.urls.node)),/^https?/gi.test(o)||(o=s.urls.node+o)),o}(o,i),n),d=null;if(!u.ok){let e=new Error(u.statusText);if(e.response=u,/text/gi.test(a)&&(e.body=await u.text()),/json/gi.test(a))try{e.body=await u.json()}catch(e){}throw e}if(n.resolveWithFullResponse)return u;if(/text/gi.test(a))return d=await u.text(),d;if(/json/gi.test(a))try{return d=await u.json(),d}catch(e){}return u};return a.new=(e,t)=>o(e,{...i,...t}),a.setOption=(e,t)=>{let s,o=i,r=e.split(".");for(;r.length;){s=r.shift();let e=s.indexOf("[")>-1;if(e){let e=s.replace(/\D/gi,"");s=s.split("[")[0],r.unshift(e)}r.length>0&&"object"!=typeof o[s]&&(o[s]=e?[]:{}),0===r.length&&void 0!==t&&(o[s]=t),o=o[s]}return o},a.getOptions=e=>{if(!e)return i;let t,s=i,o=e.split(".");for(;o.length;){if(t=o.shift(),t.indexOf("[")>-1){let e=t.replace(/\D/gi,"");t=t.split("[")[0],o.unshift(e)}if(o.length>0&&"object"!=typeof s[t])return null;if(0===o.length)return s[t];s=s[t]}},i.allowedMethods.forEach(e=>a[e]=(t,s,o)=>a(e,t,s,o)),a}(),r={plugin:t=>(e=t,t.request=o,o),request:o};"undefined"!=typeof module?module.exports=r:self.ValyrianRequest=r})();//# sourceMappingURL=index.min.js.map