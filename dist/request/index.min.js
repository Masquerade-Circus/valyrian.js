(()=>{"use strict";var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o={};((t,r)=>{for(var s in r)e(t,s,{get:r[s],enumerable:!0})})(o,{request:()=>u});var a,n=(a=o,((o,a,n,l)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let i of r(a))s.call(o,i)||i===n||e(o,i,{get:()=>a[i],enumerable:!(l=t(a,i))||l.enumerable});return o})(e({},"__esModule",{value:!0}),a)),l=require("valyrian.js"),i=require("valyrian.js/utils");function c(e,t=""){const r=new URLSearchParams;return Object.keys(e).forEach(s=>{const o=t?`${t}[${s}]`:s;"object"==typeof e[s]?r.append(o,c(e[s],o).toString()):r.append(o,e[s])}),r}var d={allowedMethods:["get","post","put","patch","delete","head","options"]};var u=function e(t="",r=d){const s=t.replace(/\/$/gi,"").trim();r.urls||(r.urls={base:"",node:null,api:null}),r.allowedMethods||(r.allowedMethods=d.allowedMethods);const o={...r,urls:{node:r.urls.node||null,api:r.urls.api||null,base:r.urls.base?r.urls.base+s:s}},a=async function(e,t,r,s={}){const a={method:e.toUpperCase(),headers:{},resolveWithFullResponse:!1,...o,...s};a.headers={...a.headers,...o.headers,...s.headers},a.headers.Accept||(a.headers.Accept="application/json");const n=a.headers.Accept,i=a.headers["Content-Type"]||a.headers["content-type"]||"";if(!a.allowedMethods.includes(e))throw new Error(`Method ${e} not allowed. Allowed methods: ${a.allowedMethods.join(", ")}`);let d;try{d=function(e,t){const r=e.replace(/\/+$/,"").trim(),s=/^https?/gi.test(r)?r:`${t.urls.base}${r}`;if(l.isNodeJs&&"string"==typeof t.urls.node){if("string"==typeof t.urls.api)return new URL(s.replace(t.urls.api,t.urls.node));if(!/^https?/gi.test(s))return new URL(s,t.urls.node)}return/^https?/gi.test(s)?new URL(s):new URL(s,t.urls.base)}(t,o)}catch(e){throw new Error(`Failed to parse URL: ${t}`)}if(r)if("GET"===a.method&&"object"==typeof r)d.search=c(r).toString();else if((e=>e instanceof FormData||e instanceof URLSearchParams||e instanceof Blob||e instanceof ArrayBuffer||"undefined"!=typeof DataView&&e instanceof DataView||"undefined"!=typeof ReadableStream&&e instanceof ReadableStream)(r)||"string"==typeof r)a.body=r;else{const e=/json/gi.test(i);a.body=e?JSON.stringify(r):function(e){const t=new FormData;return Object.entries(e).forEach(([e,r])=>{null!=r&&(Array.isArray(r)?r.forEach(r=>t.append(e,r)):t.append(e,r))}),t}(r)}const u=await fetch(d.toString(),a);let p=null;if(!u.ok){const e=new Error(`${u.status}: ${u.statusText}`);if(e.response=u,/text/gi.test(n)&&(e.body=await u.text()),/json/gi.test(n))try{e.body=await u.json()}catch(t){e.body=null,console.warn("Failed to parse JSON response:",t)}throw e}if(a.resolveWithFullResponse)return u;if(/text/gi.test(n))p=await u.text();else if(/json/gi.test(n))try{p=await u.json()}catch(e){console.warn("Failed to parse JSON response:",e),p=null}else p=/blob/gi.test(n)?await u.blob():/arraybuffer/gi.test(n)?await u.arrayBuffer():u;return p||u};return a.new=(t,r)=>e(t,{...o,...r||{}}),a.setOption=(e,t)=>((0,i.set)(o,e,t),o),a.getOptions=e=>e?(0,i.get)(o,e):o,Object.assign(a,o.allowedMethods.reduce((e,t)=>(e[t]=(e,r,s)=>a(t,e,r,s),e),{})),a}();"undefined"!=typeof module?module.exports=n:self.ValyrianRequest=n})();//# sourceMappingURL=index.min.js.map