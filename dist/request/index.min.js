(()=>{var e={isNodeJs:Boolean("undefined"!=typeof process&&process.versions&&process.versions.node)};function t(e,s=""){return Object.keys(e).map(n=>{let o=s?`${s}[${n}]`:n;return"object"==typeof e[n]?t(e[n],o):`${encodeURIComponent(o)}=${encodeURIComponent(e[n])}`}).join("&")}var s=function s(n="",o={allowedMethods:["get","post","put","patch","delete"]}){let r=n.replace(/\/$/gi,"").trim();o.urls||(o.urls={base:"",node:null,api:null});let l={...o,urls:{node:o.urls.node||null,api:o.urls.api||null,base:o.urls.base?o.urls.base+r:r}};const i=async function(s,n,o,r={}){let i={method:s.toUpperCase(),headers:{},resolveWithFullResponse:!1,...l,...r};i.headers.Accept||(i.headers.Accept="application/json");let a=i.headers.Accept,p=i.headers["Content-Type"]||i.headers["content-type"]||"";if(-1===i.allowedMethods.indexOf(s))throw new Error("Method not allowed");if(o&&("GET"===i.method&&"object"==typeof o&&(n+=`?${t(o)}`),"GET"!==i.method))if(/json/gi.test(p))i.body=JSON.stringify(o);else{let e;if(o instanceof FormData)e=o;else{e=new FormData;for(let t in o)e.append(t,o[t])}i.body=e}let u=await fetch(function(t,s){let n=/^https?/gi.test(t)?t:s.urls.base+t,o=n.split("?");return n=o[0].trim().replace(/^\/\//,"/").replace(/\/$/,"").trim(),o[1]&&(n+=`?${o[1]}`),e.isNodeJs&&"string"==typeof s.urls.node&&(s.urls.node=s.urls.node,"string"==typeof s.urls.api&&(s.urls.api=s.urls.api.replace(/\/$/gi,"").trim(),n=n.replace(s.urls.api,s.urls.node)),/^https?/gi.test(n)||(n=s.urls.node+n)),n}(n,l),i),d=null;if(!u.ok){let e=new Error(u.statusText);if(e.response=u,/text/gi.test(a)&&(e.body=await u.text()),/json/gi.test(a))try{e.body=await u.json()}catch(e){}throw e}if(i.resolveWithFullResponse)return u;if(/text/gi.test(a))return d=await u.text(),d;if(/json/gi.test(a))try{return d=await u.json(),d}catch(e){}return u};return i.new=(e,t)=>s(e,{...l,...t}),i.setOption=(e,t)=>{let s,n=l,o=e.split(".");for(;o.length;){s=o.shift();let e=s.indexOf("[")>-1;if(e){let e=s.replace(/\D/gi,"");s=s.split("[")[0],o.unshift(e)}o.length>0&&"object"!=typeof n[s]&&(n[s]=e?[]:{}),0===o.length&&void 0!==t&&(n[s]=t),n=n[s]}return n},i.getOptions=e=>{if(!e)return l;let t,s=l,n=e.split(".");for(;n.length;){if(t=n.shift(),t.indexOf("[")>-1){let e=t.replace(/\D/gi,"");t=t.split("[")[0],n.unshift(e)}if(n.length>0&&"object"!=typeof s[t])return null;if(0===n.length)return s[t];s=s[t]}},l.allowedMethods.forEach(e=>i[e]=(t,s,n)=>i(e,t,s,n)),i}(),n={plugin:t=>(e=t,t.request=s,s),request:s};"undefined"!=typeof module?module.exports=n:self.ValyrianRequest=n})();//# sourceMappingURL=index.min.js.map