(()=>{var e=Boolean("undefined"!=typeof process&&process.versions&&process.versions.node),n=class{constructor(e,n,o,t,s,i,r,l,c,d,p,a){this.tag=e,this.props=n,this.children=o,this.dom=t,this.isSVG=s,this.oldChildComponents=i,this.childComponents=r,this.hasKeys=l,this.oncreate=c,this.oncleanup=d,this.onupdate=p,this.onremove=a}},o=e=>Boolean(e&&"object"==typeof e&&"view"in e),t=e=>Boolean("function"==typeof e||o(e)),s=e=>e instanceof n,i=e=>s(e)&&t(e.tag);function r(e,o,...t){return new n(e,o,t)}function l(e){if(3===e.nodeType)return e.nodeValue;if(1===e.nodeType){const o=e.nodeName.toLowerCase(),t={},s=[];for(let n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];if(3===o.nodeType)s.push(o.nodeValue);else if(1===o.nodeType){const e=l(o);s.push(e)}}const i=e.attributes;for(let e=0,n=i.length;e<n;e++){const n=i[e];t[n.nodeName]=n.nodeValue}const r=new n(o,t,s);return r.dom=e,e.vnode=r,r.isSVG="svg"===o,r}}function c(e){const n=document.createElement("div");return n.innerHTML=e.trim(),Array.from(n.childNodes).map(l)}r.fragment=(e,...n)=>n;var d=null,p=null,a=!1,u={oldVnode:null,vnode:null,component:null,event:null},f=new Set(["key","state","v-keep","v-text","v-if","v-for","v-show","v-class","v-html","v-model","v-create","v-update","v-cleanup","v-remove"]),m=Symbol.for("valyrian.subtreeLifecycle");function v(e){let n=e;for(;n&&1===n.nodeType&&!n[m];)n[m]=!0,n=n.parentElement}function h(e,n,o){o[n]=o[n]||new Set,o.dom&&v(o.dom),o[n].add(()=>{const n=e();"function"==typeof n&&(o.oncleanup=o.oncleanup||new Set,o.oncleanup.add(n),o.dom&&v(o.dom))})}function y(){if(!u.vnode)throw new Error("This function must be called inside a component")}var g=e=>{if(e){for(const n of e)n();e.clear()}};function C(e,n){const o=e.childNodes;for(let e=0;e<o.length;e++){const t=o[e];t&&1===t.nodeType&&C(t,n)}const t=e.vnode;t&&n.push(t)}function V(e){const n=[];C(e,n);for(let e=0;e<n.length;e++)g(n[e].oncleanup)}function w(e){const n=[];C(e,n);for(let e=0;e<n.length;e++)g(n[e].onremove)}function S(e){e&&1===e.nodeType&&(e[m]?(V(e),e.remove(),w(e)):e.remove())}function b(e,n,o){o&&1===o.nodeType&&o[m]&&V(o),e.replaceChild(n,o),o&&1===o.nodeType&&o[m]&&w(o)}var N={"v-create":(e,n,o)=>{o||h(()=>e(n),"oncreate",n)},"v-update":(e,n,o)=>{o&&h(()=>e(n,o),"onupdate",n)},"v-cleanup":(e,n)=>{n.oncleanup=n.oncleanup||new Set,n.oncleanup.add(()=>e(n)),v(n.dom)},"v-remove":(e,n)=>{n.onremove=n.onremove||new Set,n.onremove.add(()=>e(n)),v(n.dom)},"v-show":(e,n)=>{const o=Boolean(e);n.dom.style.display=o?"":"none"},"v-html":(e,n)=>{n.children=c(e)},"v-model":(e,n)=>{if("name"in n.props==!1)return;let o;const t=n.props.name;let s="oninput",i=n=>e[t]=n.target.value;if("input"===n.tag)switch(n.props.type){case"checkbox":Array.isArray(e[t])?(i=n=>{const o=n.target.value,s=e[t].indexOf(o);-1===s?e[t].push(o):e[t].splice(s,1)},o=-1!==e[t].indexOf(n.dom.value)):"value"in n.props?(i=()=>{e[t]===n.props.value?e[t]=null:e[t]=n.props.value},o=e[t]===n.props.value):(i=()=>e[t]=!e[t],o=e[t]),G("checked",o,n);break;case"radio":G("checked",e[t]===n.dom.value,n);break;default:G("value",e[t],n)}else"select"===n.tag?(s="onclick",n.props.multiple?(i=n=>{const o=n.target.value;if(n.ctrlKey){const n=e[t].indexOf(o);-1===n?e[t].push(o):e[t].splice(n,1)}else e[t].splice(0,e[t].length),e[t].push(o)},n.children.forEach(n=>{if("option"===n.tag){const o="value"in n.props?n.props.value:n.children.join("").trim();n.props.selected=-1!==e[t].indexOf(o)}})):n.children.forEach(n=>{if("option"===n.tag){const o="value"in n.props?n.props.value:n.children.join("").trim();n.props.selected=o===e[t]}})):"textarea"===n.tag&&(n.children=[e[t]]);const r=n.props[s];G(s,e=>{i(e),r&&r(e)},n)},"v-class":(e,n)=>{if("string"==typeof e)n.dom.className=e;else if(Array.isArray(e))n.dom.className=e.join(" ");else if("object"==typeof e){const o=n.dom.classList;for(const n in e){const t="function"==typeof e[n]?e[n]():e[n];o.toggle(n,t)}}},class(e,n){if(n.dom.className!==e){if(n.isSVG)return void n.dom.setAttribute("class",e);n.dom.className=e}},className(e,n){N.class(e,n)},id:(e,n)=>{if(n.dom.id!==e){if(n.isSVG)return void n.dom.setAttribute("id",e);n.dom.id=e}},style:(e,n)=>{if("string"==typeof e){if(n.isSVG)return void n.dom.setAttribute("style",e);n.dom.style=e}else if("object"==typeof e){n.isSVG?n.dom.setAttribute("style",""):n.dom.style="";const o=n.dom.style;for(const n in e)o[n]=e[n]}}};var T,x=new Set;function k(e){u.event=e;let n=e.target;const o=`on${e.type}`;for(;n;){const t=n.vnode;if(t&&t.props[o]){try{t.props[o](e,t)}finally{u.event=null}return void(e.defaultPrevented||P())}n=n.parentNode}u.event=null}function A(e,n,o){const t=o.dom;"function"!=typeof n?o.isSVG||!(e in t)?!1===n?t.removeAttribute(e):t.setAttribute(e,n):t[e]=n:x.has(e)||(p.dom.addEventListener(e.slice(2),k),x.add(e))}function G(e,n,o){f.has(e)||(o.props[e]=n,A(e,n,o))}function E(e,n){const o=e.dom,t=e.props;if(o.vnode=e,n)for(const s in n.props)s in t!=!1||x.has(s)||f.has(s)||(!e.isSVG&&s in o?o[s]=null:o.removeAttribute(s));for(const o in t)if(N[o]){if(!1===N[o](t[o],e,n?.props))break}else f.has(o)||A(o,t[o],e)}function L(e,n){return n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}function K(e){let t=[];const s=e.children;if(e.hasKeys=!1,"v-for"in e.props==!1)for(let e=s.length-1;e>=0;e--)t.push(s[e]);else{t=[];const n=e.props["v-for"],o=e.children[0];if("function"!=typeof o)return console.warn("v-for directive must have a callback function as children"),t;const s=[];for(let e=0;e<n.length;e++)s.push(o(n[e],e));for(let e=s.length-1;e>=0;e--)t.push(s[e])}e.oldChildComponents=e.childComponents,e.childComponents&&(e.childComponents=new Set);const i=[];for(;t.length;){const s=t.pop();if(null!=s)if(Array.isArray(s))for(let e=s.length-1;e>=0;e--)t.push(s[e]);else if(s instanceof n){if(s.props=s.props||{},"v-if"in s.props&&!Boolean(s.props["v-if"]))continue;if(s.isSVG=e.isSVG||"svg"===s.tag,"string"!=typeof s.tag){const n=u.component=s.tag;e.childComponents=e.childComponents||new Set,e.childComponents.add(n),t.push((o(n)?n.view:n).bind(n)(s.props,s.children));continue}e.hasKeys=e.hasKeys||"key"in s.props,i.push(s)}else i.push(s)}return i}function j(e,o,t){if(t?(e.dom=L(e.tag,e.isSVG),b(o.dom,e.dom,t)):e.dom=o.dom.appendChild(L(e.tag,e.isSVG)),E(e),"v-text"in e.props)return e.dom.textContent=e.props["v-text"],void g(e.oncreate);u.oldVnode=null,u.vnode=e;const s=K(e);if(0===s.length)return e.dom.textContent="",void g(e.oncreate);for(let o=0,t=s.length;o<t;o++)s[o]instanceof n!=!1?j(s[o],e):e.dom.appendChild(document.createTextNode(s[o]));g(e.oncreate)}function O(e,o){u.oldVnode=o,u.vnode=e;const t=K(e),s=e.dom;if(0===t.length){if(s.childNodes.length){const e=Array.from(s.childNodes);for(let n=e.length-1;n>=0;n--){const o=e[n];o&&1===o.nodeType?S(o):o?.remove?.()}}return g(e.oncreate),void g(e.onupdate)}const i=s.childNodes,r=i.length,l=t.length;if(0===r){for(let o=0;o<l;o++){const i=t[o];i instanceof n!=!1?j(i,e):s.appendChild(document.createTextNode(i))}return void g(e.oncreate)}let c=i;const d={};if(e.hasKeys){const e=[];for(let n=0,o=c.length;n<o;n++){e[n]=c[n];const o=c[n].vnode;d[o&&"key"in o.props!=!1?o.props.key:n]=n}c=e}for(let o=0,r=t.length;o<r;o++){const r=t[o];if(r instanceof n==!1){const e=c[o];if(!e){s.appendChild(document.createTextNode(r));continue}if(3!==e.nodeType){b(s,document.createTextNode(r),e);continue}e.nodeValue!=r&&(e.nodeValue=r);continue}const l=c[e.hasKeys?d[r.props.key||o]:o];if(!l||r.tag!==l.nodeName.toLowerCase()){j(r,e,i[o]);continue}r.dom=l;const p=i[o],a=l.vnode;if(p?p!==l&&s.replaceChild(l,p):s.appendChild(l),"v-keep"in r.props&&a){if(a.props["v-keep"]===r.props["v-keep"])continue;const e=i[o+1]?.vnode?.props;if(e&&"key"in e==!1&&e["v-keep"]===r.props["v-keep"]){S(l),c.splice(o,1);continue}}E(r,a),"v-text"in r.props?l.textContent!=r.props["v-text"]&&(l.textContent=r.props["v-text"]):(g(a?.oncleanup),O(r,a||null))}for(let e=i.length,n=t.length;e>n;e--){const n=i[e-1];n&&1===n.nodeType?S(n):n?.remove()}g(e.oncreate),g(e.onupdate)}function B(e,n=!0){e.props=e.props||{},n&&g(e.oncleanup);const o=e.onremove?new Set(e.onremove):null;u.vnode=e,O(e,n?e:null),g(o),a=!0,u.oldVnode=null,u.vnode=null,u.component=null}function P(){return p&&(p.children=[d],B(p,a),e)?p.dom.innerHTML:""}var q=e?P:()=>requestAnimationFrame(P);var D={Vnode:n,createElement:L,current:u,debouncedUpdate:function(e=42){u.event&&u.event.preventDefault(),clearTimeout(T),T=setTimeout(q,e)},directive:function(e,n){const o=`v-${e}`;N[o]=n,f.add(o)},directives:N,hidrateDomToVnode:l,isComponent:t,isNodeJs:e,isPOJOComponent:o,isVnode:s,isVnodeComponent:i,mount:function(n,o){const s="string"==typeof n?e?L(n,"svg"===n):document.querySelector(n):n;return d=t(o)?r(o,{},[]):i(o)?o:r(()=>o,{},[]),p=l(s),P()},onCleanup:e=>{y(),h(e,"oncleanup",u.vnode)},onCreate:e=>{y();const n=u.vnode,o=u.component;n.oldChildComponents&&n.oldChildComponents.has(o)||h(e,"oncreate",n)},onRemove:e=>{y();const n=u.vnode,o=u.component;let t=!1;h(function(){n.childComponents&&n.childComponents.has(o)||t||(t=!0,e())},"onremove",u.vnode)},onUpdate:e=>{y();const n=u.vnode,o=u.component;n.childComponents&&n.childComponents.has(o)&&h(e,"onupdate",u.vnode)},reservedProps:f,setAttribute:G,setPropNameReserved:function(e){f.add(e)},trust:c,unmount:function(){if(p){d=r(()=>null,{});const e=P();for(const e of x)p.dom.removeEventListener(e.slice(2),k);return x.clear(),d=null,p=null,a=!1,u.vnode=null,u.component=null,u.event=null,e}return""},update:P,updateAttributes:E,updateVnode:B,v:r};"undefined"!=typeof module?module.exports=D:self.Valyrian=D})();//# sourceMappingURL=index.min.js.map