{
  "version": 3,
  "sources": ["../../lib/query/index.ts"],
  "sourcesContent": ["import { createNativeStore, StorageType } from \"valyrian.js/native-store\";\n\nexport type QueryKey = Array<string | number | boolean | Record<string, unknown>>;\nexport type QueryStatus = \"idle\" | \"loading\" | \"success\" | \"error\";\n\nexport type QueryState<TData> = {\n  status: QueryStatus;\n  loading: boolean;\n  success: boolean;\n  error: unknown;\n  data: TData | null;\n  updatedAt: number;\n};\n\nexport type QueryConfig<TData> = {\n  key: QueryKey;\n  fetcher: () => Promise<TData> | TData;\n  staleTime?: number;\n};\n\nexport type MutationConfig<TPayload, TResult> = {\n  execute: (payload: TPayload) => Promise<TResult> | TResult;\n  onSuccess?: (result: TResult) => void;\n  onError?: (error: unknown) => void;\n};\n\nexport type QueryClientOptions = {\n  staleTime?: number;\n  cacheTime?: number;\n  persist?: boolean;\n  persistId?: string;\n};\n\nexport type QueryChangeEvent = {\n  type: string;\n  key?: QueryKey;\n  payload?: unknown;\n  state?: QueryState<unknown>;\n};\n\ntype CacheEntry<TData> = {\n  key: QueryKey;\n  hash: string;\n  state: QueryState<TData>;\n  fetcher: () => Promise<TData> | TData;\n  staleTime: number;\n  promise: Promise<TData | null> | null;\n  gcTimer: ReturnType<typeof setTimeout> | null;\n};\n\ntype PersistedCacheEntry = {\n  key: QueryKey;\n  state: Partial<QueryState<unknown>>;\n  staleTime?: number;\n};\n\nfunction hashKey(key: QueryKey) {\n  return JSON.stringify(key);\n}\n\nfunction keyStartsWith(key: QueryKey, partial: QueryKey) {\n  if (partial.length > key.length) {\n    return false;\n  }\n\n  for (let i = 0; i < partial.length; i++) {\n    if (JSON.stringify(key[i]) !== JSON.stringify(partial[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction cloneState<TData>(state: QueryState<TData>): Readonly<QueryState<TData>> {\n  return Object.freeze({ ...state });\n}\n\nfunction isQueryStatus(value: unknown): value is QueryStatus {\n  return value === \"idle\" || value === \"loading\" || value === \"success\" || value === \"error\";\n}\n\nfunction normalizePersistedState(state: unknown): QueryState<unknown> {\n  const source = state && typeof state === \"object\" ? (state as Partial<QueryState<unknown>>) : {};\n  const hasError = source.error !== null && typeof source.error !== \"undefined\";\n  const status = isQueryStatus(source.status)\n    ? source.status === \"loading\"\n      ? \"idle\"\n      : source.status\n    : source.success\n      ? \"success\"\n      : hasError\n        ? \"error\"\n        : \"idle\";\n\n  return {\n    status,\n    loading: false,\n    success: status === \"success\",\n    error: status === \"error\" ? source.error ?? null : null,\n    data: \"data\" in source ? source.data ?? null : null,\n    updatedAt: typeof source.updatedAt === \"number\" ? source.updatedAt : 0\n  };\n}\n\nexport class QueryHandle<TData> {\n  #entry: CacheEntry<TData>;\n  #fetch: () => Promise<TData | null>;\n  #invalidate: () => void;\n\n  constructor(entry: CacheEntry<TData>, fetch: () => Promise<TData | null>, invalidate: () => void) {\n    this.#entry = entry;\n    this.#fetch = fetch;\n    this.#invalidate = invalidate;\n  }\n\n  get key() {\n    return this.#entry.key;\n  }\n\n  get state() {\n    return cloneState(this.#entry.state);\n  }\n\n  get data() {\n    return this.#entry.state.data;\n  }\n\n  fetch() {\n    return this.#fetch();\n  }\n\n  invalidate() {\n    this.#invalidate();\n  }\n}\n\nexport class MutationHandle<TPayload, TResult> {\n  #state: QueryState<TResult>;\n  #execute: (payload: TPayload) => Promise<TResult>;\n  #reset: () => void;\n\n  constructor(\n    state: QueryState<TResult>,\n    execute: (payload: TPayload) => Promise<TResult>,\n    reset: () => void\n  ) {\n    this.#state = state;\n    this.#execute = execute;\n    this.#reset = reset;\n  }\n\n  get state() {\n    return cloneState(this.#state);\n  }\n\n  execute(payload: TPayload) {\n    return this.#execute(payload);\n  }\n\n  reset() {\n    this.#reset();\n  }\n}\n\nexport class QueryClient {\n  #staleTimeDefault: number;\n  #cacheTime: number;\n  #cache = new Map<string, CacheEntry<unknown>>();\n  #listeners = new Set<(event: QueryChangeEvent) => void>();\n  #persistStore;\n\n  constructor(options: QueryClientOptions = {}) {\n    this.#staleTimeDefault = options.staleTime ?? 60000;\n    this.#cacheTime = options.cacheTime ?? 600000;\n\n    this.#persistStore = options.persist\n      ? createNativeStore(options.persistId || \"valyrian-query\", {}, StorageType.Local, true)\n      : null;\n\n    this.#rehydrate();\n  }\n\n  #emit(event: QueryChangeEvent) {\n    for (const listener of this.#listeners) {\n      listener(event);\n    }\n  }\n\n  #persist() {\n    if (!this.#persistStore) {\n      return;\n    }\n\n    const snapshot = Array.from(this.#cache.values()).map((entry) => ({\n      key: entry.key,\n      hash: entry.hash,\n      state: entry.state,\n      staleTime: entry.staleTime\n    }));\n\n    this.#persistStore.set(\"cache\", snapshot);\n  }\n\n  #rehydrate() {\n    if (!this.#persistStore) {\n      return;\n    }\n\n    const snapshot = this.#persistStore.get(\"cache\");\n    if (!Array.isArray(snapshot)) {\n      return;\n    }\n\n    for (const rawEntry of snapshot) {\n      if (!rawEntry || typeof rawEntry !== \"object\") {\n        continue;\n      }\n\n      const persisted = rawEntry as Partial<PersistedCacheEntry>;\n      if (!Array.isArray(persisted.key)) {\n        continue;\n      }\n\n      const key = persisted.key as QueryKey;\n      const hash = hashKey(key);\n      const staleTime =\n        typeof persisted.staleTime === \"number\" && persisted.staleTime >= 0\n          ? persisted.staleTime\n          : this.#staleTimeDefault;\n      const state = normalizePersistedState(persisted.state);\n\n      const entry: CacheEntry<unknown> = {\n        key,\n        hash,\n        state,\n        fetcher: () => state.data,\n        staleTime,\n        promise: null,\n        gcTimer: null\n      };\n\n      this.#cache.set(hash, entry);\n      this.#scheduleGc(entry);\n    }\n  }\n\n  #scheduleGc(entry: CacheEntry<unknown>) {\n    if (entry.gcTimer) {\n      clearTimeout(entry.gcTimer);\n    }\n\n    entry.gcTimer = setTimeout(() => {\n      this.#cache.delete(entry.hash);\n      this.#emit({ type: \"gc\", key: entry.key });\n      this.#persist();\n    }, this.#cacheTime);\n  }\n\n  async #fetchEntry<TData>(entry: CacheEntry<TData>) {\n    const isFresh = Date.now() - entry.state.updatedAt < entry.staleTime;\n    if (isFresh && entry.state.success) {\n      return entry.state.data;\n    }\n\n    if (entry.promise) {\n      return entry.promise;\n    }\n\n    entry.state.status = \"loading\";\n    entry.state.loading = true;\n    entry.state.success = false;\n    entry.state.error = null;\n    this.#emit({\n      type: \"query:start\",\n      key: entry.key,\n      state: cloneState(entry.state)\n    });\n\n    const promise = Promise.resolve(entry.fetcher())\n      .then((data) => {\n        entry.state.data = data;\n        entry.state.status = \"success\";\n        entry.state.loading = false;\n        entry.state.success = true;\n        entry.state.error = null;\n        entry.state.updatedAt = Date.now();\n        this.#emit({\n          type: \"query:success\",\n          key: entry.key,\n          state: cloneState(entry.state)\n        });\n        this.#persist();\n        this.#scheduleGc(entry as unknown as CacheEntry<unknown>);\n        return data;\n      })\n      .catch((error) => {\n        entry.state.status = \"error\";\n        entry.state.loading = false;\n        entry.state.success = false;\n        entry.state.error = error;\n        this.#emit({\n          type: \"query:error\",\n          key: entry.key,\n          state: cloneState(entry.state)\n        });\n        this.#persist();\n        this.#scheduleGc(entry as unknown as CacheEntry<unknown>);\n        throw error;\n      })\n      .finally(() => {\n        entry.promise = null;\n      });\n\n    entry.promise = promise;\n    return promise;\n  }\n\n  query<TData>(config: QueryConfig<TData>) {\n    const key = config.key;\n    const hash = hashKey(key);\n    const staleTime = config.staleTime ?? this.#staleTimeDefault;\n\n    if (!this.#cache.has(hash)) {\n      const entry: CacheEntry<unknown> = {\n        key,\n        hash,\n        fetcher: config.fetcher,\n        staleTime,\n        promise: null,\n        gcTimer: null,\n        state: {\n          status: \"idle\",\n          loading: false,\n          success: false,\n          error: null,\n          data: null,\n          updatedAt: 0\n        }\n      };\n      this.#cache.set(hash, entry);\n      this.#scheduleGc(entry);\n    } else {\n      const entry = this.#cache.get(hash)! as CacheEntry<TData>;\n      entry.fetcher = config.fetcher;\n      entry.staleTime = staleTime;\n    }\n\n    const entry = this.#cache.get(hash)! as CacheEntry<TData>;\n\n    return new QueryHandle(\n      entry,\n      () => this.#fetchEntry(entry),\n      () => {\n        entry.state.updatedAt = 0;\n        this.#emit({\n          type: \"query:invalidate\",\n          key: entry.key,\n          state: cloneState(entry.state)\n        });\n      }\n    );\n  }\n\n  mutation<TPayload, TResult>(config: MutationConfig<TPayload, TResult>) {\n    const state: QueryState<TResult> = {\n      status: \"idle\",\n      loading: false,\n      success: false,\n      error: null,\n      data: null,\n      updatedAt: 0\n    };\n\n    return new MutationHandle(\n      state,\n      async (payload: TPayload) => {\n        state.status = \"loading\";\n        state.loading = true;\n        state.success = false;\n        state.error = null;\n        this.#emit({\n          type: \"mutation:start\",\n          payload,\n          state: cloneState(state)\n        });\n\n        try {\n          const result = await config.execute(payload);\n          state.status = \"success\";\n          state.loading = false;\n          state.success = true;\n          state.data = result;\n          state.updatedAt = Date.now();\n          config.onSuccess?.(result);\n          this.#emit({\n            type: \"mutation:success\",\n            payload,\n            state: cloneState(state)\n          });\n          return result;\n        } catch (error) {\n          state.status = \"error\";\n          state.loading = false;\n          state.success = false;\n          state.error = error;\n          config.onError?.(error);\n          this.#emit({\n            type: \"mutation:error\",\n            payload,\n            state: cloneState(state)\n          });\n          throw error;\n        }\n      },\n      () => {\n        state.status = \"idle\";\n        state.loading = false;\n        state.success = false;\n        state.error = null;\n        state.data = null;\n      }\n    );\n  }\n\n  invalidate(partialKey: QueryKey) {\n    for (const entry of this.#cache.values()) {\n      if (keyStartsWith(entry.key, partialKey)) {\n        entry.state.updatedAt = 0;\n        this.#emit({\n          type: \"query:invalidate\",\n          key: entry.key,\n          state: cloneState(entry.state)\n        });\n      }\n    }\n  }\n\n  clear() {\n    for (const entry of this.#cache.values()) {\n      if (entry.gcTimer) {\n        clearTimeout(entry.gcTimer);\n      }\n    }\n\n    this.#cache.clear();\n    this.#emit({ type: \"cache:clear\" });\n    this.#persist();\n  }\n\n  on(event: \"change\", callback: (event: QueryChangeEvent) => void) {\n    if (event !== \"change\") {\n      return () => undefined;\n    }\n\n    this.#listeners.add(callback);\n    return () => this.#listeners.delete(callback);\n  }\n\n  off(event: \"change\", callback: (event: QueryChangeEvent) => void) {\n    if (event !== \"change\") {\n      return;\n    }\n\n    this.#listeners.delete(callback);\n  }\n}\n"],
  "mappings": "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",
  "names": ["entry"]
}
