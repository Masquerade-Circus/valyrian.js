{
  "version": 3,
  "sources": ["../../lib/redux-devtools/index.ts"],
  "sourcesContent": ["/* eslint-disable no-console */\nimport { FluxStore } from \"valyrian.js/flux-store\";\n\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION__: any;\n  }\n}\n\ninterface DevToolsOptions {\n  name?: string;\n  [key: string]: any;\n}\n\nfunction getDevTools() {\n  const isBrowser = typeof window !== \"undefined\";\n  if (isBrowser && window.__REDUX_DEVTOOLS_EXTENSION__) {\n    return window.__REDUX_DEVTOOLS_EXTENSION__;\n  }\n  return null;\n}\n\nexport function connectFluxStore(store: FluxStore, options: DevToolsOptions = {}) {\n  const devTools = getDevTools();\n  if (!devTools) {\n    return;\n  }\n\n  const name = options.name || \"FluxStore\";\n  const dt = devTools.connect({ name, ...options });\n  dt.init(store.state);\n\n  store.on(\"commit\", (_: any, mutation: string, ...args: any[]) => {\n    dt.send({ type: mutation, payload: args }, store.state);\n  });\n\n  store.on(\"registerModule\", (_: any, namespace: string) => {\n    dt.send({ type: `[Module] Register: ${namespace}` }, store.state);\n  });\n\n  store.on(\"unregisterModule\", (_: any, namespace: string) => {\n    dt.send({ type: `[Module] Unregister: ${namespace}` }, store.state);\n  });\n}\n\nexport function connectPulseStore(store: any, options: DevToolsOptions = {}) {\n  const devTools = getDevTools();\n  if (!devTools) {\n    return;\n  }\n\n  const name = options.name || \"PulseStore\";\n  const dt = devTools.connect({ name, ...options });\n  dt.init(store.state);\n\n  if (store.on) {\n    store.on(\"pulse\", (pulse: string, args: any[]) => {\n      dt.send({ type: pulse, payload: args }, store.state);\n    });\n  }\n}\n\nexport function connectPulse(pulse: any, options: DevToolsOptions = {}) {\n  // Pulse is [read, write, runSubscribers]\n  // We can't easily hook into the write function without wrapping it.\n  // But the user asked for \"simple\" and \"using existing apis\".\n  // If we want to debug individual pulses, we might need to wrap them.\n\n  const devTools = getDevTools();\n  if (!devTools) {\n    return pulse;\n  }\n\n  const name = options.name || \"Pulse\";\n  const dt = devTools.connect({ name, ...options });\n  const [read, write, run] = pulse;\n  \n  dt.init(read());\n\n  const newWrite = (newValue: any) => {\n    write(newValue);\n    dt.send({ type: \"update\", payload: newValue }, read());\n  };\n\n  return [read, newWrite, run];\n}\n"],
  "mappings": ";AAcA,SAAS,cAAc;AACrB,QAAM,YAAY,OAAO,WAAW;AACpC,MAAI,aAAa,OAAO,8BAA8B;AACpD,WAAO,OAAO;AAAA,EAChB;AACA,SAAO;AACT;AAEO,SAAS,iBAAiB,OAAkB,UAA2B,CAAC,GAAG;AAChF,QAAM,WAAW,YAAY;AAC7B,MAAI,CAAC,UAAU;AACb;AAAA,EACF;AAEA,QAAM,OAAO,QAAQ,QAAQ;AAC7B,QAAM,KAAK,SAAS,QAAQ,EAAE,MAAM,GAAG,QAAQ,CAAC;AAChD,KAAG,KAAK,MAAM,KAAK;AAEnB,QAAM,GAAG,UAAU,CAAC,GAAQ,aAAqB,SAAgB;AAC/D,OAAG,KAAK,EAAE,MAAM,UAAU,SAAS,KAAK,GAAG,MAAM,KAAK;AAAA,EACxD,CAAC;AAED,QAAM,GAAG,kBAAkB,CAAC,GAAQ,cAAsB;AACxD,OAAG,KAAK,EAAE,MAAM,sBAAsB,SAAS,GAAG,GAAG,MAAM,KAAK;AAAA,EAClE,CAAC;AAED,QAAM,GAAG,oBAAoB,CAAC,GAAQ,cAAsB;AAC1D,OAAG,KAAK,EAAE,MAAM,wBAAwB,SAAS,GAAG,GAAG,MAAM,KAAK;AAAA,EACpE,CAAC;AACH;AAEO,SAAS,kBAAkB,OAAY,UAA2B,CAAC,GAAG;AAC3E,QAAM,WAAW,YAAY;AAC7B,MAAI,CAAC,UAAU;AACb;AAAA,EACF;AAEA,QAAM,OAAO,QAAQ,QAAQ;AAC7B,QAAM,KAAK,SAAS,QAAQ,EAAE,MAAM,GAAG,QAAQ,CAAC;AAChD,KAAG,KAAK,MAAM,KAAK;AAEnB,MAAI,MAAM,IAAI;AACZ,UAAM,GAAG,SAAS,CAAC,OAAe,SAAgB;AAChD,SAAG,KAAK,EAAE,MAAM,OAAO,SAAS,KAAK,GAAG,MAAM,KAAK;AAAA,IACrD,CAAC;AAAA,EACH;AACF;AAEO,SAAS,aAAa,OAAY,UAA2B,CAAC,GAAG;AAMtE,QAAM,WAAW,YAAY;AAC7B,MAAI,CAAC,UAAU;AACb,WAAO;AAAA,EACT;AAEA,QAAM,OAAO,QAAQ,QAAQ;AAC7B,QAAM,KAAK,SAAS,QAAQ,EAAE,MAAM,GAAG,QAAQ,CAAC;AAChD,QAAM,CAAC,MAAM,OAAO,GAAG,IAAI;AAE3B,KAAG,KAAK,KAAK,CAAC;AAEd,QAAM,WAAW,CAAC,aAAkB;AAClC,UAAM,QAAQ;AACd,OAAG,KAAK,EAAE,MAAM,UAAU,SAAS,SAAS,GAAG,KAAK,CAAC;AAAA,EACvD;AAEA,SAAO,CAAC,MAAM,UAAU,GAAG;AAC7B;",
  "names": []
}
