//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0ZXh0VGFnIiwiaXNOb2RlSnMiLCJCb29sZWFuIiwicHJvY2VzcyIsInZlcnNpb25zIiwibm9kZSIsImNyZWF0ZURvbUVsZW1lbnQiLCJ0YWciLCJpc1NWRyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRWxlbWVudCIsIlZub2RlIiwicHJvcHMiLCJjaGlsZHJlbiIsInRoaXMiLCJpc0NvbXBvbmVudCIsImNvbXBvbmVudCIsImlzVm5vZGUiLCJvYmplY3QiLCJpc1Zub2RlQ29tcG9uZW50IiwiZG9tVG9Wbm9kZSIsImRvbSIsIm5vZGVUeXBlIiwidm5vZGUiLCJub2RlVmFsdWUiLCJpIiwibCIsImNoaWxkTm9kZXMiLCJsZW5ndGgiLCJjaGlsZERvbSIsInB1c2giLCJhdHRyaWJ1dGVzIiwiYXR0ciIsIm5vZGVOYW1lIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwidHJ1c3QiLCJodG1sU3RyaW5nIiwiZGl2IiwiaW5uZXJIVE1MIiwidHJpbSIsIm1hcCIsImNhbGwiLCJpdGVtIiwibWFpbkNvbXBvbmVudCIsIm1haW5Wbm9kZSIsImlzTW91bnRlZCIsImN1cnJlbnQiLCJvbGRWbm9kZSIsImV2ZW50IiwicmVzZXJ2ZWRQcm9wcyIsImtleSIsInN0YXRlIiwib25DbGVhbnVwU2V0IiwiU2V0Iiwib25Nb3VudFNldCIsIm9uVXBkYXRlU2V0Iiwib25Vbm1vdW50U2V0Iiwib25DbGVhbnVwIiwiY2FsbGJhY2siLCJhZGQiLCJjYWxsU2V0Iiwic2V0IiwiY2xlYXIiLCJldmVudExpc3RlbmVyTmFtZXMiLCJldmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsIm5hbWUiLCJ0eXBlIiwiZGVmYXVsdFByZXZlbnRlZCIsInVwZGF0ZSIsInBhcmVudE5vZGUiLCJoaWRlRGlyZWN0aXZlIiwidGVzdCIsImJvb2wiLCJvbGRub2RlIiwibmV3ZG9tIiwiY3JlYXRlVGV4dE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJkaXJlY3RpdmVzIiwibmV3Q2hpbGRyZW4iLCJzdHlsZSIsImRpc3BsYXkiLCJjbGFzc2VzIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiaHRtbCIsIm1vZGVsIiwicHJvcGVydHkiLCJ2YWx1ZSIsImhhbmRsZXIiLCJBcnJheSIsImlzQXJyYXkiLCJ2YWwiLCJpZHgiLCJpbmRleE9mIiwic3BsaWNlIiwic2hhcmVkU2V0QXR0cmlidXRlIiwibXVsdGlwbGUiLCJjdHJsS2V5IiwiZm9yRWFjaCIsImNoaWxkIiwiam9pbiIsInNlbGVjdGVkIiwicHJldkhhbmRsZXIiLCJjbGVhbnVwIiwibmV3Vm5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwic2xpY2UiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJ1cGRhdGVBdHRyaWJ1dGVzIiwicGF0Y2giLCJ0ZXh0Q29udGVudCIsIm5ld1RyZWUiLCJvbGRUcmVlIiwib2xkVHJlZUxlbmd0aCIsIm5ld1RyZWVMZW5ndGgiLCJuZXdDaGlsZCIsInZpZXciLCJiaW5kIiwib2xkS2V5ZWRMaXN0IiwibmV3S2V5ZWRMaXN0Iiwib2xkQ2hpbGQiLCJzaG91bGRQYXRjaCIsImN1cnJlbnROb2RlIiwiYXBwZW5kQ2hpbGQiLCJkb21Ub1JlbW92ZSIsInJlbW92ZUNoaWxkIiwiaXNHcmVhdGVyVGhhbk9sZFRyZWVMZW5ndGgiLCJvbGRNYWluVm5vZGUiLCJ1bm1vdW50IiwicmVzdWx0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlJlZmxlY3QiLCJkZWxldGVQcm9wZXJ0eSIsInYiLCJ0YWdPckNvbXBvbmVudCIsImZyYWdtZW50IiwiXyIsImRpcmVjdGl2ZSIsImRpcmVjdGl2ZU5hbWUiLCJjb250YWluZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwidm5vZGVDb21wb25lbnQiXSwic291cmNlcyI6WyIuLi9saWIvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cbi8qIGVzbGludC1kaXNhYmxlIGluZGVudCAqL1xuLyogZXNsaW50LWRpc2FibGUgc29uYXJqcy9jb2duaXRpdmUtY29tcGxleGl0eSAqL1xuLyogZXNsaW50LWRpc2FibGUgY29tcGxleGl0eSAqL1xuXG5pbnRlcmZhY2UgRGVmYXVsdFJlY29yZCBleHRlbmRzIFJlY29yZDxzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2wsIGFueT4ge31cblxuLy8gVGhlIFZub2RlUHJvcGVydGllcyBpbnRlcmZhY2UgcmVwcmVzZW50cyBwcm9wZXJ0aWVzIHRoYXQgY2FuIGJlIHBhc3NlZCB0byBhIHZpcnR1YWwgbm9kZS5cbmV4cG9ydCBpbnRlcmZhY2UgVm5vZGVQcm9wZXJ0aWVzIGV4dGVuZHMgRGVmYXVsdFJlY29yZCB7XG4gIC8vIEEgdW5pcXVlIGtleSBmb3IgdGhlIHZpcnR1YWwgbm9kZSwgd2hpY2ggY2FuIGJlIGEgc3RyaW5nIG9yIGEgbnVtYmVyLlxuICAvLyBUaGlzIGlzIHVzZWZ1bCBmb3Igb3B0aW1pemluZyB1cGRhdGVzIGluIGEgbGlzdCBvZiBub2Rlcy5cbiAga2V5Pzogc3RyaW5nIHwgbnVtYmVyO1xuICAvLyBBIHN0YXRlIG9iamVjdCB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgdmlydHVhbCBub2RlLlxuICBzdGF0ZT86IGFueTtcbn1cblxuLy8gVGhlIERvbUVsZW1lbnQgaW50ZXJmYWNlIGV4dGVuZHMgdGhlIEVsZW1lbnQgaW50ZXJmYWNlIHdpdGggYW4gaW5kZXggc2lnbmF0dXJlLlxuLy8gVGhpcyBhbGxvd3MgZm9yIGFueSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gRE9NIGVsZW1lbnRzLlxuZXhwb3J0IGludGVyZmFjZSBEb21FbGVtZW50IGV4dGVuZHMgRWxlbWVudCwgRGVmYXVsdFJlY29yZCB7fVxuXG4vLyBUaGUgVm5vZGVJbnRlcmZhY2UgcmVwcmVzZW50cyBhIHZpcnR1YWwgbm9kZS4gSXQgaGFzIGEgbnVtYmVyIG9mIG9wdGlvbmFsIGZpZWxkcyxcbi8vIGluY2x1ZGluZyBhIHRhZywgcHJvcHMsIGNoaWxkcmVuLCBhbmQgYSBET00gZWxlbWVudC5cbmV4cG9ydCBpbnRlcmZhY2UgVm5vZGVJbnRlcmZhY2UgZXh0ZW5kcyBEZWZhdWx0UmVjb3JkIHtcbiAgLy8gVGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgdmlydHVhbCBub2RlLiBJdCB0YWtlcyBhIHRhZywgcHJvcHMsIGFuZCBjaGlsZHJlbiBhcyBhcmd1bWVudHMuXG4gIC8vIFRoZSB0YWcgY2FuIGJlIGEgc3RyaW5nLCBhIGNvbXBvbmVudCwgb3IgYSBQT0pPIGNvbXBvbmVudC5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIG5ldyAodGFnOiBzdHJpbmcgfCBDb21wb25lbnQgfCBQT0pPQ29tcG9uZW50LCBwcm9wczogVm5vZGVQcm9wZXJ0aWVzLCBjaGlsZHJlbjogQ2hpbGRyZW4pOiBWbm9kZUludGVyZmFjZTtcbiAgLy8gVGhlIHRhZyBmb3IgdGhlIHZpcnR1YWwgbm9kZS4gSXQgY2FuIGJlIGEgc3RyaW5nLCBhIGNvbXBvbmVudCwgb3IgYSBQT0pPIGNvbXBvbmVudC5cbiAgdGFnOiBzdHJpbmcgfCBDb21wb25lbnQgfCBQT0pPQ29tcG9uZW50O1xuICAvLyBUaGUgcHJvcHMgZm9yIHRoZSB2aXJ0dWFsIG5vZGUuXG4gIHByb3BzOiBWbm9kZVByb3BlcnRpZXM7XG4gIC8vIFRoZSBjaGlsZHJlbiBmb3IgdGhlIHZpcnR1YWwgbm9kZS5cbiAgY2hpbGRyZW46IENoaWxkcmVuO1xuICAvLyBBIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSB2aXJ0dWFsIG5vZGUgaXMgYW4gU1ZHIGVsZW1lbnQuXG4gIGlzU1ZHPzogYm9vbGVhbjtcbiAgLy8gVGhlIERPTSBlbGVtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIHZpcnR1YWwgbm9kZS5cbiAgZG9tPzogRG9tRWxlbWVudDtcbiAgLy8gQSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgdmlydHVhbCBub2RlIGhhcyBiZWVuIHByb2Nlc3NlZCBpbiB0aGUga2V5ZWQgZGlmZmluZyBhbGdvcml0aG0uXG4gIHByb2Nlc3NlZD86IGJvb2xlYW47XG59XG5cbi8vIFRoZSBWbm9kZVdpdGhEb20gaW50ZXJmYWNlIHJlcHJlc2VudHMgYSB2aXJ0dWFsIG5vZGUgdGhhdCBoYXMgYSBET00gZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggaXQuXG5leHBvcnQgaW50ZXJmYWNlIFZub2RlV2l0aERvbSBleHRlbmRzIFZub2RlSW50ZXJmYWNlIHtcbiAgZG9tOiBEb21FbGVtZW50O1xufVxuXG4vLyBUaGUgQ29tcG9uZW50IGludGVyZmFjZSByZXByZXNlbnRzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdmlydHVhbCBub2RlIG9yIGEgbGlzdCBvZiB2aXJ0dWFsIG5vZGVzLlxuLy8gSXQgY2FuIGFsc28gaGF2ZSBhZGRpdGlvbmFsIHByb3BlcnRpZXMuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudCBleHRlbmRzIERlZmF1bHRSZWNvcmQge1xuICAvLyBUaGUgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdmlydHVhbCBub2RlIG9yIGEgbGlzdCBvZiB2aXJ0dWFsIG5vZGVzLlxuICAvLyBJdCBjYW4gdGFrZSBwcm9wcyBhbmQgY2hpbGRyZW4gYXMgYXJndW1lbnRzLlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgKHByb3BzPzogVm5vZGVQcm9wZXJ0aWVzIHwgbnVsbCwgLi4uY2hpbGRyZW46IGFueVtdKTogVm5vZGVJbnRlcmZhY2UgfCBDaGlsZHJlbiB8IGFueTtcbn1cblxuLy8gVGhlIFBPSk9Db21wb25lbnQgaW50ZXJmYWNlIHJlcHJlc2VudHMgYSBcInBsYWluIG9sZCBKYXZhU2NyaXB0IG9iamVjdFwiIChQT0pPKSBjb21wb25lbnQuXG4vLyBJdCBoYXMgYSB2aWV3IGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHZpcnR1YWwgbm9kZSBvciBhIGxpc3Qgb2YgdmlydHVhbCBub2Rlcyxcbi8vIGFzIHdlbGwgYXMgb3B0aW9uYWwgcHJvcHMgYW5kIGNoaWxkcmVuLlxuLy8gSXQgY2FuIGJlIHVzZWQgYWxzbyB0byBpZGVudGlmeSBjbGFzcyBpbnN0YW5jZSBjb21wb25lbnRzLlxuZXhwb3J0IGludGVyZmFjZSBQT0pPQ29tcG9uZW50IGV4dGVuZHMgRGVmYXVsdFJlY29yZCB7XG4gIC8vIFRoZSB2aWV3IGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHZpcnR1YWwgbm9kZSBvciBhIGxpc3Qgb2YgdmlydHVhbCBub2Rlcy5cbiAgdmlldzogQ29tcG9uZW50O1xuICAvLyBUaGUgcHJvcHMgZm9yIHRoZSBjb21wb25lbnQuXG4gIHByb3BzPzogVm5vZGVQcm9wZXJ0aWVzIHwgbnVsbDtcbiAgLy8gVGhlIGNoaWxkcmVuIGZvciB0aGUgY29tcG9uZW50LlxuICBjaGlsZHJlbj86IGFueVtdO1xufVxuXG4vLyBUaGUgVm5vZGVDb21wb25lbnRJbnRlcmZhY2UgcmVwcmVzZW50cyBhIHZpcnR1YWwgbm9kZSB0aGF0IGhhcyBhIGNvbXBvbmVudCBhcyBpdHMgdGFnLlxuLy8gSXQgaGFzIHByb3BzIGFuZCBjaGlsZHJlbiwganVzdCBsaWtlIGEgcmVndWxhciB2aXJ0dWFsIG5vZGUuXG5leHBvcnQgaW50ZXJmYWNlIFZub2RlQ29tcG9uZW50SW50ZXJmYWNlIGV4dGVuZHMgVm5vZGVJbnRlcmZhY2Uge1xuICB0YWc6IENvbXBvbmVudCB8IFBPSk9Db21wb25lbnQ7XG4gIHByb3BzOiBWbm9kZVByb3BlcnRpZXM7XG4gIGNoaWxkcmVuOiBDaGlsZHJlbjtcbn1cblxuLy8gVGhlIENoaWxkcmVuIGludGVyZmFjZSByZXByZXNlbnRzIGEgbGlzdCBvZiB2aXJ0dWFsIG5vZGVzIG9yIG90aGVyIHZhbHVlcy5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hpbGRyZW4gZXh0ZW5kcyBBcnJheTxWbm9kZUludGVyZmFjZSB8IFZub2RlQ29tcG9uZW50SW50ZXJmYWNlIHwgYW55PiB7fVxuXG4vLyBUaGUgRGlyZWN0aXZlIGludGVyZmFjZSByZXByZXNlbnRzIGEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgYXBwbGllZCB0byBhIHZpcnR1YWwgbm9kZS5cbi8vIEl0IHJlY2VpdmVzIHRoZSB2YWx1ZSwgdmlydHVhbCBub2RlLCBhbmQgb2xkIHZpcnR1YWwgbm9kZSBhcyBhcmd1bWVudHMsIGFuZCBjYW4gcmV0dXJuIGEgYm9vbGVhbiB2YWx1ZS5cbi8vIElmIG9ubHkgdGhlIHZpcnR1YWwgbm9kZSBpcyBwYXNzZWQsIGl0IG1lYW5zIGl0cyB0aGUgb24gY3JlYXRlIHBoYXNlIGZvciB0aGUgdi1ub2RlLlxuLy8gSWYgdGhlIG9sZCB2aXJ0dWFsIG5vZGUgaXMgYWxzbyBwYXNzZWQsIGl0IG1lYW5zIGl0cyB0aGUgb24gdXBkYXRlIHBoYXNlIGZvciB0aGUgdi1ub2RlLlxuZXhwb3J0IGludGVyZmFjZSBEaXJlY3RpdmUge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgKHZhbHVlOiBhbnksIHZub2RlOiBWbm9kZVdpdGhEb20sIG9sZFZub2RlPzogVm5vZGVXaXRoRG9tKTogdm9pZCB8IGJvb2xlYW47XG59XG5cbi8vIFRoZSBEaXJlY3RpdmVzIGludGVyZmFjZSBpcyBhIG1hcHBpbmcgb2YgZGlyZWN0aXZlIG5hbWVzIHRvIERpcmVjdGl2ZSBmdW5jdGlvbnMuXG5leHBvcnQgaW50ZXJmYWNlIERpcmVjdGl2ZXMgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBEaXJlY3RpdmU+IHt9XG5cbi8vIFRoZSBSZXNlcnZlZFByb3BzIGludGVyZmFjZSBpcyBhIG1hcHBpbmcgb2YgcmVzZXJ2ZWQgcHJvcCBuYW1lcyB0byB0aGUgdmFsdWUgYHRydWVgLlxuLy8gVGhlc2UgcHJvcCBuYW1lcyBjYW5ub3QgYmUgdXNlZCBhcyBjdXN0b20gcHJvcCBuYW1lcy5cbmV4cG9ydCBpbnRlcmZhY2UgUmVzZXJ2ZWRQcm9wcyBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHRydWU+IHt9XG5cbi8vIFRoZSBDdXJyZW50IGludGVyZmFjZSByZXByZXNlbnRzIHRoZSBjdXJyZW50IGNvbXBvbmVudCBhbmQgdmlydHVhbCBub2RlIHRoYXQgYXJlIGJlaW5nIHByb2Nlc3NlZC5cbmV4cG9ydCBpbnRlcmZhY2UgQ3VycmVudCB7XG4gIC8vIFRoZSBjdXJyZW50IGNvbXBvbmVudC4gSXQgY2FuIGJlIGEgY29tcG9uZW50LCBhIFBPSk8gY29tcG9uZW50LCBvciBudWxsLlxuICBjb21wb25lbnQ6IENvbXBvbmVudCB8IFBPSk9Db21wb25lbnQgfCBudWxsO1xuICAvLyBUaGUgY3VycmVudCB2aXJ0dWFsIG5vZGUuIEl0IG11c3QgaGF2ZSBhIERPTSBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCBpdC5cbiAgdm5vZGU6IFZub2RlV2l0aERvbSB8IG51bGw7XG4gIC8vIFRoZSBvbGQgdmlydHVhbCBub2RlLiBJdCBtdXN0IGhhdmUgYSBET00gZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggaXQuXG4gIG9sZFZub2RlPzogVm5vZGVXaXRoRG9tIHwgbnVsbDtcbiAgLy8gVGhlIGN1cnJlbnQgZXZlbnQuIEl0IGNhbiBiZSBhbiBldmVudCBvciBudWxsLlxuICBldmVudDogRXZlbnQgfCBudWxsO1xufVxuXG4vLyBUaGUgViBmdW5jdGlvbiBpcyB0aGUgbWFpbiBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgdmlydHVhbCBub2Rlcy5cbi8vIEl0IHRha2VzIGEgdGFnIG9yIGNvbXBvbmVudCwgcHJvcHMsIGFuZCBjaGlsZHJlbiBhcyBhcmd1bWVudHMsIGFuZCByZXR1cm5zIGEgdmlydHVhbCBub2RlLlxuZXhwb3J0IGludGVyZmFjZSBWIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzLCBuby11c2UtYmVmb3JlLWRlZmluZVxuICAodGFnT3JDb21wb25lbnQ6IHN0cmluZyB8IENvbXBvbmVudCB8IFBPSk9Db21wb25lbnQsIHByb3BzOiBWbm9kZVByb3BlcnRpZXMgfCBudWxsLCAuLi5jaGlsZHJlbjogQ2hpbGRyZW4pOlxuICAgIHwgVm5vZGVJbnRlcmZhY2VcbiAgICB8IFZub2RlQ29tcG9uZW50SW50ZXJmYWNlO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMsIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gIGZyYWdtZW50KF86IGFueSwgLi4uY2hpbGRyZW46IENoaWxkcmVuKTogQ2hpbGRyZW47XG59XG5cbi8vICd0ZXh0VGFnJyBpcyBhIGNvbnN0YW50IHN0cmluZyB0aGF0IGlzIHVzZWQgdG8gcmVwcmVzZW50IHRleHQgbm9kZXMgaW4gdGhlIHZpcnR1YWwgRE9NLlxuY29uc3QgdGV4dFRhZyA9IFwiI3RleHRcIjtcblxuLy8gJ2lzTm9kZUpzJyBpcyBhIGJvb2xlYW4gdGhhdCBpcyB0cnVlIGlmIHRoZSBjb2RlIGlzIHJ1bm5pbmcgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50IGFuZCBmYWxzZSBvdGhlcndpc2UuXG4vLyBJdCBpcyBkZXRlcm1pbmVkIGJ5IGNoZWNraW5nIGlmIHRoZSAncHJvY2VzcycgZ2xvYmFsIG9iamVjdCBpcyBkZWZpbmVkIGFuZCBoYXMgYSAndmVyc2lvbnMnIHByb3BlcnR5LlxuZXhwb3J0IGNvbnN0IGlzTm9kZUpzID0gQm9vbGVhbih0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLnZlcnNpb25zICYmIHByb2Nlc3MudmVyc2lvbnMubm9kZSk7XG5cbi8vICdjcmVhdGVEb21FbGVtZW50JyBpcyBhIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIG5ldyBET00gZWxlbWVudCB3aXRoIHRoZSBzcGVjaWZpZWQgdGFnIG5hbWUuXG4vLyBJZiAnaXNTVkcnIGlzIHRydWUsIGl0IGNyZWF0ZXMgYW4gU1ZHIGVsZW1lbnQgaW5zdGVhZCBvZiBhIHJlZ3VsYXIgRE9NIGVsZW1lbnQuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRG9tRWxlbWVudCh0YWc6IHN0cmluZywgaXNTVkc6IGJvb2xlYW4gPSBmYWxzZSk6IERvbUVsZW1lbnQge1xuICByZXR1cm4gaXNTVkcgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB0YWcpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xufVxuXG4vLyAnVm5vZGUnIGlzIGEgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgdmlydHVhbCBET00gbm9kZS5cbi8vIEl0IGhhcyB0aHJlZSBwcm9wZXJ0aWVzOiAndGFnJywgJ3Byb3BzJywgYW5kICdjaGlsZHJlbicuXG4vLyAnVm5vZGUnIGlzIGV4cG9ydGVkIGFzIGFuIG9iamVjdCB3aXRoIGEgdHlwZSBvZiAnVm5vZGVJbnRlcmZhY2UnLlxuLy8gVGhlICdhcyB1bmtub3duIGFzIFZub2RlSW50ZXJmYWNlJyBpcyB1c2VkIHRvIHRlbGwgVHlwZVNjcmlwdCB0aGF0IHRoZSAnVm5vZGUnIGZ1bmN0aW9uIGhhcyB0aGUgc2FtZSB0eXBlIGFzICdWbm9kZUludGVyZmFjZScuXG5leHBvcnQgY29uc3QgVm5vZGUgPSBmdW5jdGlvbiBWbm9kZSh0aGlzOiBWbm9kZUludGVyZmFjZSwgdGFnOiBzdHJpbmcsIHByb3BzOiBWbm9kZVByb3BlcnRpZXMsIGNoaWxkcmVuOiBDaGlsZHJlbikge1xuICAvLyAndGhpcycgcmVmZXJzIHRvIHRoZSBjdXJyZW50IGluc3RhbmNlIG9mICdWbm9kZScuXG4gIHRoaXMudGFnID0gdGFnO1xuICB0aGlzLnByb3BzID0gcHJvcHM7XG4gIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbn0gYXMgdW5rbm93biBhcyBWbm9kZUludGVyZmFjZTtcblxuLy8gJ2lzQ29tcG9uZW50JyBpcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiAnY29tcG9uZW50JyBpcyBhIHZhbGlkIGNvbXBvbmVudCBhbmQgZmFsc2Ugb3RoZXJ3aXNlLlxuLy8gQSBjb21wb25lbnQgaXMgZWl0aGVyIGEgZnVuY3Rpb24gb3IgYW4gb2JqZWN0IHdpdGggYSAndmlldycgZnVuY3Rpb24uXG5leHBvcnQgZnVuY3Rpb24gaXNDb21wb25lbnQoY29tcG9uZW50OiB1bmtub3duKTogY29tcG9uZW50IGlzIENvbXBvbmVudCB7XG4gIHJldHVybiBCb29sZWFuKFxuICAgIGNvbXBvbmVudCAmJiAodHlwZW9mIGNvbXBvbmVudCA9PT0gXCJmdW5jdGlvblwiIHx8ICh0eXBlb2YgY29tcG9uZW50ID09PSBcIm9iamVjdFwiICYmIFwidmlld1wiIGluIGNvbXBvbmVudCkpXG4gICk7XG59XG5cbi8vICdpc1Zub2RlJyBpcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiAnb2JqZWN0JyBpcyBhICdWbm9kZScgaW5zdGFuY2UgYW5kIGZhbHNlIG90aGVyd2lzZS5cbmV4cG9ydCBjb25zdCBpc1Zub2RlID0gKG9iamVjdD86IHVua25vd24gfCBWbm9kZUludGVyZmFjZSk6IG9iamVjdCBpcyBWbm9kZUludGVyZmFjZSA9PiB7XG4gIC8vIFVzZSB0aGUgJ2luc3RhbmNlb2YnIG9wZXJhdG9yIHRvIGNoZWNrIGlmICdvYmplY3QnIGlzIGFuIGluc3RhbmNlIG9mICdWbm9kZScuXG4gIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBWbm9kZTtcbn07XG5cbi8vICdpc1Zub2RlQ29tcG9uZW50JyBpcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiAnb2JqZWN0JyBpcyBhICdWbm9kZScgaW5zdGFuY2Ugd2l0aCBhICd0YWcnIHByb3BlcnR5IHRoYXQgaXMgYSB2YWxpZCBjb21wb25lbnQuXG4vLyBJdCByZXR1cm5zIGZhbHNlIG90aGVyd2lzZS5cbmV4cG9ydCBjb25zdCBpc1Zub2RlQ29tcG9uZW50ID0gKG9iamVjdD86IHVua25vd24gfCBWbm9kZUNvbXBvbmVudEludGVyZmFjZSk6IG9iamVjdCBpcyBWbm9kZUNvbXBvbmVudEludGVyZmFjZSA9PiB7XG4gIC8vIENoZWNrIGlmICdvYmplY3QnIGlzIGEgJ1Zub2RlJyBpbnN0YW5jZSBhbmQgaXRzICd0YWcnIHByb3BlcnR5IGlzIGEgdmFsaWQgY29tcG9uZW50LlxuICByZXR1cm4gaXNWbm9kZShvYmplY3QpICYmIGlzQ29tcG9uZW50KG9iamVjdC50YWcpO1xufTtcblxuLy8gJ2RvbVRvVm5vZGUnIGlzIGEgZnVuY3Rpb24gdGhhdCBjb252ZXJ0cyBhIERPTSBub2RlIHRvIGEgJ1Zub2RlJyBpbnN0YW5jZS5cbmV4cG9ydCBmdW5jdGlvbiBkb21Ub1Zub2RlKGRvbTogYW55KTogVm5vZGVXaXRoRG9tIHtcbiAgLy8gSWYgdGhlIGNoaWxkIG5vZGUgaXMgYSB0ZXh0IG5vZGUsIGNyZWF0ZSBhICdWbm9kZScgaW5zdGFuY2Ugd2l0aCB0aGUgJ3RleHRUYWcnIGNvbnN0YW50IGFzIHRoZSAndGFnJyBwcm9wZXJ0eS5cbiAgLy8gU2V0IHRoZSAnZG9tJyBwcm9wZXJ0eSBvZiB0aGUgJ1Zub2RlJyBpbnN0YW5jZSB0byB0aGUgY2hpbGQgRE9NIG5vZGUuXG4gIC8vIFB1c2ggdGhlICdWbm9kZScgaW5zdGFuY2UgdG8gdGhlICdjaGlsZHJlbicgYXJyYXkuXG4gIGlmIChkb20ubm9kZVR5cGUgPT09IDMpIHtcbiAgICBjb25zdCB2bm9kZSA9IG5ldyBWbm9kZSh0ZXh0VGFnLCB7fSwgW2RvbS5ub2RlVmFsdWVdKTtcbiAgICB2bm9kZS5kb20gPSBkb207XG4gICAgcmV0dXJuIHZub2RlIGFzIFZub2RlV2l0aERvbTtcbiAgfVxuXG4gIGNvbnN0IGNoaWxkcmVuOiBWbm9kZVdpdGhEb21bXSA9IFtdO1xuICAvLyBJdGVyYXRlIHRocm91Z2ggYWxsIGNoaWxkIG5vZGVzIG9mICdkb20nLlxuICBmb3IgKGxldCBpID0gMCwgbCA9IGRvbS5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGNvbnN0IGNoaWxkRG9tID0gZG9tLmNoaWxkTm9kZXNbaV07XG4gICAgLy8gSWYgdGhlIGNoaWxkIG5vZGUgaXMgYW4gZWxlbWVudCBub2RlLCByZWN1cnNpdmVseSBjYWxsICdkb21Ub1Zub2RlJyB0byBjb252ZXJ0IGl0IHRvIGEgJ1Zub2RlJyBpbnN0YW5jZS5cbiAgICAvLyBQdXNoIHRoZSAnVm5vZGUnIGluc3RhbmNlIHRvIHRoZSAnY2hpbGRyZW4nIGFycmF5LlxuICAgIGlmIChjaGlsZERvbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGlsZERvbS5ub2RlVHlwZSA9PT0gMykge1xuICAgICAgY2hpbGRyZW4ucHVzaChkb21Ub1Zub2RlKGNoaWxkRG9tKSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcHJvcHM6IFZub2RlUHJvcGVydGllcyA9IHt9O1xuICAvLyBJdGVyYXRlIHRocm91Z2ggYWxsIGF0dHJpYnV0ZXMgb2YgJ2RvbScuXG4gIGZvciAobGV0IGkgPSAwLCBsID0gZG9tLmF0dHJpYnV0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgY29uc3QgYXR0ciA9IGRvbS5hdHRyaWJ1dGVzW2ldO1xuICAgIC8vIEFkZCB0aGUgYXR0cmlidXRlIHRvIHRoZSAncHJvcHMnIG9iamVjdCwgdXNpbmcgdGhlIGF0dHJpYnV0ZSdzIG5hbWUgYXMgdGhlIGtleSBhbmQgaXRzIHZhbHVlIGFzIHRoZSB2YWx1ZS5cbiAgICBwcm9wc1thdHRyLm5vZGVOYW1lXSA9IGF0dHIubm9kZVZhbHVlO1xuICB9XG5cbiAgLy8gQ3JlYXRlIGEgbmV3ICdWbm9kZScgaW5zdGFuY2Ugd2l0aCB0aGUgJ3RhZycgcHJvcGVydHkgc2V0IHRvIHRoZSBsb3dlcmNhc2UgdmVyc2lvbiBvZiB0aGUgRE9NIG5vZGUncyB0YWcgbmFtZS5cbiAgLy8gU2V0IHRoZSAncHJvcHMnIGFuZCAnY2hpbGRyZW4nIHByb3BlcnRpZXMgdG8gdGhlICdwcm9wcycgYW5kICdjaGlsZHJlbicgYXJyYXlzIHJlc3BlY3RpdmVseS5cbiAgLy8gU2V0IHRoZSAnZG9tJyBwcm9wZXJ0eSBvZiB0aGUgJ1Zub2RlJyBpbnN0YW5jZSB0byB0aGUgRE9NIG5vZGUuXG4gIGNvbnN0IHZub2RlID0gbmV3IFZub2RlKGRvbS50YWdOYW1lLnRvTG93ZXJDYXNlKCksIHByb3BzLCBjaGlsZHJlbik7XG4gIHZub2RlLmRvbSA9IGRvbTtcbiAgcmV0dXJuIHZub2RlIGFzIFZub2RlV2l0aERvbTtcbn1cblxuLy8gVGhpcyBmdW5jdGlvbiB0YWtlcyBpbiBhbiBIVE1MIHN0cmluZyBhbmQgY3JlYXRlcyBhIHZpcnR1YWwgbm9kZSByZXByZXNlbnRhdGlvbiBvZiBpdFxuLy8gdXNpbmcgdGhlIGBkb21Ub1Zub2RlYCBmdW5jdGlvbi4gSXQgZG9lcyB0aGlzIGJ5IGNyZWF0aW5nIGEgbmV3IGBkaXZgIGVsZW1lbnQsIHNldHRpbmdcbi8vIGl0cyBgaW5uZXJIVE1MYCB0byB0aGUgcHJvdmlkZWQgSFRNTCBzdHJpbmcsIGFuZCB0aGVuIHVzaW5nIGBtYXBgIHRvIGl0ZXJhdGUgb3ZlciB0aGVcbi8vIGBjaGlsZE5vZGVzYCBvZiB0aGUgYGRpdmAgZWxlbWVudCwgcGFzc2luZyBlYWNoIG9uZSB0byBgZG9tVG9Wbm9kZWAgdG8gY3JlYXRlIGEgdmlydHVhbFxuLy8gbm9kZSByZXByZXNlbnRhdGlvbiBvZiBpdC4gVGhlIHJlc3VsdGluZyBhcnJheSBvZiB2aXJ0dWFsIG5vZGVzIGlzIHRoZW4gcmV0dXJuZWQuXG5leHBvcnQgZnVuY3Rpb24gdHJ1c3QoaHRtbFN0cmluZzogc3RyaW5nKSB7XG4gIGNvbnN0IGRpdiA9IGNyZWF0ZURvbUVsZW1lbnQoXCJkaXZcIik7XG4gIGRpdi5pbm5lckhUTUwgPSBodG1sU3RyaW5nLnRyaW0oKTtcblxuICByZXR1cm4gW10ubWFwLmNhbGwoZGl2LmNoaWxkTm9kZXMsIChpdGVtKSA9PiBkb21Ub1Zub2RlKGl0ZW0pKTtcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi8qIE1haW4gQ29tcG9uZW50IGltcGxlbWVudGF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG4vLyBUaGVzZSB2YXJpYWJsZXMgYXJlIHVzZWQgdG8gc3RvcmUgdGhlIG1haW4gY29tcG9uZW50LCB0aGUgbWFpbiB2aXJ0dWFsIG5vZGUsIGFuZCB3aGV0aGVyXG4vLyB0aGUgbWFpbiBjb21wb25lbnQgaXMgY3VycmVudGx5IG1vdW50ZWQuXG5sZXQgbWFpbkNvbXBvbmVudDogVm5vZGVDb21wb25lbnRJbnRlcmZhY2UgfCBudWxsID0gbnVsbDtcbmxldCBtYWluVm5vZGU6IFZub2RlV2l0aERvbSB8IG51bGwgPSBudWxsO1xubGV0IGlzTW91bnRlZCA9IGZhbHNlO1xuXG4vLyBUaGlzIG9iamVjdCBpcyB1c2VkIHRvIHN0b3JlIHRoZSBjdXJyZW50IHZpcnR1YWwgbm9kZSBhbmQgY29tcG9uZW50IGJlaW5nIHJlbmRlcmVkLlxuZXhwb3J0IGNvbnN0IGN1cnJlbnQ6IEN1cnJlbnQgPSB7XG4gIHZub2RlOiBudWxsLFxuICBvbGRWbm9kZTogbnVsbCxcbiAgY29tcG9uZW50OiBudWxsLFxuICBldmVudDogbnVsbFxufTtcblxuLyogUmVzZXJ2ZWQgcHJvcHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8vIFRoaXMgb2JqZWN0IGlzIHVzZWQgdG8gc3RvcmUgdGhlIG5hbWVzIG9mIHJlc2VydmVkIHByb3BzLCB3aGljaCBhcmUgcHJvcHMgdGhhdCBhcmUgcmVzZXJ2ZWRcbi8vIGZvciBzcGVjaWFsIHB1cnBvc2VzIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgYXMgcmVndWxhciBjb21wb25lbnQgcHJvcHMuXG5leHBvcnQgY29uc3QgcmVzZXJ2ZWRQcm9wczogUmVjb3JkPHN0cmluZywgdHJ1ZT4gPSB7XG4gIGtleTogdHJ1ZSxcbiAgc3RhdGU6IHRydWUsXG4gIFwidi1rZWVwXCI6IHRydWUsXG5cbiAgLy8gQnVpbHQgaW4gZGlyZWN0aXZlc1xuICBcInYtaWZcIjogdHJ1ZSxcbiAgXCJ2LXVubGVzc1wiOiB0cnVlLFxuICBcInYtZm9yXCI6IHRydWUsXG4gIFwidi1zaG93XCI6IHRydWUsXG4gIFwidi1jbGFzc1wiOiB0cnVlLFxuICBcInYtaHRtbFwiOiB0cnVlLFxuICBcInYtbW9kZWxcIjogdHJ1ZSxcbiAgXCJ2LWNyZWF0ZVwiOiB0cnVlLFxuICBcInYtdXBkYXRlXCI6IHRydWUsXG4gIFwidi1jbGVhbnVwXCI6IHRydWVcbn07XG5cbi8qIE1vdW50aW5nLCBVcGRhdGluZywgQ2xlYW51cCBhbmQgVW5tb3VudGluZyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vLyBUaGVzZSBzZXRzIGFyZSB1c2VkIHRvIHN0b3JlIGNhbGxiYWNrcyBmb3IgdmFyaW91cyBsaWZlY3ljbGUgZXZlbnRzOiBtb3VudGluZywgdXBkYXRpbmcsXG4vLyBjbGVhbmluZyB1cCwgYW5kIHVubW91bnRpbmcuXG5jb25zdCBvbkNsZWFudXBTZXQ6IFNldDxGdW5jdGlvbj4gPSBuZXcgU2V0KCk7XG5jb25zdCBvbk1vdW50U2V0OiBTZXQ8RnVuY3Rpb24+ID0gbmV3IFNldCgpO1xuY29uc3Qgb25VcGRhdGVTZXQ6IFNldDxGdW5jdGlvbj4gPSBuZXcgU2V0KCk7XG5jb25zdCBvblVubW91bnRTZXQ6IFNldDxGdW5jdGlvbj4gPSBuZXcgU2V0KCk7XG5cbi8vIFRoZXNlIGZ1bmN0aW9ucyBhbGxvdyB1c2VycyB0byByZWdpc3RlciBjYWxsYmFja3MgZm9yIHRoZSBjb3JyZXNwb25kaW5nIGxpZmVjeWNsZSBldmVudHMuXG5leHBvcnQgZnVuY3Rpb24gb25Nb3VudChjYWxsYmFjazogRnVuY3Rpb24pIHtcbiAgaWYgKCFpc01vdW50ZWQpIHtcbiAgICBvbk1vdW50U2V0LmFkZChjYWxsYmFjayk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9uVXBkYXRlKGNhbGxiYWNrOiBGdW5jdGlvbikge1xuICBvblVwZGF0ZVNldC5hZGQoY2FsbGJhY2spO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb25DbGVhbnVwKGNhbGxiYWNrOiBGdW5jdGlvbikge1xuICBvbkNsZWFudXBTZXQuYWRkKGNhbGxiYWNrKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9uVW5tb3VudChjYWxsYmFjazogRnVuY3Rpb24pIHtcbiAgaWYgKCFpc01vdW50ZWQpIHtcbiAgICBvblVubW91bnRTZXQuYWRkKGNhbGxiYWNrKTtcbiAgfVxufVxuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY2FsbCBhbGwgdGhlIGNhbGxiYWNrcyBpbiBhIGdpdmVuIHNldC5cbmZ1bmN0aW9uIGNhbGxTZXQoc2V0OiBTZXQ8RnVuY3Rpb24+KSB7XG4gIGZvciAoY29uc3QgY2FsbGJhY2sgb2Ygc2V0KSB7XG4gICAgY2FsbGJhY2soKTtcbiAgfVxuXG4gIHNldC5jbGVhcigpO1xufVxuXG4vKiBFdmVudCBsaXN0ZW5lciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vLyBUaGlzIG9iamVjdCBzdG9yZXMgdGhlIG5hbWVzIG9mIGV2ZW50IGxpc3RlbmVycyB0aGF0IGhhdmUgYmVlbiBhZGRlZFxuY29uc3QgZXZlbnRMaXN0ZW5lck5hbWVzOiBSZWNvcmQ8c3RyaW5nLCB0cnVlPiA9IHt9O1xuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuIGFuIGV2ZW50IG9jY3Vyc1xuZnVuY3Rpb24gZXZlbnRMaXN0ZW5lcihlOiBFdmVudCkge1xuICAvLyBTZXQgdGhlIGN1cnJlbnQgZXZlbnQgdG8gdGhlIGV2ZW50IHRoYXQgb2NjdXJyZWQgc28gdGhhdCBpdCBjYW4gYmUgcHJldmVudGVkIGlmIG5lY2Vzc2FyeVxuICBjdXJyZW50LmV2ZW50ID0gZTtcblxuICAvLyBDb252ZXJ0IHRoZSB0YXJnZXQgb2YgdGhlIGV2ZW50IHRvIGEgRE9NIGVsZW1lbnRcbiAgbGV0IGRvbSA9IGUudGFyZ2V0IGFzIERvbUVsZW1lbnQ7XG5cbiAgLy8gQ3JlYXRlIHRoZSBuYW1lIG9mIHRoZSBldmVudCBsaXN0ZW5lciBieSBhZGRpbmcgXCJ2LW9uXCIgdG8gdGhlIGV2ZW50IHR5cGVcbiAgY29uc3QgbmFtZSA9IGB2LW9uJHtlLnR5cGV9YDtcblxuICAvLyBLZWVwIGdvaW5nIHVwIHRoZSBET00gdHJlZSB1bnRpbCB3ZSBmaW5kIGFuIGVsZW1lbnQgd2l0aCBhbiBldmVudCBsaXN0ZW5lclxuICAvLyBtYXRjaGluZyB0aGUgZXZlbnQgdHlwZVxuICB3aGlsZSAoZG9tKSB7XG4gICAgaWYgKGRvbVtuYW1lXSkge1xuICAgICAgLy8gQ2FsbCB0aGUgZXZlbnQgbGlzdGVuZXIgZnVuY3Rpb25cbiAgICAgIGRvbVtuYW1lXShlLCBkb20pO1xuXG4gICAgICAvLyBJZiB0aGUgZGVmYXVsdCBhY3Rpb24gb2YgdGhlIGV2ZW50IGhhc24ndCBiZWVuIHByZXZlbnRlZCwgdXBkYXRlIHRoZSBET01cbiAgICAgIGlmICghZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkb20gPSBkb20ucGFyZW50Tm9kZSBhcyBEb21FbGVtZW50O1xuICB9XG5cbiAgY3VycmVudC5ldmVudCA9IG51bGw7XG59XG5cbi8qIERpcmVjdGl2ZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIFRoaXMgZnVuY3Rpb24gY3JlYXRlcyBhIGRpcmVjdGl2ZSB0aGF0IGhpZGVzIGFuIGVsZW1lbnQgYmFzZWQgb24gYSBjb25kaXRpb25cbmNvbnN0IGhpZGVEaXJlY3RpdmUgPSAodGVzdDogYm9vbGVhbikgPT4gKGJvb2w6IGJvb2xlYW4sIHZub2RlOiBWbm9kZUludGVyZmFjZSwgb2xkbm9kZT86IFZub2RlSW50ZXJmYWNlKSA9PiB7XG4gIC8vIElmIHRlc3QgaXMgdHJ1ZSwgdXNlIHRoZSB2YWx1ZSBvZiBib29sLiBPdGhlcndpc2UsIHVzZSB0aGUgb3Bwb3NpdGUgb2YgYm9vbC5cbiAgY29uc3QgdmFsdWUgPSB0ZXN0ID8gYm9vbCA6ICFib29sO1xuXG4gIC8vIElmIHRoZSB2YWx1ZSBpcyB0cnVlLCBoaWRlIHRoZSBlbGVtZW50IGJ5IHJlcGxhY2luZyBpdCB3aXRoIGEgdGV4dCBub2RlXG4gIGlmICh2YWx1ZSkge1xuICAgIGNvbnN0IG5ld2RvbSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO1xuICAgIGlmIChvbGRub2RlICYmIG9sZG5vZGUuZG9tICYmIG9sZG5vZGUuZG9tLnBhcmVudE5vZGUpIHtcbiAgICAgIG9sZG5vZGUuZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld2RvbSwgb2xkbm9kZS5kb20pO1xuICAgIH1cbiAgICB2bm9kZS50YWcgPSBcIiN0ZXh0XCI7XG4gICAgdm5vZGUuY2hpbGRyZW4gPSBbXTtcbiAgICB2bm9kZS5wcm9wcyA9IHt9O1xuICAgIHZub2RlLmRvbSA9IG5ld2RvbSBhcyB1bmtub3duIGFzIERvbUVsZW1lbnQ7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG4vLyBUaGlzIG9iamVjdCBzdG9yZXMgYWxsIHRoZSBhdmFpbGFibGUgZGlyZWN0aXZlc1xuZXhwb3J0IGNvbnN0IGRpcmVjdGl2ZXM6IERpcmVjdGl2ZXMgPSB7XG4gIC8vIFRoZSBcInYtaWZcIiBkaXJlY3RpdmUgaGlkZXMgYW4gZWxlbWVudCBpZiB0aGUgZ2l2ZW4gY29uZGl0aW9uIGlzIGZhbHNlXG4gIFwidi1pZlwiOiBoaWRlRGlyZWN0aXZlKGZhbHNlKSxcblxuICAvLyBUaGUgXCJ2LXVubGVzc1wiIGRpcmVjdGl2ZSBoaWRlcyBhbiBlbGVtZW50IGlmIHRoZSBnaXZlbiBjb25kaXRpb24gaXMgdHJ1ZVxuICBcInYtdW5sZXNzXCI6IGhpZGVEaXJlY3RpdmUodHJ1ZSksXG5cbiAgLy8gVGhlIFwidi1mb3JcIiBkaXJlY3RpdmUgY3JlYXRlcyBhIGxvb3AgYW5kIGFwcGxpZXMgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBlYWNoIGl0ZW0gaW4gdGhlIGxvb3BcbiAgXCJ2LWZvclwiOiAoc2V0OiB1bmtub3duW10sIHZub2RlOiBWbm9kZVdpdGhEb20pID0+IHtcbiAgICBjb25zdCBuZXdDaGlsZHJlbjogVm5vZGVJbnRlcmZhY2VbXSA9IFtdO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gdm5vZGUuY2hpbGRyZW5bMF07XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBzZXQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBuZXdDaGlsZHJlbi5wdXNoKGNhbGxiYWNrKHNldFtpXSwgaSkpO1xuICAgIH1cbiAgICB2bm9kZS5jaGlsZHJlbiA9IG5ld0NoaWxkcmVuO1xuICB9LFxuXG4gIC8vIFRoZSBcInYtc2hvd1wiIGRpcmVjdGl2ZSBzaG93cyBvciBoaWRlcyBhbiBlbGVtZW50IGJ5IHNldHRpbmcgdGhlIFwiZGlzcGxheVwiIHN0eWxlIHByb3BlcnR5XG4gIFwidi1zaG93XCI6IChib29sOiBib29sZWFuLCB2bm9kZTogVm5vZGVXaXRoRG9tKSA9PiB7XG4gICAgKFxuICAgICAgdm5vZGUuZG9tIGFzIHVua25vd24gYXMge1xuICAgICAgICBzdHlsZTogeyBkaXNwbGF5OiBzdHJpbmcgfTtcbiAgICAgIH1cbiAgICApLnN0eWxlLmRpc3BsYXkgPSBib29sID8gXCJcIiA6IFwibm9uZVwiO1xuICB9LFxuXG4gIC8vIFRoZSBcInYtY2xhc3NcIiBkaXJlY3RpdmUgYWRkcyBvciByZW1vdmVzIGNsYXNzIG5hbWVzIGZyb20gYW4gZWxlbWVudCBiYXNlZCBvbiBhIGNvbmRpdGlvblxuICBcInYtY2xhc3NcIjogKGNsYXNzZXM6IHsgW3g6IHN0cmluZ106IGJvb2xlYW4gfSwgdm5vZGU6IFZub2RlV2l0aERvbSkgPT4ge1xuICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgdGhlIGNsYXNzIG5hbWVzIGluIHRoZSBjbGFzc2VzIG9iamVjdFxuICAgIGZvciAoY29uc3QgbmFtZSBpbiBjbGFzc2VzKSB7XG4gICAgICAvLyBBZGQgb3IgcmVtb3ZlIHRoZSBjbGFzcyBuYW1lIGZyb20gdGhlIGVsZW1lbnQncyBjbGFzcyBsaXN0IGJhc2VkIG9uIHRoZSB2YWx1ZSBpbiB0aGUgY2xhc3NlcyBvYmplY3RcbiAgICAgICh2bm9kZS5kb20gYXMgRG9tRWxlbWVudCkuY2xhc3NMaXN0LnRvZ2dsZShuYW1lLCBjbGFzc2VzW25hbWVdKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gVGhlIFwidi1odG1sXCIgZGlyZWN0aXZlIHNldHMgdGhlIGlubmVyIEhUTUwgb2YgYW4gZWxlbWVudCB0byB0aGUgZ2l2ZW4gSFRNTCBzdHJpbmdcbiAgXCJ2LWh0bWxcIjogKGh0bWw6IHN0cmluZywgdm5vZGU6IFZub2RlV2l0aERvbSkgPT4ge1xuICAgIC8vIFNldCB0aGUgY2hpbGRyZW4gb2YgdGhlIHZub2RlIHRvIGEgdHJ1c3RlZCB2ZXJzaW9uIG9mIHRoZSBIVE1MIHN0cmluZ1xuICAgIHZub2RlLmNoaWxkcmVuID0gW3RydXN0KGh0bWwpXTtcbiAgfSxcblxuICAvLyBUaGUgXCJ2LW1vZGVsXCIgZGlyZWN0aXZlIGJpbmRzIHRoZSB2YWx1ZSBvZiBhbiBpbnB1dCBlbGVtZW50IHRvIGEgbW9kZWwgcHJvcGVydHlcbiAgXCJ2LW1vZGVsXCI6IChbbW9kZWwsIHByb3BlcnR5LCBldmVudF06IGFueVtdLCB2bm9kZTogVm5vZGVXaXRoRG9tLCBvbGRWbm9kZT86IFZub2RlV2l0aERvbSkgPT4ge1xuICAgIGxldCB2YWx1ZTtcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHVwZGF0ZXMgdGhlIG1vZGVsIHByb3BlcnR5IHdoZW4gdGhlIGlucHV0IGVsZW1lbnQncyB2YWx1ZSBjaGFuZ2VzXG4gICAgbGV0IGhhbmRsZXIgPSAoZTogRXZlbnQpID0+IChtb2RlbFtwcm9wZXJ0eV0gPSAoZS50YXJnZXQgYXMgRG9tRWxlbWVudCAmIFJlY29yZDxzdHJpbmcsIGFueT4pLnZhbHVlKTtcbiAgICBpZiAodm5vZGUudGFnID09PSBcImlucHV0XCIpIHtcbiAgICAgIC8vIElmIHRoZSBlbGVtZW50IGlzIGFuIGlucHV0LCB1c2UgdGhlIFwiaW5wdXRcIiBldmVudCBieSBkZWZhdWx0XG4gICAgICBldmVudCA9IGV2ZW50IHx8IFwib25pbnB1dFwiO1xuICAgICAgLy8gRGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mIGlucHV0IGVsZW1lbnQsIHVzZSBhIGRpZmZlcmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgICBzd2l0Y2ggKHZub2RlLnByb3BzLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6IHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtb2RlbFtwcm9wZXJ0eV0pKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgbW9kZWwgcHJvcGVydHkgaXMgYW4gYXJyYXksIGFkZCBvciByZW1vdmUgdGhlIHZhbHVlIGZyb20gdGhlIGFycmF5IHdoZW4gdGhlIGNoZWNrYm94IGlzIGNoZWNrZWQgb3IgdW5jaGVja2VkXG4gICAgICAgICAgICBoYW5kbGVyID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbCA9IChlLnRhcmdldCBhcyBEb21FbGVtZW50ICYgUmVjb3JkPHN0cmluZywgYW55PikudmFsdWU7XG4gICAgICAgICAgICAgIGNvbnN0IGlkeCA9IG1vZGVsW3Byb3BlcnR5XS5pbmRleE9mKHZhbCk7XG4gICAgICAgICAgICAgIGlmIChpZHggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbW9kZWxbcHJvcGVydHldLnB1c2godmFsKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb2RlbFtwcm9wZXJ0eV0uc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBJZiB0aGUgdmFsdWUgaXMgaW4gdGhlIGFycmF5LCBzZXQgdGhlIGNoZWNrYm94IHRvIGJlIGNoZWNrZWRcbiAgICAgICAgICAgIHZhbHVlID0gbW9kZWxbcHJvcGVydHldLmluZGV4T2Yodm5vZGUuZG9tLnZhbHVlKSAhPT0gLTE7XG4gICAgICAgICAgfSBlbHNlIGlmIChcInZhbHVlXCIgaW4gdm5vZGUucHJvcHMpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBpbnB1dCBlbGVtZW50IGhhcyBhIFwidmFsdWVcIiBhdHRyaWJ1dGUsIHVzZSBpdCB0byBkZXRlcm1pbmUgdGhlIGNoZWNrZWQgc3RhdGVcbiAgICAgICAgICAgIGhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChtb2RlbFtwcm9wZXJ0eV0gPT09IHZub2RlLnByb3BzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbW9kZWxbcHJvcGVydHldID0gbnVsbDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb2RlbFtwcm9wZXJ0eV0gPSB2bm9kZS5wcm9wcy52YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhbHVlID0gbW9kZWxbcHJvcGVydHldID09PSB2bm9kZS5wcm9wcy52YWx1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gXCJ2YWx1ZVwiIGF0dHJpYnV0ZSwgdXNlIGEgYm9vbGVhbiB2YWx1ZSBmb3IgdGhlIG1vZGVsIHByb3BlcnR5XG4gICAgICAgICAgICBoYW5kbGVyID0gKCkgPT4gKG1vZGVsW3Byb3BlcnR5XSA9ICFtb2RlbFtwcm9wZXJ0eV0pO1xuICAgICAgICAgICAgdmFsdWUgPSBtb2RlbFtwcm9wZXJ0eV07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFNldCB0aGUgXCJjaGVja2VkXCIgYXR0cmlidXRlIG9uIHRoZSBpbnB1dCBlbGVtZW50XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgc2hhcmVkU2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCB2YWx1ZSwgdm5vZGUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJyYWRpb1wiOiB7XG4gICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaXMgYSByYWRpbyBidXR0b24sIHNldCB0aGUgXCJjaGVja2VkXCIgYXR0cmlidXRlIGJhc2VkIG9uIHRoZSB2YWx1ZSBvZiB0aGUgbW9kZWwgcHJvcGVydHlcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgICBzaGFyZWRTZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIG1vZGVsW3Byb3BlcnR5XSA9PT0gdm5vZGUuZG9tLnZhbHVlLCB2bm9kZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgIC8vIEZvciBhbGwgb3RoZXIgaW5wdXQgdHlwZXMsIHNldCB0aGUgXCJ2YWx1ZVwiIGF0dHJpYnV0ZSBiYXNlZCBvbiB0aGUgdmFsdWUgb2YgdGhlIG1vZGVsIHByb3BlcnR5XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgc2hhcmVkU2V0QXR0cmlidXRlKFwidmFsdWVcIiwgbW9kZWxbcHJvcGVydHldLCB2bm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHZub2RlLnRhZyA9PT0gXCJzZWxlY3RcIikge1xuICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaXMgYSBzZWxlY3QgZWxlbWVudCwgdXNlIHRoZSBcImNsaWNrXCIgZXZlbnQgYnkgZGVmYXVsdFxuICAgICAgZXZlbnQgPSBldmVudCB8fCBcIm9uY2xpY2tcIjtcbiAgICAgIGlmICh2bm9kZS5wcm9wcy5tdWx0aXBsZSkge1xuICAgICAgICAvLyBJZiB0aGUgc2VsZWN0IGVsZW1lbnQgYWxsb3dzIG11bHRpcGxlIHNlbGVjdGlvbnMsIHVwZGF0ZSB0aGUgbW9kZWwgcHJvcGVydHkgd2l0aCBhbiBhcnJheSBvZiBzZWxlY3RlZCB2YWx1ZXNcbiAgICAgICAgaGFuZGxlciA9IChlOiBFdmVudCAmIFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHtcbiAgICAgICAgICBjb25zdCB2YWwgPSAoZS50YXJnZXQgYXMgRG9tRWxlbWVudCAmIFJlY29yZDxzdHJpbmcsIGFueT4pLnZhbHVlO1xuICAgICAgICAgIGlmIChlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBDdHJsIGtleSBpcyBwcmVzc2VkLCBhZGQgb3IgcmVtb3ZlIHRoZSB2YWx1ZSBmcm9tIHRoZSBhcnJheVxuICAgICAgICAgICAgY29uc3QgaWR4ID0gbW9kZWxbcHJvcGVydHldLmluZGV4T2YodmFsKTtcbiAgICAgICAgICAgIGlmIChpZHggPT09IC0xKSB7XG4gICAgICAgICAgICAgIG1vZGVsW3Byb3BlcnR5XS5wdXNoKHZhbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtb2RlbFtwcm9wZXJ0eV0uc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBDdHJsIGtleSBpcyBub3QgcHJlc3NlZCwgc2V0IHRoZSBtb2RlbCBwcm9wZXJ0eSB0byBhbiBhcnJheSB3aXRoIHRoZSBzZWxlY3RlZCB2YWx1ZVxuICAgICAgICAgICAgbW9kZWxbcHJvcGVydHldLnNwbGljZSgwLCBtb2RlbFtwcm9wZXJ0eV0ubGVuZ3RoKTtcbiAgICAgICAgICAgIG1vZGVsW3Byb3BlcnR5XS5wdXNoKHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBTZXQgdGhlIFwic2VsZWN0ZWRcIiBhdHRyaWJ1dGUgb24gdGhlIG9wdGlvbnMgYmFzZWQgb24gd2hldGhlciB0aGV5IGFyZSBpbiB0aGUgbW9kZWwgcHJvcGVydHkgYXJyYXlcbiAgICAgICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQ6IFZub2RlSW50ZXJmYWNlKSA9PiB7XG4gICAgICAgICAgaWYgKGNoaWxkLnRhZyA9PT0gXCJvcHRpb25cIikge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBcInZhbHVlXCIgaW4gY2hpbGQucHJvcHMgPyBjaGlsZC5wcm9wcy52YWx1ZSA6IGNoaWxkLmNoaWxkcmVuLmpvaW4oXCJcIikudHJpbSgpO1xuICAgICAgICAgICAgY2hpbGQucHJvcHMuc2VsZWN0ZWQgPSBtb2RlbFtwcm9wZXJ0eV0uaW5kZXhPZih2YWx1ZSkgIT09IC0xO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiB0aGUgc2VsZWN0IGVsZW1lbnQgZG9lcyBub3QgYWxsb3cgbXVsdGlwbGUgc2VsZWN0aW9ucywgc2V0IHRoZSBcInNlbGVjdGVkXCIgYXR0cmlidXRlIG9uIHRoZSBvcHRpb25zIGJhc2VkIG9uIHRoZSB2YWx1ZSBvZiB0aGUgbW9kZWwgcHJvcGVydHlcbiAgICAgICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQ6IFZub2RlSW50ZXJmYWNlKSA9PiB7XG4gICAgICAgICAgaWYgKGNoaWxkLnRhZyA9PT0gXCJvcHRpb25cIikge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBcInZhbHVlXCIgaW4gY2hpbGQucHJvcHMgPyBjaGlsZC5wcm9wcy52YWx1ZSA6IGNoaWxkLmNoaWxkcmVuLmpvaW4oXCJcIikudHJpbSgpO1xuICAgICAgICAgICAgY2hpbGQucHJvcHMuc2VsZWN0ZWQgPSB2YWx1ZSA9PT0gbW9kZWxbcHJvcGVydHldO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh2bm9kZS50YWcgPT09IFwidGV4dGFyZWFcIikge1xuICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaXMgYSB0ZXh0YXJlYSwgdXNlIHRoZSBcImlucHV0XCIgZXZlbnQgYnkgZGVmYXVsdFxuICAgICAgZXZlbnQgPSBldmVudCB8fCBcIm9uaW5wdXRcIjtcbiAgICAgIC8vIFNldCB0aGUgdGV4dGFyZWEncyBjb250ZW50IHRvIHRoZSB2YWx1ZSBvZiB0aGUgbW9kZWwgcHJvcGVydHlcbiAgICAgIHZub2RlLmNoaWxkcmVuID0gW21vZGVsW3Byb3BlcnR5XV07XG4gICAgfVxuXG4gICAgLy8gV2UgYXNzdW1lIHRoYXQgdGhlIHByZXYgaGFuZGxlciBpZiBhbnkgd2lsbCBub3QgYmUgY2hhbmdlZCBieSB0aGUgdXNlciBhY3Jvc3MgcGF0Y2hzXG4gICAgY29uc3QgcHJldkhhbmRsZXIgPSB2bm9kZS5wcm9wc1tldmVudF07XG5cbiAgICAvLyBTZXQgdGhlIGV2ZW50IGhhbmRsZXIgb24gdGhlIGVsZW1lbnRcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICBzaGFyZWRTZXRBdHRyaWJ1dGUoXG4gICAgICBldmVudCxcbiAgICAgIChlOiBFdmVudCkgPT4ge1xuICAgICAgICBoYW5kbGVyKGUpO1xuXG4gICAgICAgIC8vIElmIHRoZSBwcmV2aW91cyBoYW5kbGVyIGlzIGRlZmluZWQsIGNhbGwgaXQgYWZ0ZXIgdGhlIG1vZGVsIGhhcyBiZWVuIHVwZGF0ZWRcbiAgICAgICAgaWYgKHByZXZIYW5kbGVyKSB7XG4gICAgICAgICAgcHJldkhhbmRsZXIoZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB2bm9kZSxcbiAgICAgIG9sZFZub2RlXG4gICAgKTtcbiAgfSxcblxuICAvLyBUaGUgXCJ2LWNyZWF0ZVwiIGRpcmVjdGl2ZSBpcyBjYWxsZWQgd2hlbiBhIG5ldyB2aXJ0dWFsIG5vZGUgaXMgY3JlYXRlZC5cbiAgLy8gVGhlIHByb3ZpZGVkIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIHRoZSBuZXcgdmlydHVhbCBub2RlIGFzIGFuIGFyZ3VtZW50LlxuICAvLyBUaGlzIGRpcmVjdGl2ZSBpcyBvbmx5IGNhbGxlZCBvbmNlIHBlciB2aXJ0dWFsIG5vZGUsIHdoZW4gaXQgaXMgZmlyc3QgY3JlYXRlZC5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIFwidi1jcmVhdGVcIjogKGNhbGxiYWNrOiAodm5vZGU6IFZub2RlV2l0aERvbSkgPT4gdm9pZCwgdm5vZGU6IFZub2RlV2l0aERvbSwgb2xkVm5vZGU/OiBWbm9kZVdpdGhEb20pID0+IHtcbiAgICAvLyBJZiB0aGlzIGlzIG5vdCBhbiB1cGRhdGUsIGNhbGwgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGggdGhlIG5ldyB2aXJ0dWFsIG5vZGVcbiAgICBpZiAoIW9sZFZub2RlKSB7XG4gICAgICBjb25zdCBjbGVhbnVwID0gY2FsbGJhY2sodm5vZGUpO1xuXG4gICAgICAvLyBJZiB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gcmV0dXJucyBhIGZ1bmN0aW9uLCBjYWxsIGl0IHdoZW4gdGhlIHVwZGF0ZSBpcyBnb25uYSBiZSBjbGVhbmVkIHVwXG4gICAgICBpZiAodHlwZW9mIGNsZWFudXAgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBvbkNsZWFudXAoY2xlYW51cCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8vIFRoZSBcInYtdXBkYXRlXCIgZGlyZWN0aXZlIGlzIGNhbGxlZCB3aGVuIGFuIGV4aXN0aW5nIHZpcnR1YWwgbm9kZSBpcyB1cGRhdGVkLlxuICAvLyBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIG5ldyBhbmQgb2xkIHZpcnR1YWwgbm9kZXMgYXMgYXJndW1lbnRzLlxuICAvLyBUaGlzIGRpcmVjdGl2ZSBpcyBvbmx5IGNhbGxlZCBvbmNlIHBlciB2aXJ0dWFsIG5vZGUgdXBkYXRlLlxuICBcInYtdXBkYXRlXCI6IChcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICBjYWxsYmFjazogKHZub2RlOiBWbm9kZVdpdGhEb20sIG9sZFZub2RlOiBWbm9kZVdpdGhEb20pID0+IHZvaWQsXG4gICAgdm5vZGU6IFZub2RlV2l0aERvbSxcbiAgICBvbGRWbm9kZT86IFZub2RlV2l0aERvbVxuICApID0+IHtcbiAgICAvLyBJZiB0aGlzIGlzIGFuIHVwZGF0ZSwgY2FsbCB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gd2l0aCB0aGUgbmV3IGFuZCBvbGQgdmlydHVhbCBub2Rlc1xuICAgIGlmIChvbGRWbm9kZSkge1xuICAgICAgY29uc3QgY2xlYW51cCA9IGNhbGxiYWNrKHZub2RlLCBvbGRWbm9kZSk7XG5cbiAgICAgIC8vIElmIHRoZSBjYWxsYmFjayBmdW5jdGlvbiByZXR1cm5zIGEgZnVuY3Rpb24sIGNhbGwgaXQgd2hlbiB0aGUgdXBkYXRlIGlzIGdvbm5hIGJlIGNsZWFuZWQgdXBcbiAgICAgIGlmICh0eXBlb2YgY2xlYW51cCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIG9uQ2xlYW51cChjbGVhbnVwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLy8gVGhlIFwidi1jbGVhbnVwXCIgZGlyZWN0aXZlIGlzIGNhbGxlZCB3aGVuIHRoZSB1cGRhdGUgaXMgY2xlYW5lZCB1cC5cbiAgLy8gVGhlIHByb3ZpZGVkIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIHRoZSBvbGQgdmlydHVhbCBub2RlIGFzIGFuIGFyZ3VtZW50LlxuICAvLyBUaGlzIGRpcmVjdGl2ZSBpcyBvbmx5IGNhbGxlZCBvbmNlIHBlciB2aXJ0dWFsIG5vZGUsIHdoZW4gdGhlIHVwZGF0ZSBpcyBjbGVhbmVkIHVwLlxuICBcInYtY2xlYW51cFwiOiAoXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgY2FsbGJhY2s6ICh2bm9kZTogVm5vZGVXaXRoRG9tLCBvbGRWbm9kZT86IFZub2RlV2l0aERvbSkgPT4gdm9pZCxcbiAgICB2bm9kZTogVm5vZGVXaXRoRG9tLFxuICAgIG9sZFZub2RlPzogVm5vZGVXaXRoRG9tXG4gICkgPT4ge1xuICAgIC8vIEFkZCB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gdG8gdGhlIGxpc3Qgb2YgY2xlYW51cCBmdW5jdGlvbnMgdG8gYmUgY2FsbGVkIHdoZW4gdGhlIHVwZGF0ZSBpcyBjbGVhbmVkIHVwXG4gICAgb25DbGVhbnVwKCgpID0+IGNhbGxiYWNrKHZub2RlLCBvbGRWbm9kZSkpO1xuICB9XG59O1xuLy8gQWRkIGEgZGlyZWN0aXZlIHRvIHRoZSBnbG9iYWwgZGlyZWN0aXZlcyBvYmplY3QsIHdpdGggdGhlIGtleSBiZWluZyB0aGUgbmFtZVxuLy8gcHJlY2VkZWQgYnkgXCJ2LVwiLiBBbHNvIGFkZCB0aGUgbmFtZSB0byB0aGUgZ2xvYmFsIHJlc2VydmVkUHJvcHMgb2JqZWN0LlxuZXhwb3J0IGZ1bmN0aW9uIGRpcmVjdGl2ZShuYW1lOiBzdHJpbmcsIGRpcmVjdGl2ZTogRGlyZWN0aXZlKSB7XG4gIGNvbnN0IGRpcmVjdGl2ZU5hbWUgPSBgdi0ke25hbWV9YDtcbiAgZGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXSA9IGRpcmVjdGl2ZTtcbiAgcmVzZXJ2ZWRQcm9wc1tkaXJlY3RpdmVOYW1lXSA9IHRydWU7XG59XG5cbi8vIFNldCBhbiBhdHRyaWJ1dGUgb24gYSB2aXJ0dWFsIERPTSBub2RlIGFuZCB1cGRhdGUgdGhlIGFjdHVhbCBET00gZWxlbWVudC5cbi8vIElmIHRoZSBhdHRyaWJ1dGUgdmFsdWUgaXMgYSBmdW5jdGlvbiwgYWRkIGFuIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgYXR0cmlidXRlXG4vLyBuYW1lIHRvIHRoZSBET00gZWxlbWVudCByZXByZXNlbnRlZCBieSBtYWluVm5vZGUuXG4vLyBJZiBvbGRWbm9kZSBpcyBwcm92aWRlZCwgY29tcGFyZSB0aGUgbmV3IGF0dHJpYnV0ZSB2YWx1ZSB0byB0aGUgb2xkIHZhbHVlXG4vLyBhbmQgb25seSB1cGRhdGUgdGhlIGF0dHJpYnV0ZSBpZiB0aGUgdmFsdWVzIGFyZSBkaWZmZXJlbnQuXG5mdW5jdGlvbiBzaGFyZWRTZXRBdHRyaWJ1dGUobmFtZTogc3RyaW5nLCB2YWx1ZTogYW55LCBuZXdWbm9kZTogVm5vZGVXaXRoRG9tLCBvbGRWbm9kZT86IFZub2RlV2l0aERvbSk6IHZvaWQgfCBib29sZWFuIHtcbiAgLy8gSWYgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBhZGQgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBhdHRyaWJ1dGVcbiAgLy8gbmFtZSB0byB0aGUgRE9NIGVsZW1lbnQgcmVwcmVzZW50ZWQgYnkgbWFpblZub2RlLlxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAvLyBPbmx5IGFkZCB0aGUgZXZlbnQgbGlzdGVuZXIgaWYgaXQgaGFzbid0IGJlZW4gYWRkZWQgeWV0LlxuICAgIGlmIChuYW1lIGluIGV2ZW50TGlzdGVuZXJOYW1lcyA9PT0gZmFsc2UpIHtcbiAgICAgIChtYWluVm5vZGUgYXMgVm5vZGVXaXRoRG9tKS5kb20uYWRkRXZlbnRMaXN0ZW5lcihuYW1lLnNsaWNlKDIpLCBldmVudExpc3RlbmVyKTtcbiAgICAgIGV2ZW50TGlzdGVuZXJOYW1lc1tuYW1lXSA9IHRydWU7XG4gICAgfVxuICAgIG5ld1Zub2RlLmRvbVtgdi0ke25hbWV9YF0gPSB2YWx1ZTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiB0aGUgYXR0cmlidXRlIGlzIHByZXNlbnQgb24gdGhlIERPTSBlbGVtZW50IGFuZCBuZXdWbm9kZSBpcyBub3QgYW4gU1ZHLFxuICAvLyB1cGRhdGUgdGhlIGF0dHJpYnV0ZSBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQuXG4gIGlmIChuZXdWbm9kZS5pc1NWRyA9PT0gZmFsc2UgJiYgbmFtZSBpbiBuZXdWbm9kZS5kb20pIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXFlcWVxXG4gICAgaWYgKG5ld1Zub2RlLmRvbVtuYW1lXSAhPSB2YWx1ZSkge1xuICAgICAgbmV3Vm5vZGUuZG9tW25hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIElmIG9sZFZub2RlIGlzIG5vdCBwcm92aWRlZCBvciB0aGUgYXR0cmlidXRlIHZhbHVlIGhhcyBjaGFuZ2VkLCB1cGRhdGUgdGhlXG4gIC8vIGF0dHJpYnV0ZSBvbiB0aGUgRE9NIGVsZW1lbnQuXG4gIGlmICghb2xkVm5vZGUgfHwgdmFsdWUgIT09IG9sZFZub2RlLnByb3BzW25hbWVdKSB7XG4gICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xuICAgICAgbmV3Vm5vZGUuZG9tLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3Vm5vZGUuZG9tLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgfVxuICB9XG59XG5cbi8vIFNldCBhbiBhdHRyaWJ1dGUgb24gYSB2aXJ0dWFsIERPTSBub2RlIGFuZCB1cGRhdGUgdGhlIGFjdHVhbCBET00gZWxlbWVudC5cbi8vIFNraXAgdGhlIGF0dHJpYnV0ZSBpZiBpdCBpcyBpbiB0aGUgcmVzZXJ2ZWRQcm9wcyBvYmplY3QuXG5leHBvcnQgZnVuY3Rpb24gc2V0QXR0cmlidXRlKG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSwgbmV3Vm5vZGU6IFZub2RlV2l0aERvbSwgb2xkVm5vZGU/OiBWbm9kZVdpdGhEb20pOiB2b2lkIHtcbiAgaWYgKHJlc2VydmVkUHJvcHNbbmFtZV0pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbmV3Vm5vZGUucHJvcHNbbmFtZV0gPSB2YWx1ZTtcbiAgc2hhcmVkU2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlLCBuZXdWbm9kZSwgb2xkVm5vZGUpO1xufVxuXG4vLyBVcGRhdGUgdGhlIGF0dHJpYnV0ZXMgb24gYSB2aXJ0dWFsIERPTSBub2RlLiBJZiBvbGRWbm9kZSBpcyBwcm92aWRlZCwgcmVtb3ZlXG4vLyBhdHRyaWJ1dGVzIGZyb20gdGhlIERPTSBlbGVtZW50IHRoYXQgYXJlIG5vdCBwcmVzZW50IGluIG5ld1Zub2RlLnByb3BzIGJ1dCBhcmVcbi8vIHByZXNlbnQgaW4gb2xkVm5vZGUucHJvcHMuIFRoZW4sIGl0ZXJhdGUgb3ZlciB0aGUgYXR0cmlidXRlcyBpbiBuZXdWbm9kZS5wcm9wc1xuLy8gYW5kIHVwZGF0ZSB0aGUgRE9NIGVsZW1lbnQgd2l0aCB0aGUgYXR0cmlidXRlcyB1c2luZyB0aGUgc2hhcmVkU2V0QXR0cmlidXRlXG4vLyBmdW5jdGlvbi4gSWYgYW4gYXR0cmlidXRlIGlzIGluIHRoZSByZXNlcnZlZFByb3BzIG9iamVjdCBhbmQgaGFzIGEgY29ycmVzcG9uZGluZ1xuLy8gZGlyZWN0aXZlIGluIHRoZSBkaXJlY3RpdmVzIG9iamVjdCwgY2FsbCB0aGUgZGlyZWN0aXZlIHdpdGggdGhlIGF0dHJpYnV0ZSB2YWx1ZVxuLy8gYW5kIHRoZSB0d28gdmlydHVhbCBET00gbm9kZXMgYXMgYXJndW1lbnRzLiBJZiB0aGUgZGlyZWN0aXZlIHJldHVybnMgZmFsc2UsIGV4aXRcbi8vIHRoZSBsb29wLlxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUF0dHJpYnV0ZXMobmV3Vm5vZGU6IFZub2RlV2l0aERvbSwgb2xkVm5vZGU/OiBWbm9kZVdpdGhEb20pOiB2b2lkIHtcbiAgLy8gSWYgb2xkVm5vZGUgaXMgcHJvdmlkZWQsIHJlbW92ZSBhdHRyaWJ1dGVzIGZyb20gdGhlIERPTSBlbGVtZW50IHRoYXQgYXJlIG5vdFxuICAvLyBwcmVzZW50IGluIG5ld1Zub2RlLnByb3BzIGJ1dCBhcmUgcHJlc2VudCBpbiBvbGRWbm9kZS5wcm9wcy5cbiAgaWYgKG9sZFZub2RlKSB7XG4gICAgZm9yIChjb25zdCBuYW1lIGluIG9sZFZub2RlLnByb3BzKSB7XG4gICAgICBpZiAoIW5ld1Zub2RlLnByb3BzW25hbWVdICYmICFldmVudExpc3RlbmVyTmFtZXNbbmFtZV0gJiYgIXJlc2VydmVkUHJvcHNbbmFtZV0pIHtcbiAgICAgICAgaWYgKG5ld1Zub2RlLmlzU1ZHID09PSBmYWxzZSAmJiBuYW1lIGluIG5ld1Zub2RlLmRvbSkge1xuICAgICAgICAgIG5ld1Zub2RlLmRvbVtuYW1lXSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3Vm5vZGUuZG9tLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEl0ZXJhdGUgb3ZlciB0aGUgYXR0cmlidXRlcyBpbiBuZXdWbm9kZS5wcm9wcyBhbmQgdXBkYXRlIHRoZSBET00gZWxlbWVudCB3aXRoXG4gIC8vIHRoZSBhdHRyaWJ1dGVzIHVzaW5nIHRoZSBzaGFyZWRTZXRBdHRyaWJ1dGUgZnVuY3Rpb24uXG4gIGZvciAoY29uc3QgbmFtZSBpbiBuZXdWbm9kZS5wcm9wcykge1xuICAgIGlmIChyZXNlcnZlZFByb3BzW25hbWVdKSB7XG4gICAgICAvLyBJZiB0aGVyZSBpcyBhIGRpcmVjdGl2ZSBmb3IgdGhlIGF0dHJpYnV0ZSwgY2FsbCBpdCB3aXRoIHRoZSBhdHRyaWJ1dGUgdmFsdWVcbiAgICAgIC8vIGFuZCB0aGUgdHdvIHZpcnR1YWwgRE9NIG5vZGVzIGFzIGFyZ3VtZW50cy4gSWYgdGhlIGRpcmVjdGl2ZSByZXR1cm5zIGZhbHNlLFxuICAgICAgLy8gZXhpdCB0aGUgbG9vcC5cbiAgICAgIGlmIChkaXJlY3RpdmVzW25hbWVdICYmIGRpcmVjdGl2ZXNbbmFtZV0obmV3Vm5vZGUucHJvcHNbbmFtZV0sIG5ld1Zub2RlLCBvbGRWbm9kZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHNoYXJlZFNldEF0dHJpYnV0ZShuYW1lLCBuZXdWbm9kZS5wcm9wc1tuYW1lXSwgbmV3Vm5vZGUsIG9sZFZub2RlKTtcbiAgfVxufVxuXG4vKiBwYXRjaCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIFBhdGNoIGEgRE9NIG5vZGUgd2l0aCBhIG5ldyBWTm9kZSB0cmVlXG5leHBvcnQgZnVuY3Rpb24gcGF0Y2gobmV3Vm5vZGU6IFZub2RlV2l0aERvbSwgb2xkVm5vZGU/OiBWbm9kZVdpdGhEb20pOiB2b2lkIHtcbiAgLy8gSWYgdGhlIG5ldyB0cmVlIGhhcyBubyBjaGlsZHJlbiwgc2V0IHRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIHBhcmVudCBET00gZWxlbWVudCB0byBhbiBlbXB0eSBzdHJpbmdcbiAgaWYgKG5ld1Zub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgIG5ld1Zub2RlLmRvbS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBjaGlsZHJlbiBvZiB0aGUgbmV3IGFuZCBvbGQgdmlydHVhbCBET00gbm9kZXNcbiAgY29uc3QgbmV3VHJlZSA9IG5ld1Zub2RlLmNoaWxkcmVuO1xuICBjb25zdCBvbGRUcmVlID0gb2xkVm5vZGU/LmNoaWxkcmVuIHx8IFtdO1xuICAvLyBHZXQgdGhlIGxlbmd0aCBvZiB0aGUgb2xkIHRyZWVcbiAgY29uc3Qgb2xkVHJlZUxlbmd0aCA9IG9sZFRyZWUubGVuZ3RoO1xuICAvLyBHZXQgdGhlIGxlbmd0aCBvZiB0aGUgbmV3IHRyZWVcbiAgbGV0IG5ld1RyZWVMZW5ndGggPSBuZXdUcmVlLmxlbmd0aDtcbiAgLy8gU2V0IHRoZSBnbG9iYWwgY3VycmVudCBvYmplY3QgdG8gdGhlIG5ldyBhbmQgb2xkIHZpcnR1YWwgRE9NIG5vZGVzXG4gIGN1cnJlbnQudm5vZGUgPSBuZXdWbm9kZTtcbiAgY3VycmVudC5vbGRWbm9kZSA9IG9sZFZub2RlO1xuXG4gIC8vIEZsYXR0ZW4gdGhlIG5ldyB0cmVlXG4gIC8vIFRha2UgaW50byBhY2NvdW50IHRoYXQgaXMgbmVjZXNzYXJ5IHRvIGZsYXR0ZW4gdGhlIHRyZWUgYmVmb3JlIHRoZSBwYXRjaCBwcm9jZXNzXG4gIC8vIHRvIGxldCB0aGUgaG9va3MgYW5kIHNpZ25hbHMgd29yayBwcm9wZXJseVxuICBsZXQgaSA9IDA7XG4gIHdoaWxlIChpIDwgbmV3VHJlZUxlbmd0aCkge1xuICAgIGNvbnN0IG5ld0NoaWxkID0gbmV3VHJlZVtpXTtcblxuICAgIC8vIElmIHRoZSBuZXcgY2hpbGQgaXMgYSBWbm9kZSBhbmQgaXMgbm90IGEgdGV4dCBub2RlXG4gICAgaWYgKG5ld0NoaWxkIGluc3RhbmNlb2YgVm5vZGUpIHtcbiAgICAgIC8vIElmIHRoZSB0YWcgb2YgdGhlIG5ldyBjaGlsZCBpcyBub3QgYSBzdHJpbmcsIGl0IGlzIGEgY29tcG9uZW50XG4gICAgICBpZiAodHlwZW9mIG5ld0NoaWxkLnRhZyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAvLyBTZXQgdGhlIGN1cnJlbnQgY29tcG9uZW50IHRvIHRoZSB0YWcgb2YgdGhlIG5ldyBjaGlsZFxuICAgICAgICBjdXJyZW50LmNvbXBvbmVudCA9IG5ld0NoaWxkLnRhZztcbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgbmV3IGNoaWxkIHdpdGggdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGl0cyB2aWV3IG9yIGJpbmQgbWV0aG9kLCBwYXNzaW5nIGluIHRoZSBwcm9wcyBhbmQgY2hpbGRyZW4gYXMgYXJndW1lbnRzXG4gICAgICAgIG5ld1RyZWUuc3BsaWNlKFxuICAgICAgICAgIGksXG4gICAgICAgICAgMSxcbiAgICAgICAgICAoXCJ2aWV3XCIgaW4gbmV3Q2hpbGQudGFnID8gbmV3Q2hpbGQudGFnLnZpZXcuYmluZChuZXdDaGlsZC50YWcpIDogbmV3Q2hpbGQudGFnLmJpbmQobmV3Q2hpbGQudGFnKSkoXG4gICAgICAgICAgICBuZXdDaGlsZC5wcm9wcyxcbiAgICAgICAgICAgIC4uLm5ld0NoaWxkLmNoaWxkcmVuXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBuZXdUcmVlTGVuZ3RoID0gbmV3VHJlZS5sZW5ndGg7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaSsrO1xuICAgICAgfVxuICAgICAgLy8gSWYgdGhlIG5ldyBjaGlsZCBpcyBhbiBhcnJheSwgZmxhdHRlbiBpdCBhbmQgY29udGludWUgdGhlIGxvb3BcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobmV3Q2hpbGQpKSB7XG4gICAgICBuZXdUcmVlLnNwbGljZShpLCAxLCAuLi5uZXdDaGlsZCk7XG4gICAgICBuZXdUcmVlTGVuZ3RoID0gbmV3VHJlZS5sZW5ndGg7XG4gICAgICAvLyBJZiB0aGUgbmV3IGNoaWxkIGlzIG51bGwgb3IgdW5kZWZpbmVkLCByZW1vdmUgaXQgZnJvbSB0aGUgbmV3IHRyZWUgYW5kIGNvbnRpbnVlIHRoZSBsb29wXG4gICAgfSBlbHNlIGlmIChuZXdDaGlsZCA9PSBudWxsKSB7XG4gICAgICBuZXdUcmVlLnNwbGljZShpLCAxKTtcbiAgICAgIG5ld1RyZWVMZW5ndGggPSBuZXdUcmVlLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgdGhlIG5ldyBjaGlsZCBpcyBhIFZub2RlLCBzZXQgdGhlIHRleHQgb2YgdGhlIFZub2RlIHRvIHRoZSB0ZXh0IGNvbnRlbnQgb2YgaXRzIGRvbSBwcm9wZXJ0eVxuICAgICAgbmV3VHJlZVtpXSA9IG5ldyBWbm9kZSh0ZXh0VGFnLCB7fSwgW25ld0NoaWxkXSk7XG4gICAgICBpKys7XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgdGhlIG5ldyB0cmVlIGhhcyBubyBjaGlsZHJlbiwgc2V0IHRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIHBhcmVudCBET00gZWxlbWVudCB0byBhbiBlbXB0eSBzdHJpbmdcbiAgaWYgKG5ld1RyZWVMZW5ndGggPT09IDApIHtcbiAgICBuZXdWbm9kZS5kb20udGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIElmIHRoZSBvbGQgdHJlZSBoYXMgY2hpbGRyZW4gYW5kIHRoZSBmaXJzdCBjaGlsZCBvZiB0aGUgbmV3IHRyZWUgaXMgYSBWTm9kZSB3aXRoIGEgXCJrZXlcIlxuICAvLyBhdHRyaWJ1dGUgYW5kIHRoZSBmaXJzdCBjaGlsZCBvZiB0aGUgb2xkIHRyZWUgaXMgYSBWTm9kZSB3aXRoIGEgXCJrZXlcIiBhdHRyaWJ1dGUsIHVwZGF0ZVxuICAvLyB0aGUgRE9NIGVsZW1lbnQgaW4gcGxhY2UgYnkgY29tcGFyaW5nIHRoZSBrZXlzIG9mIHRoZSBub2RlcyBpbiB0aGUgdHJlZXMuXG4gIGlmIChcbiAgICBvbGRUcmVlTGVuZ3RoID4gMCAmJlxuICAgIG5ld1RyZWVbMF0gaW5zdGFuY2VvZiBWbm9kZSAmJlxuICAgIG9sZFRyZWVbMF0gaW5zdGFuY2VvZiBWbm9kZSAmJlxuICAgIFwia2V5XCIgaW4gbmV3VHJlZVswXS5wcm9wcyAmJlxuICAgIFwia2V5XCIgaW4gb2xkVHJlZVswXS5wcm9wc1xuICApIHtcbiAgICBjb25zdCBvbGRLZXllZExpc3Q6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICBjb25zdCBuZXdLZXllZExpc3Q6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICBjb25zdCBjaGlsZE5vZGVzID0gbmV3Vm5vZGUuZG9tLmNoaWxkTm9kZXM7XG5cbiAgICAvLyBDcmVhdGUga2V5IG1hcHMgd2hpbGUgYWxzbyBoYW5kbGluZyByZW1vdmFsIG9mIG5vZGVzIG5vdCBwcmVzZW50IGluIG5ld1RyZWVcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9sZFRyZWVMZW5ndGg7IGkrKykge1xuICAgICAgb2xkS2V5ZWRMaXN0W29sZFRyZWVbaV0ucHJvcHMua2V5XSA9IGk7XG4gICAgICBpZiAoaSA8IG5ld1RyZWVMZW5ndGgpIHtcbiAgICAgICAgbmV3S2V5ZWRMaXN0W25ld1RyZWVbaV0ucHJvcHMua2V5XSA9IGk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdUcmVlTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5ld0NoaWxkID0gbmV3VHJlZVtpXTtcbiAgICAgIGNvbnN0IG9sZENoaWxkSW5kZXggPSBvbGRLZXllZExpc3RbbmV3Q2hpbGQucHJvcHMua2V5XTtcbiAgICAgIGNvbnN0IG9sZENoaWxkID0gb2xkVHJlZVtvbGRDaGlsZEluZGV4XTtcbiAgICAgIGxldCBzaG91bGRQYXRjaCA9IHRydWU7XG5cbiAgICAgIGlmIChvbGRDaGlsZCkge1xuICAgICAgICBuZXdDaGlsZC5kb20gPSBvbGRDaGlsZC5kb207XG4gICAgICAgIGlmIChcInYta2VlcFwiIGluIG5ld0NoaWxkLnByb3BzICYmIG5ld0NoaWxkLnByb3BzW1widi1rZWVwXCJdID09PSBvbGRDaGlsZC5wcm9wc1tcInYta2VlcFwiXSkge1xuICAgICAgICAgIG5ld0NoaWxkLmNoaWxkcmVuID0gb2xkQ2hpbGQuY2hpbGRyZW47XG4gICAgICAgICAgc2hvdWxkUGF0Y2ggPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVBdHRyaWJ1dGVzKG5ld0NoaWxkLCBvbGRDaGlsZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0NoaWxkLmRvbSA9IGNyZWF0ZURvbUVsZW1lbnQobmV3Q2hpbGQudGFnLCBuZXdDaGlsZC5pc1NWRyk7XG4gICAgICAgIHVwZGF0ZUF0dHJpYnV0ZXMobmV3Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXJyZW50Tm9kZSA9IGNoaWxkTm9kZXNbaV07XG4gICAgICBpZiAoIWN1cnJlbnROb2RlKSB7XG4gICAgICAgIG5ld1Zub2RlLmRvbS5hcHBlbmRDaGlsZChuZXdDaGlsZC5kb20pO1xuICAgICAgfSBlbHNlIGlmIChjdXJyZW50Tm9kZSAhPT0gbmV3Q2hpbGQuZG9tKSB7XG4gICAgICAgIG5ld1Zub2RlLmRvbS5yZXBsYWNlQ2hpbGQobmV3Q2hpbGQuZG9tLCBjdXJyZW50Tm9kZSk7XG4gICAgICB9XG5cbiAgICAgIHNob3VsZFBhdGNoICYmIHBhdGNoKG5ld0NoaWxkLCBvbGRDaGlsZCk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIG5vZGVzIHRoYXQgZG9uJ3QgZXhpc3QgaW4gbmV3VHJlZVxuICAgIGZvciAobGV0IGkgPSBuZXdUcmVlTGVuZ3RoOyBpIDwgb2xkVHJlZUxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIW5ld0tleWVkTGlzdFtvbGRUcmVlW2ldLnByb3BzLmtleV0pIHtcbiAgICAgICAgY29uc3QgZG9tVG9SZW1vdmUgPSBvbGRUcmVlW2ldLmRvbTtcbiAgICAgICAgZG9tVG9SZW1vdmUucGFyZW50Tm9kZSAmJiBkb21Ub1JlbW92ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRvbVRvUmVtb3ZlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gUGF0Y2ggdGhlIHRoZSBvbGQgdHJlZVxuICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1RyZWVMZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IG5ld0NoaWxkID0gbmV3VHJlZVtpXTtcbiAgICBjb25zdCBvbGRDaGlsZCA9IG9sZFRyZWVbaV07XG4gICAgY29uc3QgaXNHcmVhdGVyVGhhbk9sZFRyZWVMZW5ndGggPSBpID49IG9sZFRyZWVMZW5ndGg7XG5cbiAgICAvLyBIYW5kbGUgdGV4dCBub2Rlc1xuICAgIGlmIChuZXdDaGlsZC50YWcgPT09IHRleHRUYWcpIHtcbiAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gY29ycmVzcG9uZGluZyBvbGQgY2hpbGQgb3IgdGhlIG9sZCBjaGlsZCBpc24ndCBhIHRleHQgbm9kZVxuICAgICAgaWYgKGlzR3JlYXRlclRoYW5PbGRUcmVlTGVuZ3RoIHx8IG9sZENoaWxkLnRhZyAhPT0gdGV4dFRhZykge1xuICAgICAgICBuZXdDaGlsZC5kb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuZXdDaGlsZC5jaGlsZHJlblswXSk7IC8vIENyZWF0ZSBhIG5ldyB0ZXh0IG5vZGVcbiAgICAgICAgaWYgKGlzR3JlYXRlclRoYW5PbGRUcmVlTGVuZ3RoKSB7XG4gICAgICAgICAgLy8gSWYgdGhlcmUncyBubyBjb3JyZXNwb25kaW5nIG9sZCBjaGlsZCwgYXBwZW5kIHRoZSBuZXcgdGV4dCBub2RlXG4gICAgICAgICAgbmV3Vm5vZGUuZG9tLmFwcGVuZENoaWxkKG5ld0NoaWxkLmRvbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVwbGFjZSB0aGUgb2xkIG5vbi10ZXh0IG5vZGUgd2l0aCB0aGUgbmV3IHRleHQgbm9kZVxuICAgICAgICAgIG5ld1Zub2RlLmRvbS5yZXBsYWNlQ2hpbGQobmV3Q2hpbGQuZG9tLCBvbGRDaGlsZC5kb20pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIG9sZCB0ZXh0IG5vZGUgaWYgY29udGVudCBoYXMgY2hhbmdlZFxuICAgICAgICBuZXdDaGlsZC5kb20gPSBvbGRDaGlsZC5kb207XG4gICAgICAgIGlmIChuZXdDaGlsZC5jaGlsZHJlblswXSAhPT0gb2xkQ2hpbGQuZG9tLnRleHRDb250ZW50KSB7XG4gICAgICAgICAgb2xkQ2hpbGQuZG9tLnRleHRDb250ZW50ID0gbmV3Q2hpbGQuY2hpbGRyZW5bMF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBuZXcgY2hpbGQgaXMgbm90IGEgdGV4dCBub2RlXG4gICAgLy8gU2V0IHRoZSBpc1NWRyBmbGFnIGZvciB0aGUgbmV3IGNoaWxkIGlmIGl0IGlzIGFuIFNWRyBlbGVtZW50IG9yIGlmIHRoZSBwYXJlbnQgaXMgYW4gU1ZHIGVsZW1lbnRcbiAgICBuZXdDaGlsZC5pc1NWRyA9IG5ld1Zub2RlLmlzU1ZHIHx8IG5ld0NoaWxkLnRhZyA9PT0gXCJzdmdcIjtcblxuICAgIC8vIElmIHRoZSB0YWcgb2YgdGhlIG5ldyBjaGlsZCBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgdGFnIG9mIHRoZSBvbGQgY2hpbGRcbiAgICBpZiAoaXNHcmVhdGVyVGhhbk9sZFRyZWVMZW5ndGggfHwgbmV3Q2hpbGQudGFnICE9PSBvbGRDaGlsZC50YWcpIHtcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBkb20gZWxlbWVudCBmb3IgdGhlIG5ldyBjaGlsZFxuICAgICAgbmV3Q2hpbGQuZG9tID0gY3JlYXRlRG9tRWxlbWVudChuZXdDaGlsZC50YWcgYXMgc3RyaW5nLCBuZXdDaGlsZC5pc1NWRyk7XG4gICAgICAvLyBVcGRhdGUgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIG5ldyBjaGlsZFxuICAgICAgdXBkYXRlQXR0cmlidXRlcyhuZXdDaGlsZCBhcyBWbm9kZVdpdGhEb20pO1xuICAgICAgaWYgKGlzR3JlYXRlclRoYW5PbGRUcmVlTGVuZ3RoKSB7XG4gICAgICAgIC8vIEFwcGVuZCB0aGUgbmV3IGNoaWxkIHRvIHRoZSBkb21cbiAgICAgICAgbmV3Vm5vZGUuZG9tLmFwcGVuZENoaWxkKG5ld0NoaWxkLmRvbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXBsYWNlIHRoZSBvbGQgY2hpbGQgaW4gdGhlIGRvbSB3aXRoIHRoZSBuZXcgY2hpbGRcbiAgICAgICAgbmV3Vm5vZGUuZG9tLnJlcGxhY2VDaGlsZChuZXdDaGlsZC5kb20sIG9sZENoaWxkLmRvbSk7XG4gICAgICB9XG4gICAgICAvLyBSZWN1cnNpdmVseSBwYXRjaCB0aGUgbmV3IGNoaWxkXG4gICAgICBwYXRjaChuZXdDaGlsZCBhcyBWbm9kZVdpdGhEb20pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHRhZyBvZiB0aGUgbmV3IGNoaWxkIGlzIHRoZSBzYW1lIGFzIHRoZSB0YWcgb2YgdGhlIG9sZCBjaGlsZFxuICAgIC8vIFNldCB0aGUgZG9tIHByb3BlcnR5IG9mIHRoZSBuZXcgY2hpbGQgdG8gdGhlIGRvbSBwcm9wZXJ0eSBvZiB0aGUgb2xkIGNoaWxkXG4gICAgbmV3Q2hpbGQuZG9tID0gb2xkQ2hpbGQuZG9tO1xuICAgIC8vIElmIHRoZSB2LWtlZXAgcHJvcCBpcyB0aGUgc2FtZSBmb3IgYm90aCB0aGUgbmV3IGFuZCBvbGQgY2hpbGQsIHNldCB0aGUgY2hpbGRyZW4gb2YgdGhlIG5ldyBjaGlsZCB0byB0aGUgY2hpbGRyZW4gb2YgdGhlIG9sZCBjaGlsZFxuICAgIGlmIChcInYta2VlcFwiIGluIG5ld0NoaWxkLnByb3BzICYmIG5ld0NoaWxkLnByb3BzW1widi1rZWVwXCJdID09PSBvbGRDaGlsZC5wcm9wc1tcInYta2VlcFwiXSkge1xuICAgICAgbmV3Q2hpbGQuY2hpbGRyZW4gPSBvbGRDaGlsZC5jaGlsZHJlbjtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgYXR0cmlidXRlcyBvZiB0aGUgbmV3IGNoaWxkIGJhc2VkIG9uIHRoZSBvbGQgY2hpbGRcbiAgICB1cGRhdGVBdHRyaWJ1dGVzKG5ld0NoaWxkIGFzIFZub2RlV2l0aERvbSwgb2xkQ2hpbGQpO1xuICAgIC8vIFJlY3Vyc2l2ZWx5IHBhdGNoIHRoZSBuZXcgYW5kIG9sZCBjaGlsZHJlblxuICAgIHBhdGNoKG5ld0NoaWxkIGFzIFZub2RlV2l0aERvbSwgb2xkQ2hpbGQpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGFueSBvbGQgY2hpbGRyZW4gdGhhdCBhcmUgbm8gbG9uZ2VyIHByZXNlbnQgaW4gdGhlIG5ldyB0cmVlXG4gIGZvciAoOyBuZXdUcmVlTGVuZ3RoIDwgb2xkVHJlZUxlbmd0aDsgbmV3VHJlZUxlbmd0aCsrKSB7XG4gICAgbmV3Vm5vZGUuZG9tLnJlbW92ZUNoaWxkKG9sZFRyZWVbbmV3VHJlZUxlbmd0aF0uZG9tKTtcbiAgfVxufVxuXG4vLyBVcGRhdGUgdGhlIG1haW4gVm5vZGVcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGUoKTogdm9pZCB8IHN0cmluZyB7XG4gIC8vIElmIHRoZSBtYWluIFZub2RlIGV4aXN0c1xuICBpZiAobWFpblZub2RlKSB7XG4gICAgLy8gQ2FsbCBhbnkgY2xlYW51cCBmdW5jdGlvbnMgdGhhdCBhcmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBvbkNsZWFudXBTZXQgc2V0XG4gICAgY2FsbFNldChvbkNsZWFudXBTZXQpO1xuICAgIC8vIFN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBvbGQgbWFpbiBWbm9kZVxuICAgIGNvbnN0IG9sZE1haW5Wbm9kZSA9IG1haW5Wbm9kZTtcbiAgICAvLyBDcmVhdGUgYSBuZXcgbWFpbiBWbm9kZSB3aXRoIHRoZSBtYWluIGNvbXBvbmVudCBhcyBpdHMgb25seSBjaGlsZFxuICAgIG1haW5Wbm9kZSA9IG5ldyBWbm9kZShvbGRNYWluVm5vZGUudGFnLCBvbGRNYWluVm5vZGUucHJvcHMsIFttYWluQ29tcG9uZW50XSkgYXMgVm5vZGVXaXRoRG9tO1xuICAgIG1haW5Wbm9kZS5kb20gPSBvbGRNYWluVm5vZGUuZG9tO1xuICAgIG1haW5Wbm9kZS5pc1NWRyA9IG9sZE1haW5Wbm9kZS5pc1NWRztcblxuICAgIC8vIFJlY3Vyc2l2ZWx5IHBhdGNoIHRoZSBuZXcgYW5kIG9sZCBtYWluIFZub2Rlc1xuICAgIHBhdGNoKG1haW5Wbm9kZSwgb2xkTWFpblZub2RlKTtcblxuICAgIC8vIENhbGwgYW55IHVwZGF0ZSBvciBtb3VudCBmdW5jdGlvbnMgdGhhdCBhcmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBvblVwZGF0ZVNldCBvciBvbk1vdW50U2V0IHNldFxuICAgIGNhbGxTZXQoaXNNb3VudGVkID8gb25VcGRhdGVTZXQgOiBvbk1vdW50U2V0KTtcblxuICAgIC8vIFNldCB0aGUgaXNNb3VudGVkIGZsYWcgdG8gdHJ1ZVxuICAgIGlzTW91bnRlZCA9IHRydWU7XG5cbiAgICAvLyBSZXNldCB0aGUgY3VycmVudCB2bm9kZSwgb2xkVm5vZGUsIGFuZCBjb21wb25lbnQgcHJvcGVydGllc1xuICAgIGN1cnJlbnQudm5vZGUgPSBudWxsO1xuICAgIGN1cnJlbnQub2xkVm5vZGUgPSBudWxsO1xuICAgIGN1cnJlbnQuY29tcG9uZW50ID0gbnVsbDtcblxuICAgIC8vIElmIHRoZSBjb2RlIGlzIHJ1bm5pbmcgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LCByZXR1cm4gdGhlIGlubmVyIEhUTUwgb2YgdGhlIG1haW4gVm5vZGUncyBkb20gZWxlbWVudFxuICAgIGlmIChpc05vZGVKcykge1xuICAgICAgcmV0dXJuIG1haW5Wbm9kZS5kb20uaW5uZXJIVE1MO1xuICAgIH1cbiAgfVxufVxuXG4vLyBVcGRhdGUgY3VzdG9tIFZub2RlXG4vLyBJdCBpcyBhc3N1bWVkIHRoYXQgYSBmaXJzdCBtb3VudCBoYXMgYWxyZWFkeSBvY2N1cnJlZCwgc28sXG4vLyB0aGUgb2xkVm5vZGUgaXMgbm90IG51bGwgYW5kIHRoZSBkb20gcHJvcGVydHkgb2YgdGhlIG9sZFZub2RlIGlzIG5vdCBudWxsXG4vLyBZb3UgbmVlZCB0byBzZXQgdGhlIGRvbSBwcm9wZXJ0eSBvZiB0aGUgbmV3Vm5vZGUgdG8gdGhlIGRvbSBwcm9wZXJ0eSBvZiB0aGUgb2xkVm5vZGVcbi8vIFRoZSBzYW1lIHdpdGggdGhlIGlzU1ZHIHByb3BlcnR5XG4vLyBQcmVmZXIgdGhpcyBmdW5jdGlvbiBvdmVyIHBhdGNoIHRvIGFsbG93IGZvciBjbGVhbnVwLCBvblVwZGF0ZSBhbmQgb25Nb3VudCBzZXRzIHRvIGJlIGNhbGxlZFxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVZub2RlKHZub2RlOiBWbm9kZVdpdGhEb20sIG9sZFZub2RlOiBWbm9kZVdpdGhEb20pOiBzdHJpbmcgfCB2b2lkIHtcbiAgLy8gQ2FsbCBhbnkgY2xlYW51cCBmdW5jdGlvbnMgdGhhdCBhcmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBvbkNsZWFudXBTZXQgc2V0XG4gIGNhbGxTZXQob25DbGVhbnVwU2V0KTtcblxuICAvLyBSZWN1cnNpdmVseSBwYXRjaCB0aGUgbmV3IGFuZCBvbGQgbWFpbiBWbm9kZXNcbiAgcGF0Y2godm5vZGUsIG9sZFZub2RlKTtcblxuICAvLyBTZXQgdGhlIG9sZFZub2RlJ3MgdGFnLCBwcm9wcywgY2hpbGRyZW4sIGRvbSwgYW5kIGlzU1ZHIHByb3BlcnRpZXMgdG8gdGhlIG5ld1Zub2RlJ3MgdGFnLCBwcm9wcywgY2hpbGRyZW4sIGRvbSwgYW5kIGlzU1ZHIHByb3BlcnRpZXNcbiAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgdG8gYWxsb3cgZm9yIHRoZSBvbGRWbm9kZSB0byBiZSB1c2VkIGFzIHRoZSBuZXdWbm9kZSBpbiB0aGUgbmV4dCB1cGRhdGUgd2l0aCB0aGUgbm9ybWFsIHVwZGF0ZSBmdW5jdGlvblxuICBvbGRWbm9kZS50YWcgPSB2bm9kZS50YWc7XG4gIG9sZFZub2RlLnByb3BzID0geyAuLi52bm9kZS5wcm9wcyB9O1xuICBvbGRWbm9kZS5jaGlsZHJlbiA9IFsuLi52bm9kZS5jaGlsZHJlbl07XG4gIG9sZFZub2RlLmRvbSA9IHZub2RlLmRvbTtcbiAgb2xkVm5vZGUuaXNTVkcgPSB2bm9kZS5pc1NWRztcblxuICAvLyBDYWxsIGFueSB1cGRhdGUgb3IgbW91bnQgZnVuY3Rpb25zIHRoYXQgYXJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgb25VcGRhdGVTZXQgb3Igb25Nb3VudFNldCBzZXRcbiAgY2FsbFNldChpc01vdW50ZWQgPyBvblVwZGF0ZVNldCA6IG9uTW91bnRTZXQpO1xuXG4gIC8vIFNldCB0aGUgaXNNb3VudGVkIGZsYWcgdG8gdHJ1ZVxuICBpc01vdW50ZWQgPSB0cnVlO1xuXG4gIC8vIFJlc2V0IHRoZSBjdXJyZW50IHZub2RlLCBvbGRWbm9kZSwgYW5kIGNvbXBvbmVudCBwcm9wZXJ0aWVzXG4gIGN1cnJlbnQudm5vZGUgPSBudWxsO1xuICBjdXJyZW50Lm9sZFZub2RlID0gbnVsbDtcbiAgY3VycmVudC5jb21wb25lbnQgPSBudWxsO1xuXG4gIGlmIChpc05vZGVKcykge1xuICAgIHJldHVybiB2bm9kZS5kb20uaW5uZXJIVE1MO1xuICB9XG59XG5cbi8vIFVubW91bnQgdGhlIG1haW4gVm5vZGVcbmV4cG9ydCBmdW5jdGlvbiB1bm1vdW50KCkge1xuICAvLyBJZiB0aGUgbWFpbiBWbm9kZSBleGlzdHNcbiAgaWYgKG1haW5Wbm9kZSkge1xuICAgIC8vIFNldCB0aGUgbWFpbiBjb21wb25lbnQgdG8gYSBudWxsIFZub2RlXG4gICAgbWFpbkNvbXBvbmVudCA9IG5ldyBWbm9kZSgoKSA9PiBudWxsLCB7fSwgW10pIGFzIFZub2RlQ29tcG9uZW50SW50ZXJmYWNlO1xuICAgIC8vIFVwZGF0ZSB0aGUgbWFpbiBWbm9kZVxuICAgIGNvbnN0IHJlc3VsdCA9IHVwZGF0ZSgpO1xuICAgIC8vIENhbGwgYW55IHVubW91bnQgZnVuY3Rpb25zIHRoYXQgYXJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgb25Vbm1vdW50U2V0IHNldFxuICAgIGNhbGxTZXQob25Vbm1vdW50U2V0KTtcblxuICAgIC8vIFJlbW92ZSBhbnkgZXZlbnQgbGlzdGVuZXJzIHRoYXQgd2VyZSBhZGRlZCB0byB0aGUgbWFpbiBWbm9kZSdzIGRvbSBlbGVtZW50XG4gICAgZm9yIChjb25zdCBuYW1lIGluIGV2ZW50TGlzdGVuZXJOYW1lcykge1xuICAgICAgbWFpblZub2RlLmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUuc2xpY2UoMikudG9Mb3dlckNhc2UoKSwgZXZlbnRMaXN0ZW5lcik7XG4gICAgICBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KGV2ZW50TGlzdGVuZXJOYW1lcywgbmFtZSk7XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgdGhlIG1haW4gY29tcG9uZW50IGFuZCBtYWluIFZub2RlXG4gICAgbWFpbkNvbXBvbmVudCA9IG51bGw7XG4gICAgbWFpblZub2RlID0gbnVsbDtcbiAgICAvLyBTZXQgdGhlIGlzTW91bnRlZCBmbGFnIHRvIGZhbHNlXG4gICAgaXNNb3VudGVkID0gZmFsc2U7XG4gICAgLy8gUmVzZXQgdGhlIGN1cnJlbnQgdm5vZGUsIG9sZFZub2RlLCBhbmQgY29tcG9uZW50IHByb3BlcnRpZXNcbiAgICBjdXJyZW50LnZub2RlID0gbnVsbDtcbiAgICBjdXJyZW50Lm9sZFZub2RlID0gbnVsbDtcbiAgICBjdXJyZW50LmNvbXBvbmVudCA9IG51bGw7XG4gICAgLy8gUmV0dXJuIHRoZSByZXN1bHQgb2YgdXBkYXRpbmcgdGhlIG1haW4gVm5vZGVcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG4vLyBUaGlzIGZ1bmN0aW9uIHRha2VzIGluIGEgRE9NIGVsZW1lbnQgb3IgYSBET00gZWxlbWVudCBzZWxlY3RvciBhbmQgYSBjb21wb25lbnQgdG8gYmUgbW91bnRlZCBvbiBpdC5cbmV4cG9ydCBmdW5jdGlvbiBtb3VudChkb206IHN0cmluZyB8IERvbUVsZW1lbnQsIGNvbXBvbmVudDogYW55KSB7XG4gIC8vIENoZWNrIGlmIHRoZSAnZG9tJyBhcmd1bWVudCBpcyBhIHN0cmluZy4gSWYgaXQgaXMsIHNlbGVjdCB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIGdpdmVuIHNlbGVjdG9yLlxuICAvLyBPdGhlcndpc2UsIHVzZSB0aGUgJ2RvbScgYXJndW1lbnQgYXMgdGhlIGNvbnRhaW5lci5cbiAgY29uc3QgY29udGFpbmVyID1cbiAgICB0eXBlb2YgZG9tID09PSBcInN0cmluZ1wiXG4gICAgICA/IGlzTm9kZUpzXG4gICAgICAgID8gY3JlYXRlRG9tRWxlbWVudChkb20sIGRvbSA9PT0gXCJzdmdcIilcbiAgICAgICAgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGRvbSlbMF1cbiAgICAgIDogZG9tO1xuXG4gIC8vIENoZWNrIGlmIHRoZSAnY29tcG9uZW50JyBhcmd1bWVudCBpcyBhIFZub2RlIGNvbXBvbmVudCBvciBhIHJlZ3VsYXIgY29tcG9uZW50LlxuICAvLyBJZiBpdCdzIGEgcmVndWxhciBjb21wb25lbnQsIGNyZWF0ZSBhIG5ldyBWbm9kZSBjb21wb25lbnQgdXNpbmcgdGhlICdjb21wb25lbnQnIGFyZ3VtZW50IGFzIHRoZSB0YWcuXG4gIC8vIElmIGl0J3Mgbm90IGEgY29tcG9uZW50IGF0IGFsbCwgY3JlYXRlIGEgbmV3IFZub2RlIGNvbXBvbmVudCB3aXRoIHRoZSAnY29tcG9uZW50JyBhcmd1bWVudCBhcyB0aGUgcmVuZGVyaW5nIGZ1bmN0aW9uLlxuICBjb25zdCB2bm9kZUNvbXBvbmVudCA9IGlzVm5vZGVDb21wb25lbnQoY29tcG9uZW50KVxuICAgID8gY29tcG9uZW50XG4gICAgOiBpc0NvbXBvbmVudChjb21wb25lbnQpXG4gICAgPyBuZXcgVm5vZGUoY29tcG9uZW50LCB7fSwgW10pXG4gICAgOiBuZXcgVm5vZGUoKCkgPT4gY29tcG9uZW50LCB7fSwgW10pO1xuXG4gIC8vIElmIGEgbWFpbiBjb21wb25lbnQgYWxyZWFkeSBleGlzdHMgYW5kIGl0J3Mgbm90IHRoZSBzYW1lIGFzIHRoZSBjdXJyZW50ICd2bm9kZUNvbXBvbmVudCcsIHVubW91bnQgaXQuXG4gIGlmIChtYWluQ29tcG9uZW50ICYmIG1haW5Db21wb25lbnQudGFnICE9PSB2bm9kZUNvbXBvbmVudC50YWcpIHtcbiAgICB1bm1vdW50KCk7XG4gIH1cblxuICAvLyBTZXQgdGhlICd2bm9kZUNvbXBvbmVudCcgYXMgdGhlIG1haW4gY29tcG9uZW50LlxuICBtYWluQ29tcG9uZW50ID0gdm5vZGVDb21wb25lbnQgYXMgVm5vZGVDb21wb25lbnRJbnRlcmZhY2U7XG4gIC8vIENvbnZlcnQgdGhlIGNvbnRhaW5lciBlbGVtZW50IHRvIGEgVm5vZGUuXG4gIG1haW5Wbm9kZSA9IGRvbVRvVm5vZGUoY29udGFpbmVyKTtcbiAgLy8gVXBkYXRlIHRoZSBET00gd2l0aCB0aGUgbmV3IGNvbXBvbmVudC5cbiAgcmV0dXJuIHVwZGF0ZSgpO1xufVxuXG4vLyBUaGlzIGlzIGEgdXRpbGl0eSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgVm5vZGUgb2JqZWN0cy5cbi8vIEl0IHRha2VzIGluIGEgdGFnIG9yIGNvbXBvbmVudCwgYW5kIG9wdGlvbmFsIHByb3BzIGFuZCBjaGlsZHJlbiBhcmd1bWVudHMuXG5leHBvcnQgY29uc3QgdjogViA9ICh0YWdPckNvbXBvbmVudCwgcHJvcHMsIC4uLmNoaWxkcmVuKSA9PiB7XG4gIC8vIFJldHVybiBhIG5ldyBWbm9kZSBvYmplY3QgdXNpbmcgdGhlIGdpdmVuIGFyZ3VtZW50cy5cbiAgcmV0dXJuIG5ldyBWbm9kZSh0YWdPckNvbXBvbmVudCwgcHJvcHMgfHwge30sIGNoaWxkcmVuKTtcbn07XG5cbi8vIFRoaXMgdXRpbGl0eSBmdW5jdGlvbiBjcmVhdGVzIGEgZnJhZ21lbnQgVm5vZGUuXG4vLyBJdCB0YWtlcyBpbiBhIHBsYWNlaG9sZGVyIGFuZCB0aGUgY2hpbGRyZW4gYXJndW1lbnRzLCByZXR1cm5zIG9ubHkgdGhlIGNoaWxkcmVuLlxudi5mcmFnbWVudCA9IChfOiBWbm9kZVByb3BlcnRpZXMsIC4uLmNoaWxkcmVuOiBDaGlsZHJlbikgPT4gY2hpbGRyZW47XG4iXSwibWFwcGluZ3MiOiJNQXVIQSxJQUFNQSxFQUFVLFFBSUhDLEVBQVdDLFFBQTJCLG9CQUFaQyxTQUEyQkEsUUFBUUMsVUFBWUQsUUFBUUMsU0FBU0MsTUFJaEcsU0FBU0MsRUFBaUJDLEVBQWFDLEdBQWlCLEdBQzdELE9BQU9BLEVBQVFDLFNBQVNDLGdCQUFnQiw2QkFBOEJILEdBQU9FLFNBQVNFLGNBQWNKLEVBQ3RHLENBTU8sSUFBTUssRUFBUSxTQUFxQ0wsRUFBYU0sRUFBd0JDLEdBRTdGQyxLQUFLUixJQUFNQSxFQUNYUSxLQUFLRixNQUFRQSxFQUNiRSxLQUFLRCxTQUFXQSxDQUNsQixFQUlPLFNBQVNFLEVBQVlDLEdBQzFCLE9BQU9mLFFBQ0xlLElBQW1DLG1CQUFkQSxHQUFrRCxpQkFBZEEsR0FBMEIsU0FBVUEsR0FFakcsQ0FHTyxJQUFNQyxFQUFXQyxHQUVmQSxhQUFrQlAsRUFLZFEsRUFBb0JELEdBRXhCRCxFQUFRQyxJQUFXSCxFQUFZRyxFQUFPWixLQUl4QyxTQUFTYyxFQUFXQyxHQUl6QixHQUFxQixJQUFqQkEsRUFBSUMsU0FBZ0IsQ0FDdEIsTUFBTUMsRUFBUSxJQUFJWixFQUFNWixFQUFTLENBQUMsRUFBRyxDQUFDc0IsRUFBSUcsWUFFMUMsT0FEQUQsRUFBTUYsSUFBTUEsRUFDTEUsQ0FDVCxDQUVBLE1BQU1WLEVBQTJCLEdBRWpD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