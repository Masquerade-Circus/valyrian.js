//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXJfZXhwb3J0cyIsIl9fZXhwb3J0IiwiUm91dGVyIiwicGx1Z2luIiwibG9jYWxWYWx5cmlhbiIsIl9fRVhQT1JUU19fIiwiYWRkUGF0aCIsInJvdXRlciIsIm1ldGhvZCIsInBhdGgiLCJtaWRkbGV3YXJlcyIsImxlbmd0aCIsInJlYWxwYXRoIiwicmVwbGFjZSIsInBhcmFtcyIsIm1hdGNoIiwicGFyYW0iLCJzbGljZSIsInJlZ2V4cFBhdGgiLCJhcnJheSIsInBhdGhzIiwicHVzaCIsIkFycmF5IiwiaXNBcnJheSIsImZsYXQiLCJJbmZpbml0eSIsInJlZ2V4cCIsIlJlZ0V4cCIsImNvbnRhaW5lciIsInF1ZXJ5Iiwib3B0aW9ucyIsInVybCIsIm1hdGNoZXMiLCJhZGQiLCJhcmdzIiwidGhpcyIsInVzZSIsImkiLCJrIiwic3Vicm91dGVyIiwiaXRlbSIsInN1YnBhdGgiLCJzaGlmdCIsInJvdXRlcyIsImZvckVhY2giLCJhc3luYyIsInBhcmVudENvbXBvbmVudCIsIkVycm9yIiwicGFydHMiLCJzcGxpdCIsInVybFBhcnRzIiwicXVlcnlQYXJ0cyIsIm5hbWVWYWx1ZSIsInBhcnNlUXVlcnkiLCJrZXkiLCJleGVjIiwic2VhcmNoTWlkZGxld2FyZXMiLCJjb21wb25lbnQiLCJyZXNwb25zZSIsInJlcSIsInJlZGlyZWN0IiwiZ28iLCJpc0NvbXBvbmVudCIsInNlYXJjaENvbXBvbmVudCIsImNoaWxkQ29tcG9uZW50IiwiaXNWbm9kZUNvbXBvbmVudCIsImNoaWxkcmVuIiwiaXNOb2RlSnMiLCJ3aW5kb3ciLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiaXNNb3VudGVkIiwidXBkYXRlIiwibW91bnQiLCJnZXRPbkNsaWNrSGFuZGxlciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInYiLCJtb3VudFJvdXRlciIsImVsZW1lbnRDb250YWluZXIiLCJyb3V0ZXJPckNvbXBvbmVudCIsImJpbmQiLCJvblBvcFN0YXRlR29Ub1JvdXRlIiwiZG9jdW1lbnQiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpcmVjdGl2ZSIsInZub2RlIiwib2xkbm9kZSIsInNldEF0dHJpYnV0ZSJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9yb3V0ZXIvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cbmltcG9ydCB7IENvbXBvbmVudCwgVmFseXJpYW4sIFZhbHlyaWFuQ29tcG9uZW50LCBWbm9kZUNvbXBvbmVudEludGVyZmFjZSB9IGZyb20gXCJWYWx5cmlhblwiO1xuXG5pbnRlcmZhY2UgUGF0aCB7XG4gIG1ldGhvZDogc3RyaW5nO1xuICBwYXRoOiBzdHJpbmc7XG4gIG1pZGRsZXdhcmVzOiBNaWRkbGV3YXJlcztcbiAgcGFyYW1zOiBzdHJpbmdbXTtcbiAgcmVnZXhwOiBSZWdFeHA7XG59XG5cbmludGVyZmFjZSBSZXF1ZXN0IHtcbiAgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBxdWVyeTogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgdXJsOiBzdHJpbmc7XG4gIHBhdGg6IHN0cmluZztcbiAgbWF0Y2hlczogc3RyaW5nW107XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICByZWRpcmVjdDogKHBhdGg6IHN0cmluZywgcGFyZW50Q29tcG9uZW50PzogQ29tcG9uZW50IHwgVmFseXJpYW5Db21wb25lbnQgfCBWbm9kZUNvbXBvbmVudEludGVyZmFjZSkgPT4gZmFsc2U7XG59XG5cbmludGVyZmFjZSBNaWRkbGV3YXJlIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIChyZXE6IFJlcXVlc3QsIHJlcz86IGFueSk6XG4gICAgfCBQcm9taXNlPGFueSB8IENvbXBvbmVudCB8IFZhbHlyaWFuQ29tcG9uZW50IHwgVm5vZGVDb21wb25lbnRJbnRlcmZhY2U+XG4gICAgfCBhbnlcbiAgICB8IENvbXBvbmVudFxuICAgIHwgVmFseXJpYW5Db21wb25lbnRcbiAgICB8IFZub2RlQ29tcG9uZW50SW50ZXJmYWNlO1xufVxuXG5pbnRlcmZhY2UgTWlkZGxld2FyZXMgZXh0ZW5kcyBBcnJheTxNaWRkbGV3YXJlPiB7fVxuXG5pbnRlcmZhY2UgUm91dGVySW50ZXJmYWNlIHtcbiAgcGF0aHM6IFBhdGhbXTtcbiAgY29udGFpbmVyOiBFbGVtZW50IHwgc3RyaW5nIHwgbnVsbDtcbiAgcXVlcnk6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj47XG4gIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIHVybDogc3RyaW5nO1xuICBwYXRoOiBzdHJpbmc7XG4gIHBhcmFtczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgYW55PjtcbiAgbWF0Y2hlczogc3RyaW5nW107XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBhZGQobWV0aG9kOiBzdHJpbmcsIC4uLmFyZ3M6IE1pZGRsZXdhcmVzKTogUm91dGVyO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgdXNlKC4uLmFyZ3M6IE1pZGRsZXdhcmVzIHwgUm91dGVyW10pOiBSb3V0ZXI7XG4gIHJvdXRlcygpOiBzdHJpbmdbXTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGdvKHBhdGg6IHN0cmluZywgcGFyZW50Q29tcG9uZW50PzogQ29tcG9uZW50IHwgVmFseXJpYW5Db21wb25lbnQgfCBWbm9kZUNvbXBvbmVudEludGVyZmFjZSk6IFByb21pc2U8c3RyaW5nIHwgdm9pZD47XG59XG5cbmxldCBsb2NhbFZhbHlyaWFuOiBWYWx5cmlhbjtcblxuZnVuY3Rpb24gZmxhdChhcnJheTogYW55KSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGFycmF5KSA/IGFycmF5LmZsYXQoSW5maW5pdHkpIDogW2FycmF5XTtcbn1cblxubGV0IGFkZFBhdGggPSAocm91dGVyOiBSb3V0ZXIsIG1ldGhvZDogc3RyaW5nLCBwYXRoOiBzdHJpbmcsIG1pZGRsZXdhcmVzOiBhbnlbXSkgPT4ge1xuICBpZiAobWlkZGxld2FyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IHJlYWxwYXRoID0gcGF0aC5yZXBsYWNlKC8oXFxTKShcXC8rKSQvLCBcIiQxXCIpO1xuXG4gIC8vIEZpbmQgdGhlIGV4cHJlc3MgbGlrZSBwYXJhbXNcbiAgbGV0IHBhcmFtcyA9IHJlYWxwYXRoLm1hdGNoKC86KFxcdyspPy9naSkgfHwgW107XG5cbiAgLy8gU2V0IHRoZSBuYW1lcyBvZiB0aGUgcGFyYW1zIGZvdW5kXG4gIGZvciAobGV0IHBhcmFtIGluIHBhcmFtcykge1xuICAgIHBhcmFtc1twYXJhbV0gPSBwYXJhbXNbcGFyYW1dLnNsaWNlKDEpO1xuICB9XG5cbiAgbGV0IHJlZ2V4cFBhdGggPSBcIl5cIiArIHJlYWxwYXRoLnJlcGxhY2UoLzooXFx3KykvZ2ksIFwiKFteXFxcXC9cXFxcc10rKVwiKSArIFwiJFwiO1xuXG4gIHJvdXRlci5wYXRocy5wdXNoKHtcbiAgICBtZXRob2QsXG4gICAgcGF0aDogcmVhbHBhdGgsXG4gICAgbWlkZGxld2FyZXM6IGZsYXQobWlkZGxld2FyZXMpLFxuICAgIHBhcmFtcyxcbiAgICByZWdleHA6IG5ldyBSZWdFeHAocmVnZXhwUGF0aCwgXCJpXCIpXG4gIH0pO1xufTtcblxuZnVuY3Rpb24gcGFyc2VRdWVyeShxdWVyeVBhcnRzPzogc3RyaW5nKSB7XG4gIGxldCBwYXJ0cyA9IHF1ZXJ5UGFydHMgPyBxdWVyeVBhcnRzLnNwbGl0KFwiJlwiLCAyMCkgOiBbXTtcbiAgbGV0IHF1ZXJ5OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gIGxldCBpID0gMDtcbiAgbGV0IG5hbWVWYWx1ZTtcblxuICBmb3IgKDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgbmFtZVZhbHVlID0gcGFydHNbaV0uc3BsaXQoXCI9XCIsIDIpO1xuICAgIHF1ZXJ5W25hbWVWYWx1ZVswXV0gPSBuYW1lVmFsdWVbMV07XG4gIH1cblxuICByZXR1cm4gcXVlcnk7XG59XG5cbmZ1bmN0aW9uIHNlYXJjaE1pZGRsZXdhcmVzKHJvdXRlcjogUm91dGVySW50ZXJmYWNlLCBwYXRoOiBzdHJpbmcpOiBNaWRkbGV3YXJlcyB7XG4gIGxldCBpO1xuICBsZXQgaztcbiAgbGV0IGl0ZW07XG4gIGxldCBtYXRjaDtcbiAgbGV0IGtleTtcbiAgbGV0IG1pZGRsZXdhcmVzOiBNaWRkbGV3YXJlcyA9IFtdO1xuICBsZXQgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gIGxldCBtYXRjaGVzID0gW107XG4gIHJvdXRlci5wYXJhbXMgPSB7fTtcbiAgcm91dGVyLnBhdGggPSBcIlwiO1xuICByb3V0ZXIubWF0Y2hlcyA9IFtdO1xuXG4gIC8vIFNlYXJjaCBmb3IgbWlkZGxld2FyZXNcbiAgZm9yIChpID0gMDsgaSA8IHJvdXRlci5wYXRocy5sZW5ndGg7IGkrKykge1xuICAgIGl0ZW0gPSByb3V0ZXIucGF0aHNbaV07XG5cbiAgICBtYXRjaCA9IGl0ZW0ucmVnZXhwLmV4ZWMocGF0aCk7XG4gICAgLy8gSWYgd2UgZm91bmQgbWlkZGxld2FyZXNcbiAgICBpZiAoQXJyYXkuaXNBcnJheShtYXRjaCkpIHtcbiAgICAgIG1pZGRsZXdhcmVzLnB1c2goLi4uaXRlbS5taWRkbGV3YXJlcyk7XG4gICAgICBtYXRjaC5zaGlmdCgpO1xuXG4gICAgICAvLyBQYXJzZSBwYXJhbXNcbiAgICAgIGZvciAoayA9IDA7IGsgPCBpdGVtLnBhcmFtcy5sZW5ndGg7IGsrKykge1xuICAgICAgICBrZXkgPSBpdGVtLnBhcmFtc1trXTtcbiAgICAgICAgcGFyYW1zW2tleV0gPSBtYXRjaC5zaGlmdCgpO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAobWF0Y2gubGVuZ3RoKSB7XG4gICAgICAgIG1hdGNoZXMucHVzaChtYXRjaC5zaGlmdCgpIGFzIHN0cmluZyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtLm1ldGhvZCA9PT0gXCJhZGRcIikge1xuICAgICAgICByb3V0ZXIucGF0aCA9IGl0ZW0ucGF0aDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcm91dGVyLnBhcmFtcyA9IHBhcmFtcztcbiAgcm91dGVyLm1hdGNoZXMgPSBtYXRjaGVzO1xuXG4gIHJldHVybiBtaWRkbGV3YXJlcztcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoQ29tcG9uZW50KFxuICByb3V0ZXI6IFJvdXRlckludGVyZmFjZSxcbiAgbWlkZGxld2FyZXM6IE1pZGRsZXdhcmVzXG4pOiBQcm9taXNlPENvbXBvbmVudCB8IFZhbHlyaWFuQ29tcG9uZW50IHwgVm5vZGVDb21wb25lbnRJbnRlcmZhY2UgfCBmYWxzZSB8IHZvaWQ+IHtcbiAgbGV0IHJlc3BvbnNlO1xuICBsZXQgcmVxOiBSZXF1ZXN0ID0ge1xuICAgIHBhcmFtczogcm91dGVyLnBhcmFtcyxcbiAgICBxdWVyeTogcm91dGVyLnF1ZXJ5LFxuICAgIHVybDogcm91dGVyLnVybCxcbiAgICBwYXRoOiByb3V0ZXIucGF0aCxcbiAgICBtYXRjaGVzOiByb3V0ZXIubWF0Y2hlcyxcbiAgICByZWRpcmVjdDogKHBhdGg6IHN0cmluZywgcGFyZW50Q29tcG9uZW50PzogQ29tcG9uZW50IHwgVmFseXJpYW5Db21wb25lbnQgfCBWbm9kZUNvbXBvbmVudEludGVyZmFjZSkgPT4ge1xuICAgICAgcm91dGVyLmdvKHBhdGgsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuICBsZXQgaSA9IDA7XG5cbiAgZm9yICg7IGkgPCBtaWRkbGV3YXJlcy5sZW5ndGg7IGkrKykge1xuICAgIHJlc3BvbnNlID0gYXdhaXQgbWlkZGxld2FyZXNbaV0ocmVxLCByZXNwb25zZSk7XG5cbiAgICBpZiAocmVzcG9uc2UgIT09IHVuZGVmaW5lZCAmJiBsb2NhbFZhbHlyaWFuLmlzQ29tcG9uZW50KHJlc3BvbnNlKSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cblxuICAgIGlmIChyZXNwb25zZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJvdXRlciBpbXBsZW1lbnRzIFJvdXRlckludGVyZmFjZSB7XG4gIHBhdGhzOiBQYXRoW10gPSBbXTtcbiAgY29udGFpbmVyOiBFbGVtZW50IHwgc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHF1ZXJ5OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+ID0ge307XG4gIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgdXJsOiBzdHJpbmcgPSBcIlwiO1xuICBwYXRoOiBzdHJpbmcgPSBcIlwiO1xuICBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlciB8IGFueT4gPSB7fTtcbiAgbWF0Y2hlczogc3RyaW5nW10gPSBbXTtcblxuICBhZGQocGF0aDogc3RyaW5nLCAuLi5hcmdzOiBNaWRkbGV3YXJlcyk6IFJvdXRlciB7XG4gICAgYWRkUGF0aCh0aGlzLCBcImFkZFwiLCBwYXRoLCBhcmdzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHVzZSguLi5hcmdzOiBNaWRkbGV3YXJlcyB8IFJvdXRlcltdKTogUm91dGVyIHtcbiAgICBsZXQgcGF0aCA9IHR5cGVvZiBhcmdzWzBdID09PSBcInN0cmluZ1wiID8gYXJncy5zaGlmdCgpIDogXCIvXCI7XG4gICAgbGV0IGk7XG4gICAgbGV0IGs7XG4gICAgbGV0IHN1YnJvdXRlcjtcbiAgICBsZXQgaXRlbTtcbiAgICBsZXQgc3VicGF0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzdWJyb3V0ZXIgPSBhcmdzW2ldO1xuICAgICAgaWYgKHR5cGVvZiBzdWJyb3V0ZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBhZGRQYXRoKHRoaXMsIFwidXNlXCIsIGAke3BhdGh9LipgLCBbc3Vicm91dGVyXSk7XG4gICAgICB9IGVsc2UgaWYgKHN1YnJvdXRlci5wYXRocykge1xuICAgICAgICBmb3IgKGsgPSAwOyBrIDwgc3Vicm91dGVyLnBhdGhzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgaXRlbSA9IHN1YnJvdXRlci5wYXRoc1trXTtcbiAgICAgICAgICBzdWJwYXRoID0gYCR7cGF0aH0ke2l0ZW0ucGF0aH1gLnJlcGxhY2UoL15cXC9cXC8vLCBcIi9cIik7XG4gICAgICAgICAgYWRkUGF0aCh0aGlzLCBpdGVtLm1ldGhvZCwgc3VicGF0aCwgaXRlbS5taWRkbGV3YXJlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJvdXRlcygpIHtcbiAgICBsZXQgcm91dGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIHRoaXMucGF0aHMuZm9yRWFjaCgocGF0aCkgPT4ge1xuICAgICAgaWYgKHBhdGgubWV0aG9kID09PSBcImFkZFwiKSB7XG4gICAgICAgIHJvdXRlcy5wdXNoKHBhdGgucGF0aCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJvdXRlcztcbiAgfVxuXG4gIGFzeW5jIGdvKHBhdGg6IHN0cmluZywgcGFyZW50Q29tcG9uZW50PzogQ29tcG9uZW50IHwgVmFseXJpYW5Db21wb25lbnQpOiBQcm9taXNlPHN0cmluZyB8IHZvaWQ+IHtcbiAgICBpZiAoIXBhdGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInJvdXRlci51cmwucmVxdWlyZWRcIik7XG4gICAgfVxuXG4gICAgbGV0IHBhcnRzID0gcGF0aC5zcGxpdChcIj9cIiwgMik7XG4gICAgbGV0IHVybFBhcnRzID0gcGFydHNbMF0ucmVwbGFjZSgvKC4rKVxcLyQvLCBcIiQxXCIpO1xuICAgIGxldCBxdWVyeVBhcnRzID0gcGFydHNbMV07XG4gICAgdGhpcy51cmwgPSBwYXRoO1xuICAgIHRoaXMucXVlcnkgPSBwYXJzZVF1ZXJ5KHF1ZXJ5UGFydHMpO1xuXG4gICAgbGV0IG1pZGRsZXdhcmVzID0gc2VhcmNoTWlkZGxld2FyZXModGhpcywgdXJsUGFydHMpO1xuXG4gICAgbGV0IGNvbXBvbmVudCA9IGF3YWl0IHNlYXJjaENvbXBvbmVudCh0aGlzLCBtaWRkbGV3YXJlcyk7XG5cbiAgICBpZiAoY29tcG9uZW50ID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSB1cmwgJHtwYXRofSByZXF1ZXN0ZWQgd2Fzbid0IGZvdW5kYCk7XG4gICAgfVxuXG4gICAgaWYgKGxvY2FsVmFseXJpYW4uaXNDb21wb25lbnQocGFyZW50Q29tcG9uZW50KSkge1xuICAgICAgbGV0IGNoaWxkQ29tcG9uZW50ID0gbG9jYWxWYWx5cmlhbi5pc1Zub2RlQ29tcG9uZW50KGNvbXBvbmVudCkgPyBjb21wb25lbnQgOiBsb2NhbFZhbHlyaWFuKGNvbXBvbmVudCwge30pO1xuICAgICAgaWYgKGxvY2FsVmFseXJpYW4uaXNWbm9kZUNvbXBvbmVudChwYXJlbnRDb21wb25lbnQpKSB7XG4gICAgICAgIHBhcmVudENvbXBvbmVudC5jaGlsZHJlbi5wdXNoKGNoaWxkQ29tcG9uZW50KTtcbiAgICAgICAgY29tcG9uZW50ID0gcGFyZW50Q29tcG9uZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tcG9uZW50ID0gbG9jYWxWYWx5cmlhbihwYXJlbnRDb21wb25lbnQsIHt9LCBjaGlsZENvbXBvbmVudCkgYXMgVm5vZGVDb21wb25lbnRJbnRlcmZhY2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFsb2NhbFZhbHlyaWFuLmlzTm9kZUpzKSB7XG4gICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgXCJcIiwgcGF0aCk7XG4gICAgfVxuXG4gICAgaWYgKGxvY2FsVmFseXJpYW4uaXNNb3VudGVkICYmIGxvY2FsVmFseXJpYW4uY29tcG9uZW50ID09PSBjb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBsb2NhbFZhbHlyaWFuLnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgcmV0dXJuIGxvY2FsVmFseXJpYW4ubW91bnQodGhpcy5jb250YWluZXIsIGNvbXBvbmVudCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0T25DbGlja0hhbmRsZXIodXJsOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgdXJsID09PSBcInN0cmluZ1wiICYmIHVybC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuZ28odXJsKTtcbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICB9XG59XG5cbmRlY2xhcmUgbW9kdWxlIFwiVmFseXJpYW5cIiB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBpbnRlcmZhY2UgVmFseXJpYW4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIG1vdW50Um91dGVyPyhjb250YWluZXI6IEVsZW1lbnQgfCBzdHJpbmcsIHJvdXRlcjogUm91dGVyKTogc3RyaW5nIHwgdm9pZDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGx1Z2luKHY6IFZhbHlyaWFuKSB7XG4gIGxvY2FsVmFseXJpYW4gPSB2O1xuICBsb2NhbFZhbHlyaWFuLm1vdW50Um91dGVyID0gKGVsZW1lbnRDb250YWluZXIsIHJvdXRlck9yQ29tcG9uZW50KSA9PiB7XG4gICAgaWYgKHJvdXRlck9yQ29tcG9uZW50IGluc3RhbmNlb2YgUm91dGVyKSB7XG4gICAgICByb3V0ZXJPckNvbXBvbmVudC5jb250YWluZXIgPSBlbGVtZW50Q29udGFpbmVyO1xuICAgICAgbG9jYWxWYWx5cmlhbi5yZWRpcmVjdCA9IHJvdXRlck9yQ29tcG9uZW50LmdvLmJpbmQocm91dGVyT3JDb21wb25lbnQpO1xuXG4gICAgICAvLyBBY3RpdmF0ZSB0aGUgdXNlIG9mIHRoZSByb3V0ZXJcbiAgICAgIGlmICghbG9jYWxWYWx5cmlhbi5pc05vZGVKcykge1xuICAgICAgICBmdW5jdGlvbiBvblBvcFN0YXRlR29Ub1JvdXRlKCkge1xuICAgICAgICAgIChyb3V0ZXJPckNvbXBvbmVudCBhcyB1bmtub3duIGFzIFJvdXRlcikuZ28oZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgb25Qb3BTdGF0ZUdvVG9Sb3V0ZSwgZmFsc2UpO1xuICAgICAgICBvblBvcFN0YXRlR29Ub1JvdXRlKCk7XG4gICAgICB9XG5cbiAgICAgIGxvY2FsVmFseXJpYW4uZGlyZWN0aXZlKFwicm91dGVcIiwgKHVybCwgdm5vZGUsIG9sZG5vZGUpID0+IHtcbiAgICAgICAgbG9jYWxWYWx5cmlhbi5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIHVybCwgdm5vZGUsIG9sZG5vZGUpO1xuICAgICAgICBsb2NhbFZhbHlyaWFuLnNldEF0dHJpYnV0ZShcIm9uY2xpY2tcIiwgcm91dGVyT3JDb21wb25lbnQuZ2V0T25DbGlja0hhbmRsZXIodXJsKSwgdm5vZGUsIG9sZG5vZGUpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gUm91dGVyO1xufVxuIl0sIm1hcHBpbmdzIjoiZ0pBQUFBLEVBQUEsRyx5REFBQUMsQ0FBQUQsRUFBQSxDQUFBRSxPQUFBLElBQUFBLEVBQUFDLE9BQUEsSUFBQUEsSUFBQSxJLEVBbURJQyxFQW5ESkMsRyxFQUFBTCxFLDBNQXlEQSxJQUFJTSxFQUFVLENBQUNDLEVBQWdCQyxFQUFnQkMsRUFBY0MsS0FDM0Qs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