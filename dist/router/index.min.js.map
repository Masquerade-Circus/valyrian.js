//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbmRleF9leHBvcnRzIiwiX19leHBvcnQiLCJSb3V0ZXIiLCJSb3V0ZXJFcnJvciIsImFmdGVyUm91dGUiLCJiZWZvcmVSb3V0ZSIsIm1vdW50Um91dGVyIiwicmVkaXJlY3QiLCJfX0VYUE9SVFNfXyIsImltcG9ydF92YWx5cmlhbiIsInJlcXVpcmUiLCJpbXBvcnRfY29udGV4dCIsImltcG9ydF91dGlscyIsImdldFBhdGhXaXRob3V0TGFzdFNsYXNoIiwicGF0aCIsInBhdGhXaXRob3V0TGFzdFNsYXNoIiwicmVwbGFjZSIsImlzRXJyb3JDbGFzc0xpa2UiLCJ2YWx1ZSIsIkJvb2xlYW4iLCJpc1N0cmluZyIsIm5hbWUiLCJpbmNsdWRlcyIsImNyZWF0ZVJvdXRlQ2FsbGJhY2tDb2xsZWN0aW9uIiwiYmVmb3JlIiwiU2V0IiwiYWZ0ZXIiLCJhY3RpdmVSb3V0ZXIiLCJyb3V0ZURpcmVjdGl2ZVJlZ2lzdGVyZWQiLCJyb3V0ZXJDb250ZXh0U2NvcGUiLCJjcmVhdGVDb250ZXh0U2NvcGUiLCJyZXNvbHZlUm91dGVyRnJvbUNvbnRleHQiLCJnZXRDb250ZXh0IiwiZW5zdXJlUm91dGVEaXJlY3RpdmUiLCJkaXJlY3RpdmUiLCJ1cmwiLCJ2bm9kZSIsInNldEF0dHJpYnV0ZSIsInJvdXRlciIsImdldE9uQ2xpY2tIYW5kbGVyIiwiYXJlRXF1YWxTaGFsbG93IiwiYSIsImIiLCJhS2V5cyIsIk9iamVjdCIsImtleXMiLCJiS2V5cyIsImxlbmd0aCIsImtleSIsIlN0cmluZyIsIlJvdXRlVHJlZSIsInJvb3QiLCJzZWdtZW50IiwiY2hpbGRyZW4iLCJNYXAiLCJpc0R5bmFtaWMiLCJhZGRSb3V0ZSIsIm1pZGRsZXdhcmVzIiwic2VnbWVudHMiLCJzcGxpdCIsImZpbHRlciIsImN1cnJlbnROb2RlIiwidGhpcyIsInN0YXJ0c1dpdGgiLCJoYXMiLCJzZXQiLCJwYXJhbUtleSIsInNsaWNlIiwiZ2V0IiwiZmluZFJvdXRlIiwicGFyYW1zIiwid2lsZGNhcmRNaWRkbGV3YXJlcyIsInNlZ21lbnRzTGVuZ3RoIiwiaSIsImZvdW5kIiwiY2hpbGQiLCJwdXNoIiwiYWxsTWlkZGxld2FyZXMiLCJFcnJvciIsInN0YXR1cyIsIl9Sb3V0ZXIiLCJyb3V0ZVRyZWUiLCJjb250YWluZXIiLCJxdWVyeSIsIm9wdGlvbnMiLCJtYXRjaGVzIiwicGF0aFByZWZpeCIsImVycm9ySGFuZGxlcnMiLCJhY3RpdmVSb3V0ZUNhbGxiYWNrcyIsInBlbmRpbmdSb3V0ZUNhbGxiYWNrcyIsImNhbGxiYWNrUmVnaXN0cmF0aW9uVGFyZ2V0IiwiY3VycmVudFJvdXRlIiwiY29uc3RydWN0b3IiLCJnZXRSZWdpc3RyYXRpb25DYWxsYmFja3MiLCJiZWdpblBlbmRpbmdSb3V0ZUNhbGxiYWNrc0NvbGxlY3Rpb24iLCJjb21taXRQZW5kaW5nUm91dGVDYWxsYmFja3NDb2xsZWN0aW9uIiwicm9sbGJhY2tQZW5kaW5nUm91dGVDYWxsYmFja3NDb2xsZWN0aW9uIiwiY2FsbGJhY2siLCJhZGQiLCJkZWxldGUiLCJhcmdzIiwiZmxhdEFyZ3MiLCJhcnJheSIsIkFycmF5IiwiaXNBcnJheSIsImZsYXQiLCJJbmZpbml0eSIsInNoaWZ0Iiwic3Vicm91dGVyIiwic3Vicm91dGUiLCJyb3V0ZXMiLCJzdWJyb3V0ZVBhdGgiLCJzb21lIiwiaXRlbSIsImlzRnVuY3Rpb24iLCJmaXJzdEFyZyIsImNvbmRpdGlvbiIsImlzTnVtYmVyIiwiaGFuZGxlcnMiLCJnZXRBbGxSb3V0ZXMiLCJnbyIsInBhcmVudENvbXBvbmVudCIsImhhbmRsZUVycm9yIiwidGVzdCIsImNvbnN0cnVjdGVkUGF0aCIsInBhcnRzIiwibmV4dFF1ZXJ5IiwicXVlcnlQYXJ0cyIsIm5hbWVWYWx1ZSIsImlzTmFOIiwiTnVtYmVyIiwicGFyc2VRdWVyeSIsImZpbmFsUGF0aCIsInJvdXRlIiwiZmluYWxQYXRoUGFydHMiLCJwb3AiLCJ3aWxkY2FyZFJvdXRlIiwiam9pbiIsImVycm9yIiwicnVuV2l0aENvbnRleHQiLCJhc3luYyIsIm5leHRSb3V0ZSIsInJvdXRlQ2hhbmdlZCIsImhhc1JvdXRlQ2hhbmdlZCIsInJvdXRlVHJhbnNpdGlvbkNvbXBsZXRlZCIsIm1vdW50ZWRSZXN1bHQiLCJjb21wb25lbnQiLCJzZWFyY2hDb21wb25lbnQiLCJpc0NvbXBvbmVudCIsImlzVm5vZGVDb21wb25lbnQiLCJjaGlsZENvbXBvbmVudCIsInYiLCJpc05vZGVKcyIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJzZWFyY2giLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwibW91bnQiLCJwcmV2aW91c1JvdXRlIiwicHJldmlvdXNBZnRlckNhbGxiYWNrcyIsImUiLCJidXR0b24iLCJjdHJsS2V5IiwibWV0YUtleSIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiZGVmYXVsdFByZXZlbnRlZCIsInByZXZlbnREZWZhdWx0Iiwibm9kZSIsInByZWZpeCIsIm5ld1ByZWZpeCIsImNyZWF0ZVJlcXVlc3QiLCJnZXRFcnJvckNvbmRpdGlvbk1pZGRsZXdhcmVzIiwiY29kZSIsIm1lc3NhZ2UiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJtaWRkbGV3YXJlIiwiZXJyIiwibmV4dEVycm9yIiwiY2F1c2UiLCJlcnJvckNhdXNlQ291bnQiLCJzZWVuIiwiY3VycmVudEVycm9yIiwiY3VycmVudCIsInByZXZlbnRQdXNoU3RhdGUiLCJjb25zb2xlIiwid2FybiIsImVsZW1lbnRDb250YWluZXIiLCJvblBvcFN0YXRlR29Ub1JvdXRlIiwicGF0aFdpdGhvdXRQcmVmaXgiLCJkb2N1bWVudCIsIlJlZ0V4cCIsImFkZEV2ZW50TGlzdGVuZXIiXSwic291cmNlcyI6WyIuLi8uLi9saWIvcm91dGVyL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXG5pbXBvcnQge1xuICBDb21wb25lbnQsXG4gIFBPSk9Db21wb25lbnQsXG4gIFZub2RlQ29tcG9uZW50SW50ZXJmYWNlLFxuICBWbm9kZVdpdGhEb20sXG4gIGN1cnJlbnQsXG4gIGRpcmVjdGl2ZSxcbiAgaXNDb21wb25lbnQsXG4gIGlzTm9kZUpzLFxuICBpc1Zub2RlQ29tcG9uZW50LFxuICBtb3VudCxcbiAgc2V0QXR0cmlidXRlLFxuICB2XG59IGZyb20gXCJ2YWx5cmlhbi5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQ29udGV4dFNjb3BlLCBnZXRDb250ZXh0LCBydW5XaXRoQ29udGV4dCB9IGZyb20gXCJ2YWx5cmlhbi5qcy9jb250ZXh0XCI7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uLCBpc051bWJlciwgaXNTdHJpbmcgfSBmcm9tIFwidmFseXJpYW4uanMvdXRpbHNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0IHtcbiAgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBxdWVyeTogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgdXJsOiBzdHJpbmc7XG4gIHBhdGg6IHN0cmluZztcbiAgbWF0Y2hlczogc3RyaW5nW107XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICByZWRpcmVjdDogKHBhdGg6IHN0cmluZykgPT4gUHJvbWlzZTxzdHJpbmcgfCB2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNaWRkbGV3YXJlIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIChcbiAgICByZXE6IFJlcXVlc3QsXG4gICAgZXJyPzogYW55XG4gICk6XG4gICAgfCBQcm9taXNlPGFueSB8IENvbXBvbmVudCB8IFBPSk9Db21wb25lbnQgfCBWbm9kZUNvbXBvbmVudEludGVyZmFjZT5cbiAgICB8IGFueVxuICAgIHwgQ29tcG9uZW50XG4gICAgfCBQT0pPQ29tcG9uZW50XG4gICAgfCBWbm9kZUNvbXBvbmVudEludGVyZmFjZTtcbn1cblxuaW50ZXJmYWNlIE1pZGRsZXdhcmVzIGV4dGVuZHMgQXJyYXk8TWlkZGxld2FyZT4ge31cblxuZnVuY3Rpb24gZmxhdChhcnJheTogYW55KSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGFycmF5KSA/IGFycmF5LmZsYXQoSW5maW5pdHkpIDogW2FycmF5XTtcbn1cblxuZnVuY3Rpb24gZ2V0UGF0aFdpdGhvdXRQcmVmaXgocGF0aDogc3RyaW5nLCBwcmVmaXg6IHN0cmluZykge1xuICByZXR1cm4gZ2V0UGF0aFdpdGhvdXRMYXN0U2xhc2gocGF0aC5yZXBsYWNlKG5ldyBSZWdFeHAoYF4ke3ByZWZpeH1gKSwgXCJcIikpO1xufVxuXG5mdW5jdGlvbiBnZXRQYXRoV2l0aG91dExhc3RTbGFzaChwYXRoOiBzdHJpbmcpIHtcbiAgbGV0IHBhdGhXaXRob3V0TGFzdFNsYXNoID0gcGF0aC5yZXBsYWNlKC9cXC8kLywgXCJcIik7XG4gIGlmIChwYXRoV2l0aG91dExhc3RTbGFzaCA9PT0gXCJcIikge1xuICAgIHBhdGhXaXRob3V0TGFzdFNsYXNoID0gXCIvXCI7XG4gIH1cbiAgcmV0dXJuIHBhdGhXaXRob3V0TGFzdFNsYXNoO1xufVxuXG5mdW5jdGlvbiBpc0Vycm9yQ2xhc3NMaWtlKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBFcnJvciB8IHR5cGVvZiBFcnJvciB7XG4gIHJldHVybiBCb29sZWFuKHZhbHVlKSAmJiBpc1N0cmluZyh2YWx1ZS5uYW1lKSAmJiB2YWx1ZS5uYW1lLmluY2x1ZGVzKFwiRXJyb3JcIik7XG59XG5cbi8vIFBhcnNlIGEgcXVlcnkgc3RyaW5nIGludG8gYW4gb2JqZWN0XG5mdW5jdGlvbiBwYXJzZVF1ZXJ5KHF1ZXJ5UGFydHM/OiBzdHJpbmcpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgY29uc3QgcGFydHMgPSBxdWVyeVBhcnRzID8gcXVlcnlQYXJ0cy5zcGxpdChcIiZcIikgOiBbXTtcbiAgY29uc3QgcXVlcnk6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICBmb3IgKGNvbnN0IG5hbWVWYWx1ZSBvZiBwYXJ0cykge1xuICAgIGNvbnN0IFtuYW1lLCB2YWx1ZV0gPSBuYW1lVmFsdWUuc3BsaXQoXCI9XCIsIDIpO1xuICAgIHF1ZXJ5W25hbWVdID1cbiAgICAgIGlzTmFOKE51bWJlcih2YWx1ZSkpID09PSBmYWxzZSA/IE51bWJlcih2YWx1ZSkgOiB2YWx1ZSA9PT0gXCJ0cnVlXCIgPyB0cnVlIDogdmFsdWUgPT09IFwiZmFsc2VcIiA/IGZhbHNlIDogdmFsdWU7XG4gIH1cblxuICByZXR1cm4gcXVlcnk7XG59XG5cbnR5cGUgUm91dGVTbmFwc2hvdCA9IHtcbiAgcGF0aDogc3RyaW5nO1xuICBxdWVyeTogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufTtcblxudHlwZSBSb3V0ZUNhbGxiYWNrID0gKFxuICBuZXh0Um91dGU6IFJvdXRlU25hcHNob3QsXG4gIGN1cnJlbnRSb3V0ZTogUm91dGVTbmFwc2hvdCB8IG51bGxcbikgPT4gYm9vbGVhbiB8IHZvaWQgfCBQcm9taXNlPGJvb2xlYW4gfCB2b2lkPjtcblxudHlwZSBSb3V0ZUNhbGxiYWNrQ29sbGVjdGlvbiA9IHtcbiAgYmVmb3JlOiBTZXQ8Um91dGVDYWxsYmFjaz47XG4gIGFmdGVyOiBTZXQ8Um91dGVDYWxsYmFjaz47XG59O1xuXG5mdW5jdGlvbiBjcmVhdGVSb3V0ZUNhbGxiYWNrQ29sbGVjdGlvbigpOiBSb3V0ZUNhbGxiYWNrQ29sbGVjdGlvbiB7XG4gIHJldHVybiB7XG4gICAgYmVmb3JlOiBuZXcgU2V0PFJvdXRlQ2FsbGJhY2s+KCksXG4gICAgYWZ0ZXI6IG5ldyBTZXQ8Um91dGVDYWxsYmFjaz4oKVxuICB9O1xufVxuXG5sZXQgYWN0aXZlUm91dGVyOiBSb3V0ZXIgfCBudWxsID0gbnVsbDtcbmxldCByb3V0ZURpcmVjdGl2ZVJlZ2lzdGVyZWQgPSBmYWxzZTtcbmNvbnN0IHJvdXRlckNvbnRleHRTY29wZSA9IGNyZWF0ZUNvbnRleHRTY29wZTxSb3V0ZXI+KFwicm91dGVyXCIpO1xuXG5mdW5jdGlvbiByZXNvbHZlUm91dGVyRnJvbUNvbnRleHQoKTogUm91dGVyIHwgbnVsbCB7XG4gIHJldHVybiBnZXRDb250ZXh0KHJvdXRlckNvbnRleHRTY29wZSkgfHwgYWN0aXZlUm91dGVyO1xufVxuXG5mdW5jdGlvbiBlbnN1cmVSb3V0ZURpcmVjdGl2ZSgpIHtcbiAgaWYgKHJvdXRlRGlyZWN0aXZlUmVnaXN0ZXJlZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGRpcmVjdGl2ZShcInJvdXRlXCIsICh1cmw6IHN0cmluZywgdm5vZGU6IFZub2RlV2l0aERvbSk6IHZvaWQgPT4ge1xuICAgIHNldEF0dHJpYnV0ZShcImhyZWZcIiwgdXJsLCB2bm9kZSk7XG5cbiAgICBjb25zdCByb3V0ZXIgPSByZXNvbHZlUm91dGVyRnJvbUNvbnRleHQoKTtcbiAgICBpZiAocm91dGVyKSB7XG4gICAgICBzZXRBdHRyaWJ1dGUoXCJvbmNsaWNrXCIsIHJvdXRlci5nZXRPbkNsaWNrSGFuZGxlcih1cmwpLCB2bm9kZSk7XG4gICAgfVxuICB9KTtcblxuICByb3V0ZURpcmVjdGl2ZVJlZ2lzdGVyZWQgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBhcmVFcXVhbFNoYWxsb3coYTogUmVjb3JkPHN0cmluZywgYW55PiwgYjogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICBjb25zdCBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xuICBpZiAoYUtleXMubGVuZ3RoICE9PSBiS2V5cy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgb2YgYUtleXMpIHtcbiAgICBpZiAoU3RyaW5nKGFba2V5XSkgIT09IFN0cmluZyhiW2tleV0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBoYXNSb3V0ZUNoYW5nZWQobmV4dFJvdXRlOiBSb3V0ZVNuYXBzaG90LCBjdXJyZW50Um91dGU6IFJvdXRlU25hcHNob3QgfCBudWxsKSB7XG4gIGlmICghY3VycmVudFJvdXRlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIChcbiAgICBuZXh0Um91dGUucGF0aCAhPT0gY3VycmVudFJvdXRlLnBhdGggfHxcbiAgICAhYXJlRXF1YWxTaGFsbG93KG5leHRSb3V0ZS5xdWVyeSwgY3VycmVudFJvdXRlLnF1ZXJ5KSB8fFxuICAgICFhcmVFcXVhbFNoYWxsb3cobmV4dFJvdXRlLnBhcmFtcywgY3VycmVudFJvdXRlLnBhcmFtcylcbiAgKTtcbn1cblxuaW50ZXJmYWNlIFJvdXRlTm9kZSB7XG4gIHNlZ21lbnQ6IHN0cmluZztcbiAgY2hpbGRyZW46IE1hcDxzdHJpbmcsIFJvdXRlTm9kZT47XG4gIG1pZGRsZXdhcmVzPzogTWlkZGxld2FyZXM7XG4gIHBhcmFtS2V5Pzogc3RyaW5nO1xuICBpc0R5bmFtaWM6IGJvb2xlYW47XG59XG5cbmNsYXNzIFJvdXRlVHJlZSB7XG4gIHJvb3Q6IFJvdXRlTm9kZSA9IHsgc2VnbWVudDogXCJcIiwgY2hpbGRyZW46IG5ldyBNYXAoKSwgaXNEeW5hbWljOiBmYWxzZSB9O1xuXG4gIGFkZFJvdXRlKHBhdGg6IHN0cmluZywgbWlkZGxld2FyZXM6IE1pZGRsZXdhcmVzKSB7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBwYXRoID09PSBcIi9cIiA/IFtwYXRoXSA6IHBhdGguc3BsaXQoXCIvXCIpLmZpbHRlcihCb29sZWFuKTsgLy8gRGl2aWRlIHRoZSBwYXRoIGludG8gc2VnbWVudHNcbiAgICBsZXQgY3VycmVudE5vZGUgPSB0aGlzLnJvb3Q7XG5cbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGNvbnN0IGlzRHluYW1pYyA9IHNlZ21lbnQuc3RhcnRzV2l0aChcIjpcIik7XG4gICAgICBjb25zdCBrZXkgPSBpc0R5bmFtaWMgPyBcIjpcIiA6IHNlZ21lbnQ7IC8vIElmIHRoZSBzZWdtZW50IGlzIGR5bmFtaWMsIHVzZSBcIjpcIiBhcyBrZXlcblxuICAgICAgaWYgKCFjdXJyZW50Tm9kZS5jaGlsZHJlbi5oYXMoa2V5KSkge1xuICAgICAgICBjdXJyZW50Tm9kZS5jaGlsZHJlbi5zZXQoa2V5LCB7XG4gICAgICAgICAgc2VnbWVudDogc2VnbWVudCxcbiAgICAgICAgICBjaGlsZHJlbjogbmV3IE1hcCgpLFxuICAgICAgICAgIGlzRHluYW1pYzogaXNEeW5hbWljLFxuICAgICAgICAgIHBhcmFtS2V5OiBpc0R5bmFtaWMgPyBzZWdtZW50LnNsaWNlKDEpIDogdW5kZWZpbmVkXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLmNoaWxkcmVuLmdldChrZXkpITtcbiAgICB9XG5cbiAgICBjdXJyZW50Tm9kZS5taWRkbGV3YXJlcyA9IG1pZGRsZXdhcmVzOyAvLyBBc3NpZ24gdGhlIG1pZGRsZXdhcmVzIHRvIHRoZSBsYXN0IG5vZGVcbiAgfVxuXG4gIC8vIFNlYXJjaCBmb3IgYSByb3V0ZSBpbiB0aGUgdHJlZVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgc29uYXJqcy9jb2duaXRpdmUtY29tcGxleGl0eVxuICBmaW5kUm91dGUocGF0aDogc3RyaW5nKTogeyBtaWRkbGV3YXJlcz86IE1pZGRsZXdhcmVzOyBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfSB8IG51bGwge1xuICAgIGNvbnN0IHBhdGhXaXRob3V0TGFzdFNsYXNoID0gZ2V0UGF0aFdpdGhvdXRMYXN0U2xhc2gocGF0aCk7XG4gICAgY29uc3Qgc2VnbWVudHMgPVxuICAgICAgcGF0aFdpdGhvdXRMYXN0U2xhc2ggPT09IFwiL1wiID8gW3BhdGhXaXRob3V0TGFzdFNsYXNoXSA6IHBhdGhXaXRob3V0TGFzdFNsYXNoLnNwbGl0KFwiL1wiKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgbGV0IGN1cnJlbnROb2RlOiBSb3V0ZU5vZGUgfCBudWxsID0gdGhpcy5yb290O1xuICAgIGNvbnN0IHBhcmFtczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG4gICAgY29uc3Qgd2lsZGNhcmRNaWRkbGV3YXJlczogTWlkZGxld2FyZXMgPSBbXTsgLy8gTWlkZGxld2FyZXMgZm9yIHdpbGRjYXJkIHJvdXRlc1xuICAgIGNvbnN0IHNlZ21lbnRzTGVuZ3RoID0gc2VnbWVudHMubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50c0xlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIWN1cnJlbnROb2RlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzZWdtZW50ID0gc2VnbWVudHNbaV07XG5cbiAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIGNoaWxkXSBvZiBjdXJyZW50Tm9kZS5jaGlsZHJlbikge1xuICAgICAgICBpZiAoa2V5ID09PSBzZWdtZW50KSB7XG4gICAgICAgICAgY3VycmVudE5vZGUgPSBjaGlsZDtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VnbWVudCAhPT0gXCIuKlwiICYmIGtleSA9PT0gXCI6XCIpIHtcbiAgICAgICAgICBjdXJyZW50Tm9kZSA9IGNoaWxkO1xuICAgICAgICAgIHBhcmFtc1tjaGlsZC5wYXJhbUtleSFdID0gc2VnbWVudDtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoa2V5ID09PSBcIi4qXCIgJiYgIWZvdW5kKSB7XG4gICAgICAgICAgd2lsZGNhcmRNaWRkbGV3YXJlcy5wdXNoKC4uLihjaGlsZC5taWRkbGV3YXJlcyB8fCBbXSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgaWYgKGN1cnJlbnROb2RlLmNoaWxkcmVuLmhhcyhcIi4qXCIpKSB7XG4gICAgICAgICAgcmV0dXJuIHsgbWlkZGxld2FyZXM6IHdpbGRjYXJkTWlkZGxld2FyZXMsIHBhcmFtcyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgd2lsZGNhcmQgbWlkZGxld2FyZXMgdG8gdGhlIGN1cnJlbnQgbm9kZSBtaWRkbGV3YXJlc1xuICAgIGNvbnN0IGFsbE1pZGRsZXdhcmVzID0gWy4uLndpbGRjYXJkTWlkZGxld2FyZXMsIC4uLihjdXJyZW50Tm9kZS5taWRkbGV3YXJlcyB8fCBbXSldO1xuXG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIG1pZGRsZXdhcmVzLCByZXR1cm4gbnVsbFxuICAgIGlmIChhbGxNaWRkbGV3YXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGFyZSBtaWRkbGV3YXJlcywgcmV0dXJuIHRoZW1cbiAgICByZXR1cm4geyBtaWRkbGV3YXJlczogYWxsTWlkZGxld2FyZXMsIHBhcmFtcyB9O1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBSb3V0ZXJFcnJvciA9IGNsYXNzIFJvdXRlckVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZCA9IDUwMDtcbn07XG5cbnR5cGUgUm91dGVQYXJhbXMgPSBzdHJpbmcgfCBNaWRkbGV3YXJlIHwgUm91dGVyIHwgKHN0cmluZyB8IE1pZGRsZXdhcmUgfCBSb3V0ZXIgfCBSb3V0ZVBhcmFtcylbXTtcblxuZXhwb3J0IGNsYXNzIFJvdXRlciB7XG4gIHByaXZhdGUgcm91dGVUcmVlID0gbmV3IFJvdXRlVHJlZSgpO1xuICBjb250YWluZXI6IEVsZW1lbnQgfCBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcXVlcnk6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj4gPSB7fTtcbiAgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuICB1cmw6IHN0cmluZyA9IFwiXCI7XG4gIHBhdGg6IHN0cmluZyA9IFwiXCI7XG4gIHBhcmFtczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgYW55PiA9IHt9O1xuICBtYXRjaGVzOiBzdHJpbmdbXSA9IFtdO1xuICBwYXRoUHJlZml4OiBzdHJpbmcgPSBcIlwiO1xuXG4gIHByaXZhdGUgZXJyb3JIYW5kbGVyczogTWFwPG51bWJlciB8IHN0cmluZyB8IEVycm9yIHwgXCJnZW5lcmljXCIsIE1pZGRsZXdhcmVzPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBhY3RpdmVSb3V0ZUNhbGxiYWNrczogUm91dGVDYWxsYmFja0NvbGxlY3Rpb24gPSBjcmVhdGVSb3V0ZUNhbGxiYWNrQ29sbGVjdGlvbigpO1xuICBwcml2YXRlIHBlbmRpbmdSb3V0ZUNhbGxiYWNrczogUm91dGVDYWxsYmFja0NvbGxlY3Rpb24gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBjYWxsYmFja1JlZ2lzdHJhdGlvblRhcmdldDogXCJhY3RpdmVcIiB8IFwicGVuZGluZ1wiID0gXCJhY3RpdmVcIjtcbiAgcHJpdmF0ZSBjdXJyZW50Um91dGU6IFJvdXRlU25hcHNob3QgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihwYXRoUHJlZml4OiBzdHJpbmcgPSBcIlwiKSB7XG4gICAgdGhpcy5wYXRoUHJlZml4ID0gcGF0aFByZWZpeDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UmVnaXN0cmF0aW9uQ2FsbGJhY2tzKCkge1xuICAgIGlmICh0aGlzLmNhbGxiYWNrUmVnaXN0cmF0aW9uVGFyZ2V0ID09PSBcInBlbmRpbmdcIiAmJiB0aGlzLnBlbmRpbmdSb3V0ZUNhbGxiYWNrcykge1xuICAgICAgcmV0dXJuIHRoaXMucGVuZGluZ1JvdXRlQ2FsbGJhY2tzO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hY3RpdmVSb3V0ZUNhbGxiYWNrcztcbiAgfVxuXG4gIHByaXZhdGUgYmVnaW5QZW5kaW5nUm91dGVDYWxsYmFja3NDb2xsZWN0aW9uKCkge1xuICAgIHRoaXMucGVuZGluZ1JvdXRlQ2FsbGJhY2tzID0gY3JlYXRlUm91dGVDYWxsYmFja0NvbGxlY3Rpb24oKTtcbiAgICB0aGlzLmNhbGxiYWNrUmVnaXN0cmF0aW9uVGFyZ2V0ID0gXCJwZW5kaW5nXCI7XG4gIH1cblxuICBwcml2YXRlIGNvbW1pdFBlbmRpbmdSb3V0ZUNhbGxiYWNrc0NvbGxlY3Rpb24oKSB7XG4gICAgdGhpcy5hY3RpdmVSb3V0ZUNhbGxiYWNrcyA9IHRoaXMucGVuZGluZ1JvdXRlQ2FsbGJhY2tzIHx8IGNyZWF0ZVJvdXRlQ2FsbGJhY2tDb2xsZWN0aW9uKCk7XG4gICAgdGhpcy5wZW5kaW5nUm91dGVDYWxsYmFja3MgPSBudWxsO1xuICAgIHRoaXMuY2FsbGJhY2tSZWdpc3RyYXRpb25UYXJnZXQgPSBcImFjdGl2ZVwiO1xuICB9XG5cbiAgcHJpdmF0ZSByb2xsYmFja1BlbmRpbmdSb3V0ZUNhbGxiYWNrc0NvbGxlY3Rpb24oKSB7XG4gICAgdGhpcy5wZW5kaW5nUm91dGVDYWxsYmFja3MgPSBudWxsO1xuICAgIHRoaXMuY2FsbGJhY2tSZWdpc3RyYXRpb25UYXJnZXQgPSBcImFjdGl2ZVwiO1xuICB9XG5cbiAgYmVmb3JlUm91dGUoY2FsbGJhY2s6IFJvdXRlQ2FsbGJhY2spIHtcbiAgICB0aGlzLmdldFJlZ2lzdHJhdGlvbkNhbGxiYWNrcygpLmJlZm9yZS5hZGQoY2FsbGJhY2spO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZlUm91dGVDYWxsYmFja3MuYmVmb3JlLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgICB0aGlzLnBlbmRpbmdSb3V0ZUNhbGxiYWNrcz8uYmVmb3JlLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgfTtcbiAgfVxuXG4gIGFmdGVyUm91dGUoY2FsbGJhY2s6IFJvdXRlQ2FsbGJhY2spIHtcbiAgICB0aGlzLmdldFJlZ2lzdHJhdGlvbkNhbGxiYWNrcygpLmFmdGVyLmFkZChjYWxsYmFjayk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmVSb3V0ZUNhbGxiYWNrcy5hZnRlci5kZWxldGUoY2FsbGJhY2spO1xuICAgICAgdGhpcy5wZW5kaW5nUm91dGVDYWxsYmFja3M/LmFmdGVyLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgfTtcbiAgfVxuXG4gIGFkZCguLi5hcmdzOiBSb3V0ZVBhcmFtc1tdKTogUm91dGVyIHtcbiAgICBjb25zdCBmbGF0QXJncyA9IGZsYXQoYXJncyk7XG4gICAgY29uc3QgcGF0aCA9IGdldFBhdGhXaXRob3V0TGFzdFNsYXNoKGAke3RoaXMucGF0aFByZWZpeH0ke2lzU3RyaW5nKGZsYXRBcmdzWzBdKSA/IGZsYXRBcmdzLnNoaWZ0KCkgOiBcIi8uKlwifWApO1xuXG4gICAgLy8gSWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzIGEgUm91dGVyLCBhZGQgYWxsIGl0cyByb3V0ZXNcbiAgICBpZiAoZmxhdEFyZ3MubGVuZ3RoID09PSAxICYmIGZsYXRBcmdzWzBdIGluc3RhbmNlb2YgUm91dGVyKSB7XG4gICAgICBjb25zdCBzdWJyb3V0ZXIgPSBmbGF0QXJnc1swXSBhcyBSb3V0ZXI7XG4gICAgICBmb3IgKGNvbnN0IHN1YnJvdXRlIG9mIHN1YnJvdXRlci5yb3V0ZXMoKSkge1xuICAgICAgICBjb25zdCBzdWJyb3V0ZVBhdGggPSBgJHtwYXRofSR7c3Vicm91dGV9YDtcbiAgICAgICAgdGhpcy5yb3V0ZVRyZWUuYWRkUm91dGUoc3Vicm91dGVQYXRoLCBzdWJyb3V0ZXIucm91dGVUcmVlLmZpbmRSb3V0ZShzdWJyb3V0ZSkhLm1pZGRsZXdhcmVzIHx8IFtdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVmVyaWZ5IHRoYXQgbm8gbWlkZGxld2FyZXMgYXJlIGFkZGVkIHdoZW4gYSBzdWJyb3V0ZXIgaXMgYWRkZWRcbiAgICAgIGlmIChmbGF0QXJncy5zb21lKChpdGVtKSA9PiBpdGVtIGluc3RhbmNlb2YgUm91dGVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgUm91dGVyRXJyb3IoXCJZb3UgY2Fubm90IGFkZCBtaWRkbGV3YXJlcyB3aGVuIGFkZGluZyBhIHN1YnJvdXRlci5cIik7XG4gICAgICB9XG5cbiAgICAgIC8vIFZlcmlmeSB0aGF0IGFsbCBtaWRkbGV3YXJlcyBhcmUgZnVuY3Rpb25zXG4gICAgICBpZiAoZmxhdEFyZ3Muc29tZSgoaXRlbSkgPT4gIWlzRnVuY3Rpb24oaXRlbSkpKSB7XG4gICAgICAgIHRocm93IG5ldyBSb3V0ZXJFcnJvcihcIkFsbCBtaWRkbGV3YXJlcyBtdXN0IGJlIGZ1bmN0aW9ucy5cIik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucm91dGVUcmVlLmFkZFJvdXRlKHBhdGgsIGZsYXRBcmdzIGFzIE1pZGRsZXdhcmVzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGNhdGNoKC4uLmFyZ3M6IChudW1iZXIgfCBzdHJpbmcgfCBFcnJvciB8IHR5cGVvZiBFcnJvciB8IE1pZGRsZXdhcmUpW10pOiBSb3V0ZXIge1xuICAgIGNvbnN0IGZpcnN0QXJnID0gYXJnc1swXTtcbiAgICBjb25zdCBjb25kaXRpb24gPVxuICAgICAgaXNOdW1iZXIoZmlyc3RBcmcpIHx8IGlzU3RyaW5nKGZpcnN0QXJnKSB8fCBpc0Vycm9yQ2xhc3NMaWtlKGZpcnN0QXJnKVxuICAgICAgICA/IChhcmdzLnNoaWZ0KCkgYXMgbnVtYmVyIHwgc3RyaW5nIHwgRXJyb3IpXG4gICAgICAgIDogXCJnZW5lcmljXCI7XG5cbiAgICBpZiAoIWlzTnVtYmVyKGNvbmRpdGlvbikgJiYgIWlzU3RyaW5nKGNvbmRpdGlvbikgJiYgIWlzRXJyb3JDbGFzc0xpa2UoY29uZGl0aW9uKSkge1xuICAgICAgdGhyb3cgbmV3IFJvdXRlckVycm9yKFwiVGhlIGNvbmRpdGlvbiBtdXN0IGJlIGEgbnVtYmVyLCBzdHJpbmcgb3IgYW4gaW5zdGFuY2Ugb2YgRXJyb3IuXCIpO1xuICAgIH1cblxuICAgIC8vIFZlcmlmeSB0aGF0IGFsbCBtaWRkbGV3YXJlcyBhcmUgZnVuY3Rpb25zXG4gICAgaWYgKGFyZ3Muc29tZSgoaXRlbSkgPT4gIWlzRnVuY3Rpb24oaXRlbSkpKSB7XG4gICAgICB0aHJvdyBuZXcgUm91dGVyRXJyb3IoXCJBbGwgbWlkZGxld2FyZXMgbXVzdCBiZSBmdW5jdGlvbnMuXCIpO1xuICAgIH1cblxuICAgIGxldCBoYW5kbGVycyA9IHRoaXMuZXJyb3JIYW5kbGVycy5nZXQoY29uZGl0aW9uKTtcbiAgICBpZiAoIWhhbmRsZXJzKSB7XG4gICAgICBoYW5kbGVycyA9IFtdO1xuICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLnNldChjb25kaXRpb24sIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICBoYW5kbGVycy5wdXNoKC4uLihhcmdzIGFzIE1pZGRsZXdhcmVzKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByb3V0ZXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLmdldEFsbFJvdXRlcyh0aGlzLnJvdXRlVHJlZS5yb290LCBcIlwiKTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBzb25hcmpzL2NvZ25pdGl2ZS1jb21wbGV4aXR5XG4gIGFzeW5jIGdvKFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBwYXJlbnRDb21wb25lbnQ/OiBDb21wb25lbnQgfCBQT0pPQ29tcG9uZW50IHwgVm5vZGVDb21wb25lbnRJbnRlcmZhY2VcbiAgKTogUHJvbWlzZTxzdHJpbmcgfCB2b2lkPiB7XG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihuZXcgUm91dGVyRXJyb3IoXCJUaGUgVVJMIGlzIGVtcHR5LlwiKSwgcGFyZW50Q29tcG9uZW50KTtcbiAgICB9XG5cbiAgICBpZiAoLyVbXjAtOUEtRmEtZl17Mn0vLnRlc3QocGF0aCkpIHtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZUVycm9yKG5ldyBSb3V0ZXJFcnJvcihgVGhlIFVSTCAke3BhdGh9IGlzIG1hbGZvcm1lZC5gKSk7XG4gICAgfVxuXG4gICAgY29uc3QgY29uc3RydWN0ZWRQYXRoID0gZ2V0UGF0aFdpdGhvdXRMYXN0U2xhc2goYCR7dGhpcy5wYXRoUHJlZml4fSR7cGF0aH1gKTtcbiAgICBjb25zdCBwYXJ0cyA9IGNvbnN0cnVjdGVkUGF0aC5zcGxpdChcIj9cIiwgMik7XG4gICAgY29uc3QgbmV4dFF1ZXJ5ID0gcGFyc2VRdWVyeShwYXJ0c1sxXSk7XG5cbiAgICBjb25zdCBmaW5hbFBhdGggPSBwYXJ0c1swXS5yZXBsYWNlKC8oLispXFwvJC8sIFwiJDFcIikuc3BsaXQoXCIjXCIpWzBdO1xuXG4gICAgbGV0IHJvdXRlID0gdGhpcy5yb3V0ZVRyZWUuZmluZFJvdXRlKGZpbmFsUGF0aCk7XG5cbiAgICBpZiAoIXJvdXRlIHx8ICFyb3V0ZS5taWRkbGV3YXJlcykge1xuICAgICAgLy8gSWYgdGhlIHJvdXRlIGlzIG5vdCBmb3VuZCwgc2VhcmNoIGZvciBhIHdpbGRjYXJkIHJvdXRlXG4gICAgICBjb25zdCBmaW5hbFBhdGhQYXJ0cyA9IGZpbmFsUGF0aC5zcGxpdChcIi9cIik7IC8vIERpdmlkZSB0aGUgcGF0aCBpbnRvIHNlZ21lbnRzXG5cbiAgICAgIHdoaWxlIChmaW5hbFBhdGhQYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZpbmFsUGF0aFBhcnRzLnBvcCgpOyAvLyBSZW1vdmUgdGhlIGxhc3Qgc2VnbWVudFxuICAgICAgICBjb25zdCB3aWxkY2FyZFJvdXRlID0gdGhpcy5yb3V0ZVRyZWUuZmluZFJvdXRlKGZpbmFsUGF0aFBhcnRzLmpvaW4oXCIvXCIpICsgXCIvLipcIik7IC8vIFNlYXJjaCBmb3IgYSB3aWxkY2FyZCByb3V0ZVxuICAgICAgICBpZiAod2lsZGNhcmRSb3V0ZSkge1xuICAgICAgICAgIHJvdXRlID0gd2lsZGNhcmRSb3V0ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyByb3V0ZSBpcyBmb3VuZCwgcmV0dXJuIGEgNDA0IGVycm9yXG4gICAgICBpZiAoIXJvdXRlIHx8ICFyb3V0ZS5taWRkbGV3YXJlcykge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBSb3V0ZXJFcnJvcihgVGhlIFVSTCAke2NvbnN0cnVjdGVkUGF0aH0gd2FzIG5vdCBmb3VuZCBpbiB0aGUgcm91dGVyJ3MgcmVnaXN0ZXJlZCBwYXRocy5gKTtcbiAgICAgICAgKGVycm9yIGFzIGFueSkuc3RhdHVzID0gNDA0O1xuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgcGFyZW50Q29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB7IG1pZGRsZXdhcmVzLCBwYXJhbXMgfSA9IHJvdXRlO1xuXG4gICAgcmV0dXJuIHJ1bldpdGhDb250ZXh0KHJvdXRlckNvbnRleHRTY29wZSwgdGhpcywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbmV4dFJvdXRlOiBSb3V0ZVNuYXBzaG90ID0ge1xuICAgICAgICBwYXRoOiBnZXRQYXRoV2l0aG91dExhc3RTbGFzaChwYXRoKSxcbiAgICAgICAgcXVlcnk6IG5leHRRdWVyeSxcbiAgICAgICAgcGFyYW1zXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByb3V0ZUNoYW5nZWQgPSBoYXNSb3V0ZUNoYW5nZWQobmV4dFJvdXRlLCB0aGlzLmN1cnJlbnRSb3V0ZSk7XG5cbiAgICAgIGlmIChyb3V0ZUNoYW5nZWQpIHtcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiB0aGlzLmFjdGl2ZVJvdXRlQ2FsbGJhY2tzLmJlZm9yZSkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbGxiYWNrKG5leHRSb3V0ZSwgdGhpcy5jdXJyZW50Um91dGUpO1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmVnaW5QZW5kaW5nUm91dGVDYWxsYmFja3NDb2xsZWN0aW9uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNhbGxiYWNrUmVnaXN0cmF0aW9uVGFyZ2V0ID0gXCJhY3RpdmVcIjtcbiAgICAgIH1cblxuICAgICAgbGV0IHJvdXRlVHJhbnNpdGlvbkNvbXBsZXRlZCA9IGZhbHNlO1xuXG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnVybCA9IGNvbnN0cnVjdGVkUGF0aDtcbiAgICAgICAgdGhpcy5xdWVyeSA9IG5leHRRdWVyeTtcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IGF3YWl0IHRoaXMuc2VhcmNoQ29tcG9uZW50KG1pZGRsZXdhcmVzLCBwYXJlbnRDb21wb25lbnQpO1xuXG4gICAgICAgIGlmIChjb21wb25lbnQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihcbiAgICAgICAgICAgIG5ldyBSb3V0ZXJFcnJvcihgVGhlIFVSTCAke2NvbnN0cnVjdGVkUGF0aH0gZGlkIG5vdCByZXR1cm4gYSB2YWxpZCBjb21wb25lbnQuYCksXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnRcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzQ29tcG9uZW50KHBhcmVudENvbXBvbmVudCkgfHwgaXNWbm9kZUNvbXBvbmVudChwYXJlbnRDb21wb25lbnQpKSB7XG4gICAgICAgICAgY29uc3QgY2hpbGRDb21wb25lbnQgPSBpc1Zub2RlQ29tcG9uZW50KGNvbXBvbmVudCkgPyBjb21wb25lbnQgOiB2KGNvbXBvbmVudCBhcyBDb21wb25lbnQsIHt9KTtcbiAgICAgICAgICBpZiAoaXNWbm9kZUNvbXBvbmVudChwYXJlbnRDb21wb25lbnQpKSB7XG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQuY2hpbGRyZW4ucHVzaChjaGlsZENvbXBvbmVudCk7XG4gICAgICAgICAgICBjb21wb25lbnQgPSBwYXJlbnRDb21wb25lbnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbXBvbmVudCA9IHYocGFyZW50Q29tcG9uZW50LCB7fSwgY2hpbGRDb21wb25lbnQpIGFzIFZub2RlQ29tcG9uZW50SW50ZXJmYWNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNOb2RlSnMgJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCAhPT0gY29uc3RydWN0ZWRQYXRoKSB7XG4gICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsIFwiXCIsIGNvbnN0cnVjdGVkUGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbW91bnRlZFJlc3VsdDogc3RyaW5nIHwgdm9pZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XG4gICAgICAgICAgbW91bnRlZFJlc3VsdCA9IG1vdW50KHRoaXMuY29udGFpbmVyLCBjb21wb25lbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzTm9kZUpzKSB7XG4gICAgICAgICAgbW91bnRlZFJlc3VsdCA9IG1vdW50KFwiYm9keVwiLCBjb21wb25lbnQpIGFzIHN0cmluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihuZXcgUm91dGVyRXJyb3IoXCJObyBjb250YWluZXIgZm91bmQgZm9yIG1vdW50aW5nIHRoZSBjb21wb25lbnQuXCIpLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJvdXRlQ2hhbmdlZCkge1xuICAgICAgICAgIGNvbnN0IHByZXZpb3VzUm91dGUgPSB0aGlzLmN1cnJlbnRSb3V0ZTtcbiAgICAgICAgICBjb25zdCBwcmV2aW91c0FmdGVyQ2FsbGJhY2tzID0gdGhpcy5hY3RpdmVSb3V0ZUNhbGxiYWNrcy5hZnRlcjtcblxuICAgICAgICAgIHRoaXMuY3VycmVudFJvdXRlID0gbmV4dFJvdXRlO1xuICAgICAgICAgIHRoaXMuY29tbWl0UGVuZGluZ1JvdXRlQ2FsbGJhY2tzQ29sbGVjdGlvbigpO1xuICAgICAgICAgIHJvdXRlVHJhbnNpdGlvbkNvbXBsZXRlZCA9IHRydWU7XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIHByZXZpb3VzQWZ0ZXJDYWxsYmFja3MpIHtcbiAgICAgICAgICAgIGF3YWl0IGNhbGxiYWNrKG5leHRSb3V0ZSwgcHJldmlvdXNSb3V0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1vdW50ZWRSZXN1bHQ7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAocm91dGVDaGFuZ2VkICYmICFyb3V0ZVRyYW5zaXRpb25Db21wbGV0ZWQpIHtcbiAgICAgICAgICB0aGlzLnJvbGxiYWNrUGVuZGluZ1JvdXRlQ2FsbGJhY2tzQ29sbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRPbkNsaWNrSGFuZGxlcih1cmw6IHN0cmluZykge1xuICAgIHJldHVybiAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgaWYgKGUuYnV0dG9uICE9PSAwIHx8IGUuY3RybEtleSB8fCBlLm1ldGFLZXkgfHwgZS5zaGlmdEtleSB8fCBlLmFsdEtleSB8fCBlLmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNTdHJpbmcodXJsKSAmJiB1cmwubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmdvKHVybCk7XG4gICAgICB9XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QWxsUm91dGVzKG5vZGU6IFJvdXRlTm9kZSwgcHJlZml4OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgcm91dGVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBba2V5LCBjaGlsZF0gb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHNvbmFyanMvbm8tbmVzdGVkLXRlbXBsYXRlLWxpdGVyYWxzXG4gICAgICBjb25zdCBuZXdQcmVmaXggPSBgJHtwcmVmaXh9LyR7Y2hpbGQuaXNEeW5hbWljID8gYDoke2NoaWxkLnBhcmFtS2V5fWAgOiBrZXl9YC5yZXBsYWNlKC9cXC8kLywgXCJcIik7XG4gICAgICBpZiAoY2hpbGQubWlkZGxld2FyZXMpIHtcbiAgICAgICAgcm91dGVzLnB1c2gobmV3UHJlZml4KTtcbiAgICAgIH1cbiAgICAgIHJvdXRlcy5wdXNoKC4uLnRoaXMuZ2V0QWxsUm91dGVzKGNoaWxkLCBuZXdQcmVmaXgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcm91dGVzO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVSZXF1ZXN0KCk6IFJlcXVlc3Qge1xuICAgIHJldHVybiB7XG4gICAgICBwYXJhbXM6IHRoaXMucGFyYW1zLFxuICAgICAgcXVlcnk6IHRoaXMucXVlcnksXG4gICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgcGF0aDogdGhpcy5wYXRoLFxuICAgICAgbWF0Y2hlczogdGhpcy5tYXRjaGVzLFxuICAgICAgcmVkaXJlY3Q6IChwYXRoOiBzdHJpbmcpID0+IHRoaXMuZ28ocGF0aClcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRFcnJvckNvbmRpdGlvbk1pZGRsZXdhcmVzKGVycm9yOiBhbnkpOiBNaWRkbGV3YXJlcyB8IGZhbHNlIHtcbiAgICAvLyBTZWFyY2ggZmlyc3QgZm9yIGNsYXNzIGFuZCBuYW1lIGVycm9yc1xuICAgIGZvciAoY29uc3QgW2NvbmRpdGlvbiwgbWlkZGxld2FyZXNdIG9mIHRoaXMuZXJyb3JIYW5kbGVycykge1xuICAgICAgaWYgKFxuICAgICAgICAhaXNOdW1iZXIoY29uZGl0aW9uKSAmJlxuICAgICAgICAhaXNTdHJpbmcoY29uZGl0aW9uKSAmJlxuICAgICAgICBlcnJvciBpbnN0YW5jZW9mIChjb25kaXRpb24gYXMgYW55KSAmJlxuICAgICAgICBlcnJvci5uYW1lID09PSBjb25kaXRpb24ubmFtZVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBtaWRkbGV3YXJlcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB0aGVuIGZvciBjb2RlIGVycm9yc1xuICAgIGZvciAoY29uc3QgW2NvbmRpdGlvbiwgbWlkZGxld2FyZXNdIG9mIHRoaXMuZXJyb3JIYW5kbGVycykge1xuICAgICAgaWYgKGlzTnVtYmVyKGNvbmRpdGlvbikgJiYgKGVycm9yLnN0YXR1cyA9PT0gY29uZGl0aW9uIHx8IGVycm9yLmNvZGUgPT09IGNvbmRpdGlvbikpIHtcbiAgICAgICAgcmV0dXJuIG1pZGRsZXdhcmVzO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFuZCB0aGVuIGZvciBtZXNzYWdlIGVycm9yc1xuICAgIGZvciAoY29uc3QgW2NvbmRpdGlvbiwgbWlkZGxld2FyZXNdIG9mIHRoaXMuZXJyb3JIYW5kbGVycykge1xuICAgICAgaWYgKGlzU3RyaW5nKGNvbmRpdGlvbikgJiYgKGVycm9yLm5hbWUgPT09IGNvbmRpdGlvbiB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKGNvbmRpdGlvbikpKSB7XG4gICAgICAgIHJldHVybiBtaWRkbGV3YXJlcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBubyBzcGVjaWZpYyBlcnJvciBoYW5kbGVyIGlzIGZvdW5kLCByZXR1cm4gdGhlIGdlbmVyaWMgb25lXG4gICAgcmV0dXJuIHRoaXMuZXJyb3JIYW5kbGVycy5nZXQoXCJnZW5lcmljXCIpIHx8IGZhbHNlO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHNvbmFyanMvY29nbml0aXZlLWNvbXBsZXhpdHlcbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVFcnJvcihcbiAgICBlcnJvcjogRXJyb3IsXG4gICAgcGFyZW50Q29tcG9uZW50PzogQ29tcG9uZW50IHwgUE9KT0NvbXBvbmVudCB8IFZub2RlQ29tcG9uZW50SW50ZXJmYWNlXG4gICk6IFByb21pc2U8dm9pZCB8IHN0cmluZz4ge1xuICAgIGNvbnN0IHJlcXVlc3Q6IFJlcXVlc3QgPSB0aGlzLmNyZWF0ZVJlcXVlc3QoKTtcbiAgICBsZXQgY29tcG9uZW50ID0gbnVsbDtcbiAgICBjb25zdCBtaWRkbGV3YXJlcyA9IHRoaXMuZ2V0RXJyb3JDb25kaXRpb25NaWRkbGV3YXJlcyhlcnJvcik7XG5cbiAgICAvLyBJZiBubyBlcnJvciBoYW5kbGVyIGlzIGZvdW5kLCB0aHJvdyB0aGUgZXJyb3JcbiAgICBpZiAobWlkZGxld2FyZXMgPT09IGZhbHNlKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICBsZXQgcmVzcG9uc2U7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAoY29uc3QgbWlkZGxld2FyZSBvZiBtaWRkbGV3YXJlcykge1xuICAgICAgICByZXNwb25zZSA9IGF3YWl0IG1pZGRsZXdhcmUocmVxdWVzdCwgZXJyb3IpO1xuXG4gICAgICAgIC8vIElmIHRoZSByZXNwb25zZSBpcyBhIGNvbXBvbmVudCBvciB2bm9kZSwgcmV0dXJuIGl0IGZvciByZW5kZXJpbmdcbiAgICAgICAgaWYgKHJlc3BvbnNlICE9PSB1bmRlZmluZWQgJiYgKGlzQ29tcG9uZW50KHJlc3BvbnNlKSB8fCBpc1Zub2RlQ29tcG9uZW50KHJlc3BvbnNlKSkpIHtcbiAgICAgICAgICBjb21wb25lbnQgPSByZXNwb25zZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSByZXNwb25zZSBpcyBmYWxzZSwgc3RvcCB0aGUgbWlkZGxld2FyZSBjaGFpblxuICAgICAgICBpZiAocmVzcG9uc2UgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBJZiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIHRoZSBlcnJvciBoYW5kbGluZywgd2UgaGFuZGxlIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICBjb25zdCBuZXh0RXJyb3IgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyciA6IG5ldyBSb3V0ZXJFcnJvcihTdHJpbmcoZXJyKSk7XG5cbiAgICAgIGlmIChuZXh0RXJyb3IgPT09IGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBSb3V0ZXJFcnJvcihcIlRvbyBtYW55IGVycm9yIGNhdXNlcy4gUG9zc2libGUgY2lyY3VsYXIgZXJyb3IgaGFuZGxpbmcuXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW5leHRFcnJvci5jYXVzZSkge1xuICAgICAgICBuZXh0RXJyb3IuY2F1c2UgPSBlcnJvcjtcbiAgICAgIH1cblxuICAgICAgbGV0IGVycm9yQ2F1c2VDb3VudCA9IDA7XG4gICAgICBjb25zdCBzZWVuID0gbmV3IFNldDx1bmtub3duPigpO1xuICAgICAgbGV0IGN1cnJlbnRFcnJvcjogdW5rbm93biA9IG5leHRFcnJvcjtcblxuICAgICAgd2hpbGUgKGN1cnJlbnRFcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGN1cnJlbnRFcnJvci5jYXVzZSkge1xuICAgICAgICBpZiAoc2Vlbi5oYXMoY3VycmVudEVycm9yKSkge1xuICAgICAgICAgIHRocm93IG5ldyBSb3V0ZXJFcnJvcihcIlRvbyBtYW55IGVycm9yIGNhdXNlcy4gUG9zc2libGUgY2lyY3VsYXIgZXJyb3IgaGFuZGxpbmcuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2Vlbi5hZGQoY3VycmVudEVycm9yKTtcbiAgICAgICAgZXJyb3JDYXVzZUNvdW50Kys7XG4gICAgICAgIGlmIChlcnJvckNhdXNlQ291bnQgPiAyMCkge1xuICAgICAgICAgIHRocm93IG5ldyBSb3V0ZXJFcnJvcihcIlRvbyBtYW55IGVycm9yIGNhdXNlcy4gUG9zc2libGUgY2lyY3VsYXIgZXJyb3IgaGFuZGxpbmcuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudEVycm9yID0gY3VycmVudEVycm9yLmNhdXNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihuZXh0RXJyb3IsIHBhcmVudENvbXBvbmVudCk7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gZXJyb3IgbWlkZGxld2FyZSB0aGF0IHJldHVybnMgYSBjb21wb25lbnQsIHdlIHJldHVybiBpdFxuICAgICAgaWYgKGlzQ29tcG9uZW50KHBhcmVudENvbXBvbmVudCkgfHwgaXNWbm9kZUNvbXBvbmVudChwYXJlbnRDb21wb25lbnQpKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkQ29tcG9uZW50ID0gaXNWbm9kZUNvbXBvbmVudChjb21wb25lbnQpID8gY29tcG9uZW50IDogdihjb21wb25lbnQgYXMgQ29tcG9uZW50LCB7fSk7XG4gICAgICAgIGlmIChpc1Zub2RlQ29tcG9uZW50KHBhcmVudENvbXBvbmVudCkpIHtcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQuY2hpbGRyZW4ucHVzaChjaGlsZENvbXBvbmVudCk7XG4gICAgICAgICAgY29tcG9uZW50ID0gcGFyZW50Q29tcG9uZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbXBvbmVudCA9IHYocGFyZW50Q29tcG9uZW50LCB7fSwgY2hpbGRDb21wb25lbnQpIGFzIFZub2RlQ29tcG9uZW50SW50ZXJmYWNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHdlIGFyZSBpbiB0aGUgYnJvd3Nlciwgd2UgdXBkYXRlIHRoZSBVUkxcbiAgICAgIGlmICghaXNOb2RlSnMgJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCAhPT0gdGhpcy51cmwpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsIFwiXCIsIHRoaXMudXJsKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlcmUgaXMgYSBjb250YWluZXIsIHdlIG1vdW50IHRoZSBjb21wb25lbnRcbiAgICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gbW91bnQodGhpcy5jb250YWluZXIsIGNvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gY29tcG9uZW50IHRvIHJlbmRlciwgd2UgdGhyb3cgdGhlIGVycm9yXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlYXJjaENvbXBvbmVudChcbiAgICBtaWRkbGV3YXJlczogTWlkZGxld2FyZXMsXG4gICAgcGFyZW50Q29tcG9uZW50PzogQ29tcG9uZW50IHwgUE9KT0NvbXBvbmVudCB8IFZub2RlQ29tcG9uZW50SW50ZXJmYWNlXG4gICkge1xuICAgIGNvbnN0IHJlcXVlc3Q6IFJlcXVlc3QgPSB0aGlzLmNyZWF0ZVJlcXVlc3QoKTtcblxuICAgIGxldCByZXNwb25zZTtcblxuICAgIGZvciAoY29uc3QgbWlkZGxld2FyZSBvZiBtaWRkbGV3YXJlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBtaWRkbGV3YXJlKHJlcXVlc3QpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IgYXMgRXJyb3IsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSByZXNwb25zZSBpcyBhIGNvbXBvbmVudCBvciB2bm9kZSwgcmV0dXJuIGl0IGZvciByZW5kZXJpbmdcbiAgICAgIGlmIChyZXNwb25zZSAhPT0gdW5kZWZpbmVkICYmIChpc0NvbXBvbmVudChyZXNwb25zZSkgfHwgaXNWbm9kZUNvbXBvbmVudChyZXNwb25zZSkpKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIHJlc3BvbnNlIGlzIGZhbHNlLCBzdG9wIHRoZSBtaWRkbGV3YXJlIGNoYWluXG4gICAgICBpZiAocmVzcG9uc2UgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJlZm9yZVJvdXRlKGNhbGxiYWNrOiBSb3V0ZUNhbGxiYWNrKSB7XG4gIGNvbnN0IHJvdXRlciA9IHJlc29sdmVSb3V0ZXJGcm9tQ29udGV4dCgpO1xuICBpZiAoIXJvdXRlcikge1xuICAgIHRocm93IG5ldyBSb3V0ZXJFcnJvcihcIlJvdXRlciBpcyBub3QgbW91bnRlZC4gQ2FsbCBtb3VudFJvdXRlciguLi4pIGJlZm9yZSByZWdpc3RlcmluZyByb3V0ZSBjYWxsYmFja3MuXCIpO1xuICB9XG5cbiAgaWYgKCFjdXJyZW50LnZub2RlKSB7XG4gICAgdGhyb3cgbmV3IFJvdXRlckVycm9yKFwiYmVmb3JlUm91dGUgbXVzdCBiZSBjYWxsZWQgaW5zaWRlIGEgY29tcG9uZW50IGNvbnRleHQuXCIpO1xuICB9XG5cbiAgcmV0dXJuIHJvdXRlci5iZWZvcmVSb3V0ZShjYWxsYmFjayk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZnRlclJvdXRlKGNhbGxiYWNrOiBSb3V0ZUNhbGxiYWNrKSB7XG4gIGNvbnN0IHJvdXRlciA9IHJlc29sdmVSb3V0ZXJGcm9tQ29udGV4dCgpO1xuICBpZiAoIXJvdXRlcikge1xuICAgIHRocm93IG5ldyBSb3V0ZXJFcnJvcihcIlJvdXRlciBpcyBub3QgbW91bnRlZC4gQ2FsbCBtb3VudFJvdXRlciguLi4pIGJlZm9yZSByZWdpc3RlcmluZyByb3V0ZSBjYWxsYmFja3MuXCIpO1xuICB9XG5cbiAgaWYgKCFjdXJyZW50LnZub2RlKSB7XG4gICAgdGhyb3cgbmV3IFJvdXRlckVycm9yKFwiYWZ0ZXJSb3V0ZSBtdXN0IGJlIGNhbGxlZCBpbnNpZGUgYSBjb21wb25lbnQgY29udGV4dC5cIik7XG4gIH1cblxuICByZXR1cm4gcm91dGVyLmFmdGVyUm91dGUoY2FsbGJhY2spO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVkaXJlY3QoXG4gIHVybDogc3RyaW5nLFxuICBwYXJlbnRDb21wb25lbnQ/OiBDb21wb25lbnQgfCBQT0pPQ29tcG9uZW50IHwgVm5vZGVDb21wb25lbnRJbnRlcmZhY2UsXG4gIHByZXZlbnRQdXNoU3RhdGUgPSBmYWxzZVxuKTogUHJvbWlzZTxzdHJpbmcgfCB2b2lkPiB7XG4gIGNvbnN0IHJvdXRlciA9IHJlc29sdmVSb3V0ZXJGcm9tQ29udGV4dCgpO1xuICBpZiAoIXJvdXRlcikge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS53YXJuKFwiUmVkaXJlY3QgZnVuY3Rpb24gaXMgbm90IGluaXRpYWxpemVkLiBQbGVhc2UgbW91bnQgdGhlIHJvdXRlciBmaXJzdC5cIik7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJldHVybiByb3V0ZXIuZ28odXJsLCBwYXJlbnRDb21wb25lbnQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbW91bnRSb3V0ZXIoZWxlbWVudENvbnRhaW5lcjogc3RyaW5nIHwgYW55LCByb3V0ZXI6IFJvdXRlcik6IHZvaWQge1xuICBlbnN1cmVSb3V0ZURpcmVjdGl2ZSgpO1xuICByb3V0ZXIuY29udGFpbmVyID0gZWxlbWVudENvbnRhaW5lcjtcbiAgYWN0aXZlUm91dGVyID0gcm91dGVyO1xuXG4gIGlmICghaXNOb2RlSnMpIHtcbiAgICBmdW5jdGlvbiBvblBvcFN0YXRlR29Ub1JvdXRlKCk6IHZvaWQge1xuICAgICAgY29uc3QgcGF0aFdpdGhvdXRQcmVmaXggPSBnZXRQYXRoV2l0aG91dFByZWZpeChkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSwgcm91dGVyLnBhdGhQcmVmaXgpO1xuICAgICAgKHJvdXRlciBhcyB1bmtub3duIGFzIFJvdXRlcikuZ28ocGF0aFdpdGhvdXRQcmVmaXgpO1xuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIG9uUG9wU3RhdGVHb1RvUm91dGUsIGZhbHNlKTtcbiAgICBvblBvcFN0YXRlR29Ub1JvdXRlKCk7XG4gIH1cblxufVxuXG5lbnN1cmVSb3V0ZURpcmVjdGl2ZSgpO1xuIl0sIm1hcHBpbmdzIjoiZ0pBQUFBLEVBQUEsRyx5REFBQUMsQ0FBQUQsRUFBQSxDQUFBRSxPQUFBLElBQUFBLEVBQUFDLFlBQUEsSUFBQUEsRUFBQUMsV0FBQSxJQUFBQSxFQUFBQyxZQUFBLElBQUFBLEVBQUFDLFlBQUEsSUFBQUEsRUFBQUMsU0FBQSxJQUFBQSxJQUFBLEksRUFBQUMsRyxFQUFBUixFLDBNQUVBUyxFQWFPQyxRQUFBLGVBQ1BDLEVBQStERCxRQUFBLHVCQUMvREUsRUFBK0NGLFFBQUEscUJBbUMvQyxTQUFTRyxFQUF3QkMsR0FDL0IsSUFBSUMsRUFBdUJELEVBQUtFLFFBQVEsTUFBTyxJQUkvQyxNQUg2QixLQUF6QkQsSUFDRkEsRUFBdUIsS0FFbEJBLENBQ1QsQ0FFQSxTQUFTRSxFQUFpQkMsR0FDeEIsT0FBT0MsUUFBUUQsS0FBSyxFQUFLTixFQUFBUSxVQUFTRixFQUFNRyxPQUFTSCxFQUFNRyxLQUFLQyxTQUFTLFFBQ3ZFLENBZ0NBLFNBQVNDLElBQ1AsTUFBTyxDQUNMQyxPQUFRLElBQUlDLElBQ1pDLE1BQU8sSUFBSUQsSUFFZixDQUVBLElBQUlFLEVBQThCLEtBQzlCQyxHQUEyQixFQUN6QkMsR0FBQSxFQUFxQmxCLEVBQUFtQixvQkFBMkIsVUFFdEQsU0FBU0MsSUFDUCxTQUFPcEIsRUFBQXFCLFlBQVdILElBQXVCRixDQUMzQyxDQUVBLFNBQVNNLElBQ0hMLEtBSUosRUFB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