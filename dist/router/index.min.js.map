//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXJfZXhwb3J0cyIsIl9fZXhwb3J0IiwiUm91dGVyIiwiZGVmYXVsdCIsInJvdXRlcl9kZWZhdWx0IiwibG9jYWxWYWx5cmlhbiIsIl9fRVhQT1JUU19fIiwiYWRkUGF0aCIsInJvdXRlciIsIm1ldGhvZCIsInBhdGgiLCJtaWRkbGV3YXJlcyIsImxlbmd0aCIsInJlYWxwYXRoIiwicmVwbGFjZSIsInBhcmFtcyIsIm1hdGNoIiwicGFyYW0iLCJzbGljZSIsInJlZ2V4cFBhdGgiLCJhcnJheSIsInBhdGhzIiwicHVzaCIsIkFycmF5IiwiaXNBcnJheSIsImZsYXQiLCJJbmZpbml0eSIsInJlZ2V4cCIsIlJlZ0V4cCIsImNvbnRhaW5lciIsInF1ZXJ5Iiwib3B0aW9ucyIsInVybCIsIm1hdGNoZXMiLCJhZGQiLCJhcmdzIiwidGhpcyIsInVzZSIsImkiLCJrIiwic3Vicm91dGVyIiwiaXRlbSIsInN1YnBhdGgiLCJzaGlmdCIsInJvdXRlcyIsImZvckVhY2giLCJhc3luYyIsInBhcmVudENvbXBvbmVudCIsIkVycm9yIiwicGFydHMiLCJzcGxpdCIsInVybFBhcnRzIiwicXVlcnlQYXJ0cyIsIm5hbWVWYWx1ZSIsInBhcnNlUXVlcnkiLCJrZXkiLCJleGVjIiwic2VhcmNoTWlkZGxld2FyZXMiLCJjb21wb25lbnQiLCJyZXNwb25zZSIsInJlcSIsInJlZGlyZWN0IiwiZ28iLCJpc0NvbXBvbmVudCIsInNlYXJjaENvbXBvbmVudCIsImNoaWxkQ29tcG9uZW50IiwiaXNWbm9kZUNvbXBvbmVudCIsImNoaWxkcmVuIiwiaXNOb2RlSnMiLCJ3aW5kb3ciLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiaXNNb3VudGVkIiwidXBkYXRlIiwibW91bnQiLCJnZXRPbkNsaWNrSGFuZGxlciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInYiLCJtb3VudFJvdXRlciIsImVsZW1lbnRDb250YWluZXIiLCJyb3V0ZXJPckNvbXBvbmVudCIsImJpbmQiLCJvblBvcFN0YXRlR29Ub1JvdXRlMiIsImRvY3VtZW50IiwibG9jYXRpb24iLCJwYXRobmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkaXJlY3RpdmUiLCJ2bm9kZSIsIm9sZG5vZGUiLCJzZXRBdHRyaWJ1dGUiXSwic291cmNlcyI6WyIuLi8uLi9saWIvcm91dGVyL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXG5pbXBvcnQgeyBDb21wb25lbnQsIFZhbHlyaWFuLCBWYWx5cmlhbkNvbXBvbmVudCwgVm5vZGVDb21wb25lbnRJbnRlcmZhY2UgfSBmcm9tIFwiVmFseXJpYW5cIjtcblxuaW50ZXJmYWNlIFBhdGgge1xuICBtZXRob2Q6IHN0cmluZztcbiAgcGF0aDogc3RyaW5nO1xuICBtaWRkbGV3YXJlczogTWlkZGxld2FyZXM7XG4gIHBhcmFtczogc3RyaW5nW107XG4gIHJlZ2V4cDogUmVnRXhwO1xufVxuXG5pbnRlcmZhY2UgUmVxdWVzdCB7XG4gIHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgcXVlcnk6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIHVybDogc3RyaW5nO1xuICBwYXRoOiBzdHJpbmc7XG4gIG1hdGNoZXM6IHN0cmluZ1tdO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgcmVkaXJlY3Q6IChwYXRoOiBzdHJpbmcsIHBhcmVudENvbXBvbmVudD86IENvbXBvbmVudCB8IFZhbHlyaWFuQ29tcG9uZW50IHwgVm5vZGVDb21wb25lbnRJbnRlcmZhY2UpID0+IGZhbHNlO1xufVxuXG5pbnRlcmZhY2UgTWlkZGxld2FyZSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICAocmVxOiBSZXF1ZXN0LCByZXM/OiBhbnkpOiBQcm9taXNlPGFueSB8IENvbXBvbmVudCB8IFZhbHlyaWFuQ29tcG9uZW50IHwgVm5vZGVDb21wb25lbnRJbnRlcmZhY2U+O1xufVxuXG5pbnRlcmZhY2UgTWlkZGxld2FyZXMgZXh0ZW5kcyBBcnJheTxNaWRkbGV3YXJlPiB7fVxuXG5pbnRlcmZhY2UgUm91dGVySW50ZXJmYWNlIHtcbiAgcGF0aHM6IFBhdGhbXTtcbiAgY29udGFpbmVyOiBFbGVtZW50IHwgc3RyaW5nIHwgbnVsbDtcbiAgcXVlcnk6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj47XG4gIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIHVybDogc3RyaW5nO1xuICBwYXRoOiBzdHJpbmc7XG4gIHBhcmFtczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgYW55PjtcbiAgbWF0Y2hlczogc3RyaW5nW107XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBhZGQobWV0aG9kOiBzdHJpbmcsIC4uLmFyZ3M6IE1pZGRsZXdhcmVzKTogUm91dGVyO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgdXNlKC4uLmFyZ3M6IE1pZGRsZXdhcmVzIHwgUm91dGVyW10pOiBSb3V0ZXI7XG4gIHJvdXRlcygpOiBzdHJpbmdbXTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gIGdvKHBhdGg6IHN0cmluZywgcGFyZW50Q29tcG9uZW50PzogQ29tcG9uZW50IHwgVmFseXJpYW5Db21wb25lbnQgfCBWbm9kZUNvbXBvbmVudEludGVyZmFjZSk6IFByb21pc2U8c3RyaW5nIHwgdm9pZD47XG59XG5cbmxldCBsb2NhbFZhbHlyaWFuOiBWYWx5cmlhbjtcblxuZnVuY3Rpb24gZmxhdChhcnJheTogYW55KSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGFycmF5KSA/IGFycmF5LmZsYXQoSW5maW5pdHkpIDogW2FycmF5XTtcbn1cblxubGV0IGFkZFBhdGggPSAocm91dGVyOiBSb3V0ZXIsIG1ldGhvZDogc3RyaW5nLCBwYXRoOiBzdHJpbmcsIG1pZGRsZXdhcmVzOiBhbnlbXSkgPT4ge1xuICBpZiAobWlkZGxld2FyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IHJlYWxwYXRoID0gcGF0aC5yZXBsYWNlKC8oXFxTKShcXC8rKSQvLCBcIiQxXCIpO1xuXG4gIC8vIEZpbmQgdGhlIGV4cHJlc3MgbGlrZSBwYXJhbXNcbiAgbGV0IHBhcmFtcyA9IHJlYWxwYXRoLm1hdGNoKC86KFxcdyspPy9naSkgfHwgW107XG5cbiAgLy8gU2V0IHRoZSBuYW1lcyBvZiB0aGUgcGFyYW1zIGZvdW5kXG4gIGZvciAobGV0IHBhcmFtIGluIHBhcmFtcykge1xuICAgIHBhcmFtc1twYXJhbV0gPSBwYXJhbXNbcGFyYW1dLnNsaWNlKDEpO1xuICB9XG5cbiAgbGV0IHJlZ2V4cFBhdGggPSBcIl5cIiArIHJlYWxwYXRoLnJlcGxhY2UoLzooXFx3KykvZ2ksIFwiKFteXFxcXC9cXFxcc10rKVwiKSArIFwiJFwiO1xuXG4gIHJvdXRlci5wYXRocy5wdXNoKHtcbiAgICBtZXRob2QsXG4gICAgcGF0aDogcmVhbHBhdGgsXG4gICAgbWlkZGxld2FyZXM6IGZsYXQobWlkZGxld2FyZXMpLFxuICAgIHBhcmFtcyxcbiAgICByZWdleHA6IG5ldyBSZWdFeHAocmVnZXhwUGF0aCwgXCJpXCIpXG4gIH0pO1xufTtcblxuZnVuY3Rpb24gcGFyc2VRdWVyeShxdWVyeVBhcnRzPzogc3RyaW5nKSB7XG4gIGxldCBwYXJ0cyA9IHF1ZXJ5UGFydHMgPyBxdWVyeVBhcnRzLnNwbGl0KFwiJlwiLCAyMCkgOiBbXTtcbiAgbGV0IHF1ZXJ5OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gIGxldCBpID0gMDtcbiAgbGV0IG5hbWVWYWx1ZTtcblxuICBmb3IgKDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgbmFtZVZhbHVlID0gcGFydHNbaV0uc3BsaXQoXCI9XCIsIDIpO1xuICAgIHF1ZXJ5W25hbWVWYWx1ZVswXV0gPSBuYW1lVmFsdWVbMV07XG4gIH1cblxuICByZXR1cm4gcXVlcnk7XG59XG5cbmZ1bmN0aW9uIHNlYXJjaE1pZGRsZXdhcmVzKHJvdXRlcjogUm91dGVySW50ZXJmYWNlLCBwYXRoOiBzdHJpbmcpOiBNaWRkbGV3YXJlcyB7XG4gIGxldCBpO1xuICBsZXQgaztcbiAgbGV0IGl0ZW07XG4gIGxldCBtYXRjaDtcbiAgbGV0IGtleTtcbiAgbGV0IG1pZGRsZXdhcmVzOiBNaWRkbGV3YXJlcyA9IFtdO1xuICBsZXQgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG4gIGxldCBtYXRjaGVzID0gW107XG4gIHJvdXRlci5wYXJhbXMgPSB7fTtcbiAgcm91dGVyLnBhdGggPSBcIlwiO1xuICByb3V0ZXIubWF0Y2hlcyA9IFtdO1xuXG4gIC8vIFNlYXJjaCBmb3IgbWlkZGxld2FyZXNcbiAgZm9yIChpID0gMDsgaSA8IHJvdXRlci5wYXRocy5sZW5ndGg7IGkrKykge1xuICAgIGl0ZW0gPSByb3V0ZXIucGF0aHNbaV07XG5cbiAgICBtYXRjaCA9IGl0ZW0ucmVnZXhwLmV4ZWMocGF0aCk7XG4gICAgLy8gSWYgd2UgZm91bmQgbWlkZGxld2FyZXNcbiAgICBpZiAoQXJyYXkuaXNBcnJheShtYXRjaCkpIHtcbiAgICAgIG1pZGRsZXdhcmVzLnB1c2goLi4uaXRlbS5taWRkbGV3YXJlcyk7XG4gICAgICBtYXRjaC5zaGlmdCgpO1xuXG4gICAgICAvLyBQYXJzZSBwYXJhbXNcbiAgICAgIGZvciAoayA9IDA7IGsgPCBpdGVtLnBhcmFtcy5sZW5ndGg7IGsrKykge1xuICAgICAgICBrZXkgPSBpdGVtLnBhcmFtc1trXTtcbiAgICAgICAgcGFyYW1zW2tleV0gPSBtYXRjaC5zaGlmdCgpO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAobWF0Y2gubGVuZ3RoKSB7XG4gICAgICAgIG1hdGNoZXMucHVzaChtYXRjaC5zaGlmdCgpIGFzIHN0cmluZyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtLm1ldGhvZCA9PT0gXCJhZGRcIikge1xuICAgICAgICByb3V0ZXIucGF0aCA9IGl0ZW0ucGF0aDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcm91dGVyLnBhcmFtcyA9IHBhcmFtcztcbiAgcm91dGVyLm1hdGNoZXMgPSBtYXRjaGVzO1xuXG4gIHJldHVybiBtaWRkbGV3YXJlcztcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoQ29tcG9uZW50KFxuICByb3V0ZXI6IFJvdXRlckludGVyZmFjZSxcbiAgbWlkZGxld2FyZXM6IE1pZGRsZXdhcmVzXG4pOiBQcm9taXNlPENvbXBvbmVudCB8IFZhbHlyaWFuQ29tcG9uZW50IHwgVm5vZGVDb21wb25lbnRJbnRlcmZhY2UgfCBmYWxzZSB8IHZvaWQ+IHtcbiAgbGV0IHJlc3BvbnNlO1xuICBsZXQgcmVxOiBSZXF1ZXN0ID0ge1xuICAgIHBhcmFtczogcm91dGVyLnBhcmFtcyxcbiAgICBxdWVyeTogcm91dGVyLnF1ZXJ5LFxuICAgIHVybDogcm91dGVyLnVybCxcbiAgICBwYXRoOiByb3V0ZXIucGF0aCxcbiAgICBtYXRjaGVzOiByb3V0ZXIubWF0Y2hlcyxcbiAgICByZWRpcmVjdDogKHBhdGg6IHN0cmluZywgcGFyZW50Q29tcG9uZW50PzogQ29tcG9uZW50IHwgVmFseXJpYW5Db21wb25lbnQgfCBWbm9kZUNvbXBvbmVudEludGVyZmFjZSkgPT4ge1xuICAgICAgcm91dGVyLmdvKHBhdGgsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuICBsZXQgaSA9IDA7XG5cbiAgZm9yICg7IGkgPCBtaWRkbGV3YXJlcy5sZW5ndGg7IGkrKykge1xuICAgIHJlc3BvbnNlID0gYXdhaXQgbWlkZGxld2FyZXNbaV0ocmVxLCByZXNwb25zZSk7XG5cbiAgICBpZiAocmVzcG9uc2UgIT09IHVuZGVmaW5lZCAmJiBsb2NhbFZhbHlyaWFuLmlzQ29tcG9uZW50KHJlc3BvbnNlKSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cblxuICAgIGlmIChyZXNwb25zZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJvdXRlciBpbXBsZW1lbnRzIFJvdXRlckludGVyZmFjZSB7XG4gIHBhdGhzOiBQYXRoW10gPSBbXTtcbiAgY29udGFpbmVyOiBFbGVtZW50IHwgc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHF1ZXJ5OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+ID0ge307XG4gIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgdXJsOiBzdHJpbmcgPSBcIlwiO1xuICBwYXRoOiBzdHJpbmcgPSBcIlwiO1xuICBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlciB8IGFueT4gPSB7fTtcbiAgbWF0Y2hlczogc3RyaW5nW10gPSBbXTtcblxuICBhZGQocGF0aDogc3RyaW5nLCAuLi5hcmdzOiBNaWRkbGV3YXJlcyk6IFJvdXRlciB7XG4gICAgYWRkUGF0aCh0aGlzLCBcImFkZFwiLCBwYXRoLCBhcmdzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHVzZSguLi5hcmdzOiBNaWRkbGV3YXJlcyB8IFJvdXRlcltdKTogUm91dGVyIHtcbiAgICBsZXQgcGF0aCA9IHR5cGVvZiBhcmdzWzBdID09PSBcInN0cmluZ1wiID8gYXJncy5zaGlmdCgpIDogXCIvXCI7XG4gICAgbGV0IGk7XG4gICAgbGV0IGs7XG4gICAgbGV0IHN1YnJvdXRlcjtcbiAgICBsZXQgaXRlbTtcbiAgICBsZXQgc3VicGF0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzdWJyb3V0ZXIgPSBhcmdzW2ldO1xuICAgICAgaWYgKHR5cGVvZiBzdWJyb3V0ZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBhZGRQYXRoKHRoaXMsIFwidXNlXCIsIGAke3BhdGh9LipgLCBbc3Vicm91dGVyXSk7XG4gICAgICB9IGVsc2UgaWYgKHN1YnJvdXRlci5wYXRocykge1xuICAgICAgICBmb3IgKGsgPSAwOyBrIDwgc3Vicm91dGVyLnBhdGhzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgaXRlbSA9IHN1YnJvdXRlci5wYXRoc1trXTtcbiAgICAgICAgICBzdWJwYXRoID0gYCR7cGF0aH0ke2l0ZW0ucGF0aH1gLnJlcGxhY2UoL15cXC9cXC8vLCBcIi9cIik7XG4gICAgICAgICAgYWRkUGF0aCh0aGlzLCBpdGVtLm1ldGhvZCwgc3VicGF0aCwgaXRlbS5taWRkbGV3YXJlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJvdXRlcygpIHtcbiAgICBsZXQgcm91dGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIHRoaXMucGF0aHMuZm9yRWFjaCgocGF0aCkgPT4ge1xuICAgICAgaWYgKHBhdGgubWV0aG9kID09PSBcImFkZFwiKSB7XG4gICAgICAgIHJvdXRlcy5wdXNoKHBhdGgucGF0aCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJvdXRlcztcbiAgfVxuXG4gIGFzeW5jIGdvKHBhdGg6IHN0cmluZywgcGFyZW50Q29tcG9uZW50PzogQ29tcG9uZW50IHwgVmFseXJpYW5Db21wb25lbnQpOiBQcm9taXNlPHN0cmluZyB8IHZvaWQ+IHtcbiAgICBpZiAoIXBhdGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInJvdXRlci51cmwucmVxdWlyZWRcIik7XG4gICAgfVxuXG4gICAgbGV0IHBhcnRzID0gcGF0aC5zcGxpdChcIj9cIiwgMik7XG4gICAgbGV0IHVybFBhcnRzID0gcGFydHNbMF0ucmVwbGFjZSgvKC4rKVxcLyQvLCBcIiQxXCIpO1xuICAgIGxldCBxdWVyeVBhcnRzID0gcGFydHNbMV07XG4gICAgdGhpcy51cmwgPSBwYXRoO1xuICAgIHRoaXMucXVlcnkgPSBwYXJzZVF1ZXJ5KHF1ZXJ5UGFydHMpO1xuXG4gICAgbGV0IG1pZGRsZXdhcmVzID0gc2VhcmNoTWlkZGxld2FyZXModGhpcywgdXJsUGFydHMpO1xuXG4gICAgbGV0IGNvbXBvbmVudCA9IGF3YWl0IHNlYXJjaENvbXBvbmVudCh0aGlzLCBtaWRkbGV3YXJlcyk7XG5cbiAgICBpZiAoY29tcG9uZW50ID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSB1cmwgJHtwYXRofSByZXF1ZXN0ZWQgd2Fzbid0IGZvdW5kYCk7XG4gICAgfVxuXG4gICAgaWYgKGxvY2FsVmFseXJpYW4uaXNDb21wb25lbnQocGFyZW50Q29tcG9uZW50KSkge1xuICAgICAgbGV0IGNoaWxkQ29tcG9uZW50ID0gbG9jYWxWYWx5cmlhbi5pc1Zub2RlQ29tcG9uZW50KGNvbXBvbmVudCkgPyBjb21wb25lbnQgOiBsb2NhbFZhbHlyaWFuKGNvbXBvbmVudCwge30pO1xuICAgICAgaWYgKGxvY2FsVmFseXJpYW4uaXNWbm9kZUNvbXBvbmVudChwYXJlbnRDb21wb25lbnQpKSB7XG4gICAgICAgIHBhcmVudENvbXBvbmVudC5jaGlsZHJlbi5wdXNoKGNoaWxkQ29tcG9uZW50KTtcbiAgICAgICAgY29tcG9uZW50ID0gcGFyZW50Q29tcG9uZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tcG9uZW50ID0gbG9jYWxWYWx5cmlhbihwYXJlbnRDb21wb25lbnQsIHt9LCBjaGlsZENvbXBvbmVudCkgYXMgVm5vZGVDb21wb25lbnRJbnRlcmZhY2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFsb2NhbFZhbHlyaWFuLmlzTm9kZUpzKSB7XG4gICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgXCJcIiwgcGF0aCk7XG4gICAgfVxuXG4gICAgaWYgKGxvY2FsVmFseXJpYW4uaXNNb3VudGVkICYmIGxvY2FsVmFseXJpYW4uY29tcG9uZW50ID09PSBjb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBsb2NhbFZhbHlyaWFuLnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgcmV0dXJuIGxvY2FsVmFseXJpYW4ubW91bnQodGhpcy5jb250YWluZXIsIGNvbXBvbmVudCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0T25DbGlja0hhbmRsZXIodXJsOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgdXJsID09PSBcInN0cmluZ1wiICYmIHVybC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuZ28odXJsKTtcbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICB9XG59XG5cbmRlY2xhcmUgbW9kdWxlIFwiVmFseXJpYW5cIiB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBpbnRlcmZhY2UgVmFseXJpYW4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIG1vdW50Um91dGVyPyhjb250YWluZXI6IEVsZW1lbnQgfCBzdHJpbmcsIHJvdXRlcjogUm91dGVyKTogc3RyaW5nIHwgdm9pZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBwbHVnaW4odjogVmFseXJpYW4pIHtcbiAgbG9jYWxWYWx5cmlhbiA9IHY7XG4gIGxvY2FsVmFseXJpYW4ubW91bnRSb3V0ZXIgPSAoZWxlbWVudENvbnRhaW5lciwgcm91dGVyT3JDb21wb25lbnQpID0+IHtcbiAgICBpZiAocm91dGVyT3JDb21wb25lbnQgaW5zdGFuY2VvZiBSb3V0ZXIpIHtcbiAgICAgIHJvdXRlck9yQ29tcG9uZW50LmNvbnRhaW5lciA9IGVsZW1lbnRDb250YWluZXI7XG4gICAgICBsb2NhbFZhbHlyaWFuLnJlZGlyZWN0ID0gcm91dGVyT3JDb21wb25lbnQuZ28uYmluZChyb3V0ZXJPckNvbXBvbmVudCk7XG5cbiAgICAgIC8vIEFjdGl2YXRlIHRoZSB1c2Ugb2YgdGhlIHJvdXRlclxuICAgICAgaWYgKCFsb2NhbFZhbHlyaWFuLmlzTm9kZUpzKSB7XG4gICAgICAgIGZ1bmN0aW9uIG9uUG9wU3RhdGVHb1RvUm91dGUoKSB7XG4gICAgICAgICAgKHJvdXRlck9yQ29tcG9uZW50IGFzIHVua25vd24gYXMgUm91dGVyKS5nbyhkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLCBvblBvcFN0YXRlR29Ub1JvdXRlLCBmYWxzZSk7XG4gICAgICAgIG9uUG9wU3RhdGVHb1RvUm91dGUoKTtcbiAgICAgIH1cblxuICAgICAgbG9jYWxWYWx5cmlhbi5kaXJlY3RpdmUoXCJyb3V0ZVwiLCAodXJsLCB2bm9kZSwgb2xkbm9kZSkgPT4ge1xuICAgICAgICBsb2NhbFZhbHlyaWFuLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgdXJsLCB2bm9kZSwgb2xkbm9kZSk7XG4gICAgICAgIGxvY2FsVmFseXJpYW4uc2V0QXR0cmlidXRlKFwib25jbGlja1wiLCByb3V0ZXJPckNvbXBvbmVudC5nZXRPbkNsaWNrSGFuZGxlcih1cmwpLCB2bm9kZSwgb2xkbm9kZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBSb3V0ZXI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHBsdWdpbjtcbiJdLCJtYXBwaW5ncyI6ImdKQUFBQSxFQUFBLEcseURBQUFDLENBQUFELEVBQUEsQ0FBQUUsT0FBQSxJQUFBQSxFQUFBQyxRQUFBLElBQUFDLElBQUEsSSxFQThDSUMsRUE5Q0pDLEcsRUFBQU4sRSwwTUFvREEsSUFBSU8sRUFBVSxDQUFDQyxFQUFnQkMsRUFBZ0JDLEVBQWNDLEtBQzNELEdBQTJCLElBQXZCQSxFQUFZQyxPQUNkLE9BR0YsSUFBSUMsRUFBV0gsRUFBS0ksUUFBUSxh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