//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbmRleF9leHBvcnRzIiwiX19leHBvcnQiLCJjcmVhdGVFZmZlY3QiLCJjcmVhdGVNdXRhYmxlU3RvcmUiLCJjcmVhdGVQdWxzZSIsImNyZWF0ZVB1bHNlU3RvcmUiLCJfX0VYUE9SVFNfXyIsImltcG9ydF92YWx5cmlhbiIsInJlcXVpcmUiLCJpbXBvcnRfdXRpbHMiLCJlZmZlY3RTdGFjayIsInJlZ2lzdGVyRG9tU3Vic2NyaXB0aW9uIiwic3Vic2NyaWJlcnMiLCJkb21XaXRoVm5vZGVzVG9VcGRhdGUiLCJjdXJyZW50Vm5vZGUiLCJjdXJyZW50Iiwidm5vZGUiLCJoYXMiLCJkb20iLCJoYXNQYXJlbnQiLCJwYXJlbnQiLCJwYXJlbnRFbGVtZW50Iiwic3Vic2NyaXB0aW9uIiwidXBkYXRlVm5vZGUiLCJkZWxldGUiLCJhZGQiLCJjcmVhdGVTdG9yZSIsImluaXRpYWxTdGF0ZSIsInB1bHNlcyIsImltbXV0YWJsZSIsIlNldCIsIldlYWtTZXQiLCJib3VuZFB1bHNlcyIsImtleSIsIkVycm9yIiwiZ2V0UHVsc2VNZXRob2QiLCJsb2NhbFN0YXRlIiwiaXNNdXRhYmxlIiwiY3VycmVudFN0YXRlIiwicHVsc2VDYWxsQ291bnQiLCJwcm94eVN0YXRlIiwiUHJveHkiLCJnZXQiLCJzdGF0ZSIsInByb3AiLCJjdXJyZW50RWZmZWN0IiwibGVuZ3RoIiwic2V0IiwidmFsdWUiLCJSZWZsZWN0IiwiZGVsZXRlUHJvcGVydHkiLCJzeW5jU3RhdGUiLCJuZXdTdGF0ZSIsImRlZXBGcmVlemUiLCJkZWJvdW5jZVRpbWVvdXQiLCJzZXRTdGF0ZSIsImZsdXNoIiwiaGFzQ2hhbmdlZCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJmb3JFYWNoIiwic3Vic2NyaWJlciIsImFyZ3MiLCJkZWVwQ2xvbmVVbmZyZWV6ZSIsImNvbnRleHQiLCJPYmplY3QiLCJjcmVhdGUiLCIkZmx1c2giLCJhc3luYyIsImVtcHR5Rmx1c2giLCJoYW5kbGVFcnJvciIsImVycm9yIiwiY29uc29sZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJwdWxzZVJlc3VsdCIsImFwcGx5IiwiUHJvbWlzZSIsInRoZW4iLCJyZXNvbHZlZFZhbHVlIiwiY2F0Y2giLCJsaXN0ZW5lcnMiLCJ0cmlnZ2VyIiwiY2FsbGJhY2siLCJwdXNoIiwiZmlsdGVyIiwiY2IiLCJwdWxzZU1ldGhvZCIsInJlc3VsdCIsInIiLCJ3YXJuIiwiZWZmZWN0IiwicnVuRWZmZWN0IiwicG9wIiwiaW5pdGlhbFZhbHVlIiwicnVuU3Vic2NyaWJlcnMiLCJuZXdWYWx1ZSJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9wdWxzZXMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1mdW5jdGlvbi10eXBlICovXG5cbmltcG9ydCB7IHVwZGF0ZVZub2RlLCBWbm9kZVdpdGhEb20sIGN1cnJlbnQsIERvbUVsZW1lbnQgfSBmcm9tIFwidmFseXJpYW4uanNcIjtcbmltcG9ydCB7IGRlZXBDbG9uZVVuZnJlZXplLCBkZWVwRnJlZXplLCBoYXNDaGFuZ2VkIH0gZnJvbSBcInZhbHlyaWFuLmpzL3V0aWxzXCI7XG5cbnR5cGUgU3RhdGUgPSBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG5leHBvcnQgdHlwZSBQdWxzZUNvbnRleHQgPSB7XG4gICRmbHVzaDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbn07XG5cbmV4cG9ydCB0eXBlIFB1bHNlPFN0YXRlVHlwZSwgVFJldHVybiA9IHVua25vd24+ID0gKHN0YXRlOiBTdGF0ZVR5cGUsIC4uLmFyZ3M6IGFueVtdKSA9PiBUUmV0dXJuIHwgUHJvbWlzZTxUUmV0dXJuPjtcblxudHlwZSBQcm94eVN0YXRlPFN0YXRlVHlwZT4gPSBTdGF0ZVR5cGUgJiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuXG5jb25zdCBlZmZlY3RTdGFjazogRnVuY3Rpb25bXSA9IFtdO1xuXG50eXBlIFN0b3JlUHVsc2VzPFB1bHNlc1R5cGU+ID0ge1xuICBbSyBpbiBrZXlvZiBQdWxzZXNUeXBlXTogUHVsc2VzVHlwZVtLXSBleHRlbmRzIChzdGF0ZTogYW55LCAuLi5hcmdzOiBpbmZlciBBcmdzKSA9PiBpbmZlciBSXG4gICAgPyAoLi4uYXJnczogQXJncykgPT4gUlxuICAgIDogbmV2ZXI7XG59O1xuXG5mdW5jdGlvbiByZWdpc3RlckRvbVN1YnNjcmlwdGlvbihzdWJzY3JpYmVyczogU2V0PEZ1bmN0aW9uPiwgZG9tV2l0aFZub2Rlc1RvVXBkYXRlOiBXZWFrU2V0PERvbUVsZW1lbnQ+KTogdm9pZCB7XG4gIGNvbnN0IGN1cnJlbnRWbm9kZSA9IGN1cnJlbnQudm5vZGUgYXMgVm5vZGVXaXRoRG9tO1xuICBpZiAoIWN1cnJlbnRWbm9kZSB8fCBkb21XaXRoVm5vZGVzVG9VcGRhdGUuaGFzKGN1cnJlbnRWbm9kZS5kb20pKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGhhc1BhcmVudCA9IGZhbHNlO1xuICBsZXQgcGFyZW50ID0gY3VycmVudFZub2RlLmRvbS5wYXJlbnRFbGVtZW50IGFzIERvbUVsZW1lbnQ7XG4gIHdoaWxlIChwYXJlbnQpIHtcbiAgICBpZiAoZG9tV2l0aFZub2Rlc1RvVXBkYXRlLmhhcyhwYXJlbnQpKSB7XG4gICAgICBoYXNQYXJlbnQgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50IGFzIERvbUVsZW1lbnQ7XG4gIH1cblxuICBpZiAoIWhhc1BhcmVudCkge1xuICAgIGNvbnN0IGRvbSA9IGN1cnJlbnRWbm9kZS5kb207XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gKCkgPT4ge1xuICAgICAgdXBkYXRlVm5vZGUoZG9tLnZub2RlKTtcbiAgICAgIGlmICghZG9tLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgc3Vic2NyaWJlcnMuZGVsZXRlKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIGRvbVdpdGhWbm9kZXNUb1VwZGF0ZS5kZWxldGUoZG9tKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHN1YnNjcmliZXJzLmFkZChzdWJzY3JpcHRpb24pO1xuICAgIGRvbVdpdGhWbm9kZXNUb1VwZGF0ZS5hZGQoZG9tKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdG9yZTxTdGF0ZVR5cGUgZXh0ZW5kcyBTdGF0ZSwgUHVsc2VzVHlwZSBleHRlbmRzIFJlY29yZDxzdHJpbmcsIFB1bHNlPFN0YXRlVHlwZSwgYW55Pj4+KFxuICBpbml0aWFsU3RhdGU6IFN0YXRlVHlwZSB8ICgoKSA9PiBTdGF0ZVR5cGUpIHwgbnVsbCxcbiAgcHVsc2VzOiBQdWxzZXNUeXBlICYgVGhpc1R5cGU8UHVsc2VzVHlwZSAmIFB1bHNlQ29udGV4dD4sXG4gIGltbXV0YWJsZSA9IGZhbHNlXG4pOiBTdG9yZVB1bHNlczxQdWxzZXNUeXBlPiAmIHtcbiAgc3RhdGU6IFByb3h5U3RhdGU8U3RhdGVUeXBlPjtcbiAgb246IChldmVudDogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24pID0+IHZvaWQ7XG4gIG9mZjogKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbikgPT4gdm9pZDtcbn0ge1xuICBjb25zdCBzdWJzY3JpYmVycyA9IG5ldyBTZXQ8RnVuY3Rpb24+KCk7XG4gIGNvbnN0IGRvbVdpdGhWbm9kZXNUb1VwZGF0ZSA9IG5ldyBXZWFrU2V0PERvbUVsZW1lbnQ+KCk7XG5cbiAgY29uc3QgYm91bmRQdWxzZXM6IFJlY29yZDxzdHJpbmcsIEZ1bmN0aW9uPiA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiBwdWxzZXMpIHtcbiAgICBpZiAodHlwZW9mIHB1bHNlc1trZXldICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUHVsc2UgJyR7a2V5fScgbXVzdCBiZSBhIGZ1bmN0aW9uYCk7XG4gICAgfVxuICAgIGlmIChrZXkgPT09IFwic3RhdGVcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBIHB1bHNlIGNhbm5vdCBiZSBuYW1lZCAnc3RhdGUnYCk7XG4gICAgfVxuICAgIGJvdW5kUHVsc2VzW2tleV0gPSBnZXRQdWxzZU1ldGhvZChrZXkpO1xuICB9XG5cbiAgY29uc3QgbG9jYWxTdGF0ZTogU3RhdGVUeXBlID1cbiAgICAodHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gaW5pdGlhbFN0YXRlKCkgOiBpbml0aWFsU3RhdGUpIHx8ICh7fSBhcyBTdGF0ZVR5cGUpO1xuXG4gIGZ1bmN0aW9uIGlzTXV0YWJsZSgpIHtcbiAgICBpZiAoaW1tdXRhYmxlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbmVlZCB0byBjYWxsIGEgcHVsc2UgdG8gbW9kaWZ5IHRoZSBzdGF0ZVwiKTtcbiAgICB9XG4gIH1cblxuICBsZXQgY3VycmVudFN0YXRlOiBTdGF0ZVR5cGUgfCBudWxsID0gbnVsbDtcbiAgbGV0IHB1bHNlQ2FsbENvdW50ID0gMDtcblxuICBjb25zdCBwcm94eVN0YXRlID0gbmV3IFByb3h5KGxvY2FsU3RhdGUsIHtcbiAgICBnZXQ6IChzdGF0ZSwgcHJvcDogc3RyaW5nKSA9PiB7XG4gICAgICBpZiAoY3VycmVudFN0YXRlKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50U3RhdGVbcHJvcF07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRFZmZlY3QgPSBlZmZlY3RTdGFja1tlZmZlY3RTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChjdXJyZW50RWZmZWN0ICYmICFzdWJzY3JpYmVycy5oYXMoY3VycmVudEVmZmVjdCkpIHtcbiAgICAgICAgc3Vic2NyaWJlcnMuYWRkKGN1cnJlbnRFZmZlY3QpO1xuICAgICAgfVxuXG4gICAgICByZWdpc3RlckRvbVN1YnNjcmlwdGlvbihzdWJzY3JpYmVycywgZG9tV2l0aFZub2Rlc1RvVXBkYXRlKTtcblxuICAgICAgcmV0dXJuIHN0YXRlW3Byb3BdO1xuICAgIH0sXG4gICAgc2V0OiAoc3RhdGUsIHByb3A6IHN0cmluZywgdmFsdWU6IGFueSkgPT4ge1xuICAgICAgaXNNdXRhYmxlKCk7XG4gICAgICBSZWZsZWN0LnNldChzdGF0ZSwgcHJvcCwgdmFsdWUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBkZWxldGVQcm9wZXJ0eTogKHN0YXRlLCBwcm9wOiBzdHJpbmcpID0+IHtcbiAgICAgIGlzTXV0YWJsZSgpO1xuICAgICAgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShzdGF0ZSwgcHJvcCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHN5bmNTdGF0ZShuZXdTdGF0ZTogU3RhdGVUeXBlKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbmV3U3RhdGUpIHtcbiAgICAgIGxvY2FsU3RhdGVba2V5XSA9IGltbXV0YWJsZSA/IGRlZXBGcmVlemUobmV3U3RhdGVba2V5XSkgOiBuZXdTdGF0ZVtrZXldO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBsb2NhbFN0YXRlKSB7XG4gICAgICBpZiAoIShrZXkgaW4gbmV3U3RhdGUpKSB7XG4gICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkobG9jYWxTdGF0ZSwga2V5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBsZXQgZGVib3VuY2VUaW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsO1xuICBmdW5jdGlvbiBkZWJvdW5jZWRVcGRhdGUoKSB7XG4gICAgaWYgKGRlYm91bmNlVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGRlYm91bmNlVGltZW91dCk7XG4gICAgfVxuICAgIGRlYm91bmNlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gc3Vic2NyaWJlcnMuZm9yRWFjaCgoc3Vic2NyaWJlcikgPT4gc3Vic2NyaWJlcigpKSwgMCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTdGF0ZShuZXdTdGF0ZTogU3RhdGVUeXBlLCBmbHVzaCA9IGZhbHNlKSB7XG4gICAgcHVsc2VDYWxsQ291bnQtLTtcbiAgICBpZiAoIWhhc0NoYW5nZWQobG9jYWxTdGF0ZSwgbmV3U3RhdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChwdWxzZUNhbGxDb3VudCA+IDAgJiYgIWZsdXNoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN5bmNTdGF0ZShuZXdTdGF0ZSk7XG4gICAgaWYgKCFmbHVzaCkge1xuICAgICAgY3VycmVudFN0YXRlID0gbnVsbDtcbiAgICB9XG4gICAgcHVsc2VDYWxsQ291bnQgPSAwO1xuICAgIGRlYm91bmNlZFVwZGF0ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5mcmVlemVTdGF0ZSgpIHtcbiAgICBpZiAoY3VycmVudFN0YXRlID09PSBudWxsKSB7XG4gICAgICBjdXJyZW50U3RhdGUgPSBkZWVwQ2xvbmVVbmZyZWV6ZShsb2NhbFN0YXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFB1bHNlTWV0aG9kKGtleTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICBwdWxzZUNhbGxDb3VudCsrO1xuXG4gICAgICBjb25zdCBzdGF0ZSA9IHVuZnJlZXplU3RhdGUoKTtcblxuICAgICAgY29uc3QgY29udGV4dCA9IE9iamVjdC5jcmVhdGUocHVsc2VzKTtcblxuICAgICAgY29udGV4dC4kZmx1c2ggPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmIChjdXJyZW50U3RhdGUpIHtcbiAgICAgICAgICBzZXRTdGF0ZShjdXJyZW50U3RhdGUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBlbXB0eUZsdXNoID0gYXN5bmMgKCkgPT4ge307XG5cbiAgICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKGVycm9yOiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gcHVsc2UgJyR7a2V5fSc6YCwgZXJyb3IpO1xuICAgICAgICBjb250ZXh0LiRmbHVzaCA9IGVtcHR5Rmx1c2g7XG5cbiAgICAgICAgcHVsc2VDYWxsQ291bnQtLTtcbiAgICAgICAgaWYgKHB1bHNlQ2FsbENvdW50IDw9IDApIHtcbiAgICAgICAgICBjdXJyZW50U3RhdGUgPSBudWxsO1xuICAgICAgICAgIHB1bHNlQ2FsbENvdW50ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGN1cnJlbnQuZXZlbnQpIHtcbiAgICAgICAgICBjdXJyZW50LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY3VycmVudC5ldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwdWxzZVJlc3VsdCA9IHB1bHNlc1trZXldLmFwcGx5KGNvbnRleHQsIFtzdGF0ZSwgLi4uYXJnc10pO1xuICAgICAgICBpZiAocHVsc2VSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgcmV0dXJuIHB1bHNlUmVzdWx0XG4gICAgICAgICAgICAudGhlbigocmVzb2x2ZWRWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgICBzZXRTdGF0ZShzdGF0ZSBhcyBTdGF0ZVR5cGUpO1xuICAgICAgICAgICAgICBjb250ZXh0LiRmbHVzaCA9IGVtcHR5Rmx1c2g7XG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlZFZhbHVlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChoYW5kbGVFcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICAgIGNvbnRleHQuJGZsdXNoID0gZW1wdHlGbHVzaDtcbiAgICAgICAgICByZXR1cm4gcHVsc2VSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgc3luY1N0YXRlKGxvY2FsU3RhdGUpO1xuXG4gIGNvbnN0IGxpc3RlbmVyczogUmVjb3JkPHN0cmluZywgRnVuY3Rpb25bXT4gPSB7fTtcbiAgY29uc3QgdHJpZ2dlciA9IChldmVudDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIGlmIChsaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICBsaXN0ZW5lcnNbZXZlbnRdLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayguLi5hcmdzKSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHB1bHNlc1Byb3h5ID0gbmV3IFByb3h5KGJvdW5kUHVsc2VzLCB7XG4gICAgZ2V0OiAocHVsc2VzLCBwcm9wOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmIChwcm9wID09PSBcInN0YXRlXCIpIHtcbiAgICAgICAgcmV0dXJuIHByb3h5U3RhdGU7XG4gICAgICB9XG4gICAgICBpZiAocHJvcCA9PT0gXCJvblwiKSB7XG4gICAgICAgIHJldHVybiAoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB7XG4gICAgICAgICAgaWYgKCFsaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNbZXZlbnRdID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpc3RlbmVyc1tldmVudF0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAocHJvcCA9PT0gXCJvZmZcIikge1xuICAgICAgICByZXR1cm4gKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbikgPT4ge1xuICAgICAgICAgIGlmIChsaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNbZXZlbnRdID0gbGlzdGVuZXJzW2V2ZW50XS5maWx0ZXIoKGNiKSA9PiBjYiAhPT0gY2FsbGJhY2spO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmICghKHByb3AgaW4gcHVsc2VzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFB1bHNlICcke3Byb3B9JyBkb2VzIG5vdCBleGlzdGApO1xuICAgICAgfVxuICAgICAgY29uc3QgcHVsc2VNZXRob2QgPSBwdWxzZXNbcHJvcF07XG5cbiAgICAgIHJldHVybiAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcHVsc2VNZXRob2QuYXBwbHkocHVsc2VNZXRob2QsIGFyZ3MpO1xuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigocikgPT4ge1xuICAgICAgICAgICAgdHJpZ2dlcihcInB1bHNlXCIsIHByb3AsIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJpZ2dlcihcInB1bHNlXCIsIHByb3AsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwdWxzZXNQcm94eSBhcyBTdG9yZVB1bHNlczxQdWxzZXNUeXBlPiAmIHtcbiAgICBzdGF0ZTogUHJveHlTdGF0ZTxTdGF0ZVR5cGU+O1xuICAgIG9uOiAoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICAgIG9mZjogKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVB1bHNlU3RvcmU8U3RhdGVUeXBlIGV4dGVuZHMgU3RhdGUsIFB1bHNlc1R5cGUgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBQdWxzZTxTdGF0ZVR5cGUsIGFueT4+PihcbiAgaW5pdGlhbFN0YXRlOiBTdGF0ZVR5cGUsXG4gIHB1bHNlczogUHVsc2VzVHlwZSAmIFRoaXNUeXBlPFB1bHNlc1R5cGUgJiBQdWxzZUNvbnRleHQ+XG4pIHtcbiAgcmV0dXJuIGNyZWF0ZVN0b3JlKGluaXRpYWxTdGF0ZSwgcHVsc2VzLCB0cnVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU11dGFibGVTdG9yZTxTdGF0ZVR5cGUgZXh0ZW5kcyBTdGF0ZSwgUHVsc2VzVHlwZSBleHRlbmRzIFJlY29yZDxzdHJpbmcsIFB1bHNlPFN0YXRlVHlwZSwgYW55Pj4+KFxuICBpbml0aWFsU3RhdGU6IFN0YXRlVHlwZSxcbiAgcHVsc2VzOiBQdWxzZXNUeXBlICYgVGhpc1R5cGU8UHVsc2VzVHlwZSAmIFB1bHNlQ29udGV4dD5cbikge1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJXYXJuaW5nOiBZb3UgYXJlIHdvcmtpbmcgd2l0aCBhIG11dGFibGUgc3RhdGUuIEFsbCBzdGF0ZSBjaGFuZ2VzIG1hZGUgb3V0c2lkZSBvZiBhIHB1bHNlIHdpbGwgbm90IHRyaWdnZXIgYSByZS1yZW5kZXIuXCJcbiAgKTtcbiAgcmV0dXJuIGNyZWF0ZVN0b3JlKGluaXRpYWxTdGF0ZSwgcHVsc2VzLCBmYWxzZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFZmZlY3QoZWZmZWN0OiBGdW5jdGlvbikge1xuICBjb25zdCBydW5FZmZlY3QgPSAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGVmZmVjdFN0YWNrLnB1c2gocnVuRWZmZWN0KTtcbiAgICAgIGVmZmVjdCgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBlZmZlY3RTdGFjay5wb3AoKTtcbiAgICB9XG4gIH07XG4gIHJ1bkVmZmVjdCgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHVsc2U8VD4oaW5pdGlhbFZhbHVlOiBUKTogWygpID0+IFQsIChuZXdWYWx1ZTogVCB8ICgoY3VycmVudDogVCkgPT4gVCkpID0+IHZvaWQsICgpID0+IHZvaWRdIHtcbiAgbGV0IHZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICBjb25zdCBzdWJzY3JpYmVycyA9IG5ldyBTZXQ8RnVuY3Rpb24+KCk7XG4gIGNvbnN0IGRvbVdpdGhWbm9kZXNUb1VwZGF0ZSA9IG5ldyBXZWFrU2V0PERvbUVsZW1lbnQ+KCk7XG5cbiAgY29uc3QgcnVuU3Vic2NyaWJlcnMgPSAoKSA9PiB7XG4gICAgc3Vic2NyaWJlcnMuZm9yRWFjaCgoc3Vic2NyaWJlcikgPT4gc3Vic2NyaWJlcigpKTtcbiAgfTtcblxuICBjb25zdCByZWFkID0gKCk6IFQgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRFZmZlY3QgPSBlZmZlY3RTdGFja1tlZmZlY3RTdGFjay5sZW5ndGggLSAxXTtcbiAgICBpZiAoY3VycmVudEVmZmVjdCAmJiAhc3Vic2NyaWJlcnMuaGFzKGN1cnJlbnRFZmZlY3QpKSB7XG4gICAgICBzdWJzY3JpYmVycy5hZGQoY3VycmVudEVmZmVjdCk7XG4gICAgfVxuICAgIHJlZ2lzdGVyRG9tU3Vic2NyaXB0aW9uKHN1YnNjcmliZXJzLCBkb21XaXRoVm5vZGVzVG9VcGRhdGUpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICBjb25zdCB3cml0ZSA9IChuZXdWYWx1ZTogVCB8ICgoY3VycmVudDogVCkgPT4gVCkpOiB2b2lkID0+IHtcbiAgICBjb25zdCByZXNvbHZlZFZhbHVlID0gdHlwZW9mIG5ld1ZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyAobmV3VmFsdWUgYXMgKGN1cnJlbnQ6IFQpID0+IFQpKHZhbHVlKSA6IG5ld1ZhbHVlO1xuICAgIGlmICghaGFzQ2hhbmdlZCh2YWx1ZSwgcmVzb2x2ZWRWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFsdWUgPSByZXNvbHZlZFZhbHVlO1xuICAgIHJ1blN1YnNjcmliZXJzKCk7XG4gIH07XG5cbiAgcmV0dXJuIFtyZWFkLCB3cml0ZSwgcnVuU3Vic2NyaWJlcnNdO1xufVxuIl0sIm1h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