//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbmRleF9leHBvcnRzIiwiX19leHBvcnQiLCJjcmVhdGVFZmZlY3QiLCJjcmVhdGVNdXRhYmxlU3RvcmUiLCJjcmVhdGVQdWxzZSIsImNyZWF0ZVB1bHNlU3RvcmUiLCJfX0VYUE9SVFNfXyIsImltcG9ydF92YWx5cmlhbiIsInJlcXVpcmUiLCJpbXBvcnRfdXRpbHMiLCJlZmZlY3RTdGFjayIsInJlZ2lzdGVyRG9tU3Vic2NyaXB0aW9uIiwic3Vic2NyaWJlcnMiLCJkb21XaXRoVm5vZGVzVG9VcGRhdGUiLCJjdXJyZW50Vm5vZGUiLCJjdXJyZW50Iiwidm5vZGUiLCJoYXMiLCJkb20iLCJoYXNQYXJlbnQiLCJwYXJlbnQiLCJwYXJlbnRFbGVtZW50Iiwic3Vic2NyaXB0aW9uIiwidXBkYXRlVm5vZGUiLCJkZWxldGUiLCJhZGQiLCJjcmVhdGVTdG9yZSIsImluaXRpYWxTdGF0ZSIsInB1bHNlcyIsImltbXV0YWJsZSIsIlNldCIsIldlYWtTZXQiLCJib3VuZFB1bHNlcyIsImtleSIsIkVycm9yIiwiZ2V0UHVsc2VNZXRob2QiLCJsb2NhbFN0YXRlIiwiaXNNdXRhYmxlIiwiY3VycmVudFN0YXRlIiwicHVsc2VDYWxsQ291bnQiLCJwcm94eVN0YXRlIiwiUHJveHkiLCJnZXQiLCJzdGF0ZSIsInByb3AiLCJjdXJyZW50RWZmZWN0IiwibGVuZ3RoIiwic2V0IiwidmFsdWUiLCJSZWZsZWN0IiwiZGVsZXRlUHJvcGVydHkiLCJzeW5jU3RhdGUiLCJuZXdTdGF0ZSIsImRlZXBGcmVlemUiLCJkZWJvdW5jZVRpbWVvdXQiLCJzZXRTdGF0ZSIsImZsdXNoIiwiaGFzQ2hhbmdlZCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJmb3JFYWNoIiwic3Vic2NyaWJlciIsImFyZ3MiLCJkZWVwQ2xvbmVVbmZyZWV6ZSIsImNvbnRleHQiLCJPYmplY3QiLCJjcmVhdGUiLCIkZmx1c2giLCJlbXB0eUZsdXNoIiwiaGFuZGxlRXJyb3IiLCJlcnJvciIsImNvbnNvbGUiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwicHVsc2VSZXN1bHQiLCJhcHBseSIsIlByb21pc2UiLCJ0aGVuIiwicmVzb2x2ZWRWYWx1ZSIsImNhdGNoIiwibGlzdGVuZXJzIiwidHJpZ2dlciIsImNhbGxiYWNrIiwicHVzaCIsImZpbHRlciIsImNiIiwicHVsc2VNZXRob2QiLCJyZXN1bHQiLCJyIiwid2FybiIsImVmZmVjdCIsInJ1bkVmZmVjdCIsInBvcCIsImluaXRpYWxWYWx1ZSIsInJ1blN1YnNjcmliZXJzIiwibmV3VmFsdWUiXSwic291cmNlcyI6WyIuLi8uLi9saWIvcHVsc2VzL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtZnVuY3Rpb24tdHlwZSAqL1xuXG5pbXBvcnQgeyB1cGRhdGVWbm9kZSwgVm5vZGVXaXRoRG9tLCBjdXJyZW50LCBEb21FbGVtZW50IH0gZnJvbSBcInZhbHlyaWFuLmpzXCI7XG5pbXBvcnQgeyBkZWVwQ2xvbmVVbmZyZWV6ZSwgZGVlcEZyZWV6ZSwgaGFzQ2hhbmdlZCB9IGZyb20gXCJ2YWx5cmlhbi5qcy91dGlsc1wiO1xuXG50eXBlIFN0YXRlID0gUmVjb3JkPHN0cmluZywgYW55PjtcblxuZXhwb3J0IHR5cGUgUHVsc2VDb250ZXh0ID0ge1xuICAkZmx1c2g6ICgpID0+IHZvaWQ7XG59O1xuXG5leHBvcnQgdHlwZSBQdWxzZTxTdGF0ZVR5cGUsIFRSZXR1cm4gPSB1bmtub3duPiA9IChzdGF0ZTogU3RhdGVUeXBlLCAuLi5hcmdzOiBhbnlbXSkgPT4gVFJldHVybiB8IFByb21pc2U8VFJldHVybj47XG5cbnR5cGUgUHJveHlTdGF0ZTxTdGF0ZVR5cGU+ID0gU3RhdGVUeXBlICYgeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcblxuY29uc3QgZWZmZWN0U3RhY2s6IEZ1bmN0aW9uW10gPSBbXTtcblxudHlwZSBTdG9yZVB1bHNlczxQdWxzZXNUeXBlPiA9IHtcbiAgW0sgaW4ga2V5b2YgUHVsc2VzVHlwZV06IFB1bHNlc1R5cGVbS10gZXh0ZW5kcyAoc3RhdGU6IGFueSwgLi4uYXJnczogaW5mZXIgQXJncykgPT4gaW5mZXIgUlxuICAgID8gKC4uLmFyZ3M6IEFyZ3MpID0+IFJcbiAgICA6IG5ldmVyO1xufTtcblxuZnVuY3Rpb24gcmVnaXN0ZXJEb21TdWJzY3JpcHRpb24oc3Vic2NyaWJlcnM6IFNldDxGdW5jdGlvbj4sIGRvbVdpdGhWbm9kZXNUb1VwZGF0ZTogV2Vha1NldDxEb21FbGVtZW50Pik6IHZvaWQge1xuICBjb25zdCBjdXJyZW50Vm5vZGUgPSBjdXJyZW50LnZub2RlIGFzIFZub2RlV2l0aERvbTtcbiAgaWYgKCFjdXJyZW50Vm5vZGUgfHwgZG9tV2l0aFZub2Rlc1RvVXBkYXRlLmhhcyhjdXJyZW50Vm5vZGUuZG9tKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBoYXNQYXJlbnQgPSBmYWxzZTtcbiAgbGV0IHBhcmVudCA9IGN1cnJlbnRWbm9kZS5kb20ucGFyZW50RWxlbWVudCBhcyBEb21FbGVtZW50O1xuICB3aGlsZSAocGFyZW50KSB7XG4gICAgaWYgKGRvbVdpdGhWbm9kZXNUb1VwZGF0ZS5oYXMocGFyZW50KSkge1xuICAgICAgaGFzUGFyZW50ID0gdHJ1ZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudCBhcyBEb21FbGVtZW50O1xuICB9XG5cbiAgaWYgKCFoYXNQYXJlbnQpIHtcbiAgICBjb25zdCBkb20gPSBjdXJyZW50Vm5vZGUuZG9tO1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9ICgpID0+IHtcbiAgICAgIHVwZGF0ZVZub2RlKGRvbS52bm9kZSk7XG4gICAgICBpZiAoIWRvbS5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIHN1YnNjcmliZXJzLmRlbGV0ZShzdWJzY3JpcHRpb24pO1xuICAgICAgICBkb21XaXRoVm5vZGVzVG9VcGRhdGUuZGVsZXRlKGRvbSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBzdWJzY3JpYmVycy5hZGQoc3Vic2NyaXB0aW9uKTtcbiAgICBkb21XaXRoVm5vZGVzVG9VcGRhdGUuYWRkKGRvbSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU3RvcmU8U3RhdGVUeXBlIGV4dGVuZHMgU3RhdGUsIFB1bHNlc1R5cGUgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBQdWxzZTxTdGF0ZVR5cGUsIGFueT4+PihcbiAgaW5pdGlhbFN0YXRlOiBTdGF0ZVR5cGUgfCAoKCkgPT4gU3RhdGVUeXBlKSB8IG51bGwsXG4gIHB1bHNlczogUHVsc2VzVHlwZSAmIFRoaXNUeXBlPFB1bHNlc1R5cGUgJiBQdWxzZUNvbnRleHQ+LFxuICBpbW11dGFibGUgPSBmYWxzZVxuKTogU3RvcmVQdWxzZXM8UHVsc2VzVHlwZT4gJiB7XG4gIHN0YXRlOiBQcm94eVN0YXRlPFN0YXRlVHlwZT47XG4gIG9uOiAoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24pID0+IHZvaWQ7XG59IHtcbiAgY29uc3Qgc3Vic2NyaWJlcnMgPSBuZXcgU2V0PEZ1bmN0aW9uPigpO1xuICBjb25zdCBkb21XaXRoVm5vZGVzVG9VcGRhdGUgPSBuZXcgV2Vha1NldDxEb21FbGVtZW50PigpO1xuXG4gIGNvbnN0IGJvdW5kUHVsc2VzOiBSZWNvcmQ8c3RyaW5nLCBGdW5jdGlvbj4gPSB7fTtcbiAgZm9yIChjb25zdCBrZXkgaW4gcHVsc2VzKSB7XG4gICAgaWYgKHR5cGVvZiBwdWxzZXNba2V5XSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFB1bHNlICcke2tleX0nIG11c3QgYmUgYSBmdW5jdGlvbmApO1xuICAgIH1cbiAgICBpZiAoa2V5ID09PSBcInN0YXRlXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQSBwdWxzZSBjYW5ub3QgYmUgbmFtZWQgJ3N0YXRlJ2ApO1xuICAgIH1cbiAgICBib3VuZFB1bHNlc1trZXldID0gZ2V0UHVsc2VNZXRob2Qoa2V5KTtcbiAgfVxuXG4gIGNvbnN0IGxvY2FsU3RhdGU6IFN0YXRlVHlwZSA9XG4gICAgKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IGluaXRpYWxTdGF0ZSgpIDogaW5pdGlhbFN0YXRlKSB8fCAoe30gYXMgU3RhdGVUeXBlKTtcblxuICBmdW5jdGlvbiBpc011dGFibGUoKSB7XG4gICAgaWYgKGltbXV0YWJsZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG5lZWQgdG8gY2FsbCBhIHB1bHNlIHRvIG1vZGlmeSB0aGUgc3RhdGVcIik7XG4gICAgfVxuICB9XG5cbiAgbGV0IGN1cnJlbnRTdGF0ZTogU3RhdGVUeXBlIHwgbnVsbCA9IG51bGw7XG4gIGxldCBwdWxzZUNhbGxDb3VudCA9IDA7XG5cbiAgY29uc3QgcHJveHlTdGF0ZSA9IG5ldyBQcm94eShsb2NhbFN0YXRlLCB7XG4gICAgZ2V0OiAoc3RhdGUsIHByb3A6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKGN1cnJlbnRTdGF0ZSkge1xuICAgICAgICByZXR1cm4gY3VycmVudFN0YXRlW3Byb3BdO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXJyZW50RWZmZWN0ID0gZWZmZWN0U3RhY2tbZWZmZWN0U3RhY2subGVuZ3RoIC0gMV07XG4gICAgICBpZiAoY3VycmVudEVmZmVjdCAmJiAhc3Vic2NyaWJlcnMuaGFzKGN1cnJlbnRFZmZlY3QpKSB7XG4gICAgICAgIHN1YnNjcmliZXJzLmFkZChjdXJyZW50RWZmZWN0KTtcbiAgICAgIH1cblxuICAgICAgcmVnaXN0ZXJEb21TdWJzY3JpcHRpb24oc3Vic2NyaWJlcnMsIGRvbVdpdGhWbm9kZXNUb1VwZGF0ZSk7XG5cbiAgICAgIHJldHVybiBzdGF0ZVtwcm9wXTtcbiAgICB9LFxuICAgIHNldDogKHN0YXRlLCBwcm9wOiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHtcbiAgICAgIGlzTXV0YWJsZSgpO1xuICAgICAgUmVmbGVjdC5zZXQoc3RhdGUsIHByb3AsIHZhbHVlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgZGVsZXRlUHJvcGVydHk6IChzdGF0ZSwgcHJvcDogc3RyaW5nKSA9PiB7XG4gICAgICBpc011dGFibGUoKTtcbiAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkoc3RhdGUsIHByb3ApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcblxuICBmdW5jdGlvbiBzeW5jU3RhdGUobmV3U3RhdGU6IFN0YXRlVHlwZSkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIG5ld1N0YXRlKSB7XG4gICAgICBsb2NhbFN0YXRlW2tleV0gPSBpbW11dGFibGUgPyBkZWVwRnJlZXplKG5ld1N0YXRlW2tleV0pIDogbmV3U3RhdGVba2V5XTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbG9jYWxTdGF0ZSkge1xuICAgICAgaWYgKCEoa2V5IGluIG5ld1N0YXRlKSkge1xuICAgICAgICBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KGxvY2FsU3RhdGUsIGtleSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbGV0IGRlYm91bmNlVGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbDtcbiAgZnVuY3Rpb24gZGVib3VuY2VkVXBkYXRlKCkge1xuICAgIGlmIChkZWJvdW5jZVRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChkZWJvdW5jZVRpbWVvdXQpO1xuICAgIH1cbiAgICBkZWJvdW5jZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHN1YnNjcmliZXJzLmZvckVhY2goKHN1YnNjcmliZXIpID0+IHN1YnNjcmliZXIoKSksIDApO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0U3RhdGUobmV3U3RhdGU6IFN0YXRlVHlwZSwgZmx1c2ggPSBmYWxzZSkge1xuICAgIHB1bHNlQ2FsbENvdW50LS07XG5cbiAgICAvLyBBbHdheXMgcmVzZXQgY3VycmVudFN0YXRlIGFmdGVyIHB1bHNlIG1ldGhvZCBjb21wbGV0ZXNcbiAgICBpZiAocHVsc2VDYWxsQ291bnQgPD0gMCAmJiAhZmx1c2gpIHtcbiAgICAgIGN1cnJlbnRTdGF0ZSA9IG51bGw7XG4gICAgICBwdWxzZUNhbGxDb3VudCA9IDA7XG4gICAgfVxuXG4gICAgLy8gT25seSB0cmlnZ2VyIHVwZGF0ZSBpZiBzdGF0ZSBhY3R1YWxseSBjaGFuZ2VkXG4gICAgaWYgKChwdWxzZUNhbGxDb3VudCA+IDAgJiYgIWZsdXNoKSB8fCAhaGFzQ2hhbmdlZChsb2NhbFN0YXRlLCBuZXdTdGF0ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzeW5jU3RhdGUobmV3U3RhdGUpO1xuICAgIGRlYm91bmNlZFVwZGF0ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5mcmVlemVTdGF0ZSgpIHtcbiAgICBpZiAoY3VycmVudFN0YXRlID09PSBudWxsKSB7XG4gICAgICBjdXJyZW50U3RhdGUgPSBkZWVwQ2xvbmVVbmZyZWV6ZShsb2NhbFN0YXRlKTtcbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFB1bHNlTWV0aG9kKGtleTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICBwdWxzZUNhbGxDb3VudCsrO1xuXG4gICAgICBjb25zdCBzdGF0ZSA9IHVuZnJlZXplU3RhdGUoKTtcblxuICAgICAgY29uc3QgY29udGV4dCA9IE9iamVjdC5jcmVhdGUocHVsc2VzKTtcblxuICAgICAgY29udGV4dC4kZmx1c2ggPSAoKSA9PiB7XG4gICAgICAgIGlmIChjdXJyZW50U3RhdGUpIHtcbiAgICAgICAgICBzZXRTdGF0ZShjdXJyZW50U3RhdGUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBlbXB0eUZsdXNoID0gKCkgPT4ge307XG5cbiAgICAgIGNvbnN0IGhhbmRsZUVycm9yID0gKGVycm9yOiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gcHVsc2UgJyR7a2V5fSc6YCwgZXJyb3IpO1xuICAgICAgICBjb250ZXh0LiRmbHVzaCA9IGVtcHR5Rmx1c2g7XG5cbiAgICAgICAgcHVsc2VDYWxsQ291bnQtLTtcbiAgICAgICAgaWYgKHB1bHNlQ2FsbENvdW50IDw9IDApIHtcbiAgICAgICAgICBjdXJyZW50U3RhdGUgPSBudWxsO1xuICAgICAgICAgIHB1bHNlQ2FsbENvdW50ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGN1cnJlbnQuZXZlbnQpIHtcbiAgICAgICAgICBjdXJyZW50LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY3VycmVudC5ldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwdWxzZVJlc3VsdCA9IHB1bHNlc1trZXldLmFwcGx5KGNvbnRleHQsIFtzdGF0ZSwgLi4uYXJnc10pO1xuICAgICAgICBpZiAocHVsc2VSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgcmV0dXJuIHB1bHNlUmVzdWx0XG4gICAgICAgICAgICAudGhlbigocmVzb2x2ZWRWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgICBzZXRTdGF0ZShzdGF0ZSBhcyBTdGF0ZVR5cGUpO1xuICAgICAgICAgICAgICBjb250ZXh0LiRmbHVzaCA9IGVtcHR5Rmx1c2g7XG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlZFZhbHVlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChoYW5kbGVFcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICAgIGNvbnRleHQuJGZsdXNoID0gZW1wdHlGbHVzaDtcbiAgICAgICAgICByZXR1cm4gcHVsc2VSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgc3luY1N0YXRlKGxvY2FsU3RhdGUpO1xuXG4gIGNvbnN0IGxpc3RlbmVyczogUmVjb3JkPHN0cmluZywgRnVuY3Rpb25bXT4gPSB7fTtcbiAgY29uc3QgdHJpZ2dlciA9IChldmVudDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4ge1xuICAgIGlmIChsaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICBsaXN0ZW5lcnNbZXZlbnRdLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayguLi5hcmdzKSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHB1bHNlc1Byb3h5ID0gbmV3IFByb3h5KGJvdW5kUHVsc2VzLCB7XG4gICAgZ2V0OiAocHVsc2VzLCBwcm9wOiBzdHJpbmcpID0+IHtcbiAgICAgIGlmIChwcm9wID09PSBcInN0YXRlXCIpIHtcbiAgICAgICAgcmV0dXJuIHByb3h5U3RhdGU7XG4gICAgICB9XG4gICAgICBpZiAocHJvcCA9PT0gXCJvblwiKSB7XG4gICAgICAgIHJldHVybiAoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB7XG4gICAgICAgICAgaWYgKCFsaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNbZXZlbnRdID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpc3RlbmVyc1tldmVudF0ucHVzaChjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAocHJvcCA9PT0gXCJvZmZcIikge1xuICAgICAgICByZXR1cm4gKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbikgPT4ge1xuICAgICAgICAgIGlmIChsaXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNbZXZlbnRdID0gbGlzdGVuZXJzW2V2ZW50XS5maWx0ZXIoKGNiKSA9PiBjYiAhPT0gY2FsbGJhY2spO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmICghKHByb3AgaW4gcHVsc2VzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFB1bHNlICcke3Byb3B9JyBkb2VzIG5vdCBleGlzdGApO1xuICAgICAgfVxuICAgICAgY29uc3QgcHVsc2VNZXRob2QgPSBwdWxzZXNbcHJvcF07XG5cbiAgICAgIHJldHVybiAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcHVsc2VNZXRob2QuYXBwbHkocHVsc2VNZXRob2QsIGFyZ3MpO1xuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigocikgPT4ge1xuICAgICAgICAgICAgdHJpZ2dlcihcInB1bHNlXCIsIHByb3AsIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJpZ2dlcihcInB1bHNlXCIsIHByb3AsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwdWxzZXNQcm94eSBhcyBTdG9yZVB1bHNlczxQdWxzZXNUeXBlPiAmIHtcbiAgICBzdGF0ZTogUHJveHlTdGF0ZTxTdGF0ZVR5cGU+O1xuICAgIG9uOiAoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICAgIG9mZjogKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVB1bHNlU3RvcmU8U3RhdGVUeXBlIGV4dGVuZHMgU3RhdGUsIFB1bHNlc1R5cGUgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBQdWxzZTxTdGF0ZVR5cGUsIGFueT4+PihcbiAgaW5pdGlhbFN0YXRlOiBTdGF0ZVR5cGUsXG4gIHB1bHNlczogUHVsc2VzVHlwZSAmIFRoaXNUeXBlPFB1bHNlc1R5cGUgJiBQdWxzZUNvbnRleHQ+XG4pIHtcbiAgcmV0dXJuIGNyZWF0ZVN0b3JlKGluaXRpYWxTdGF0ZSwgcHVsc2VzLCB0cnVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU11dGFibGVTdG9yZTxTdGF0ZVR5cGUgZXh0ZW5kcyBTdGF0ZSwgUHVsc2VzVHlwZSBleHRlbmRzIFJlY29yZDxzdHJpbmcsIFB1bHNlPFN0YXRlVHlwZSwgYW55Pj4+KFxuICBpbml0aWFsU3RhdGU6IFN0YXRlVHlwZSxcbiAgcHVsc2VzOiBQdWxzZXNUeXBlICYgVGhpc1R5cGU8UHVsc2VzVHlwZSAmIFB1bHNlQ29udGV4dD5cbikge1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJXYXJuaW5nOiBZb3UgYXJlIHdvcmtpbmcgd2l0aCBhIG11dGFibGUgc3RhdGUuIEFsbCBzdGF0ZSBjaGFuZ2VzIG1hZGUgb3V0c2lkZSBvZiBhIHB1bHNlIHdpbGwgbm90IHRyaWdnZXIgYSByZS1yZW5kZXIuXCJcbiAgKTtcbiAgcmV0dXJuIGNyZWF0ZVN0b3JlKGluaXRpYWxTdGF0ZSwgcHVsc2VzLCBmYWxzZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFZmZlY3QoZWZmZWN0OiBGdW5jdGlvbikge1xuICBjb25zdCBydW5FZmZlY3QgPSAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGVmZmVjdFN0YWNrLnB1c2gocnVuRWZmZWN0KTtcbiAgICAgIGVmZmVjdCgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBlZmZlY3RTdGFjay5wb3AoKTtcbiAgICB9XG4gIH07XG4gIHJ1bkVmZmVjdCgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHVsc2U8VD4oaW5pdGlhbFZhbHVlOiBUKTogWygpID0+IFQsIChuZXdWYWx1ZTogVCB8ICgoY3VycmVudDogVCkgPT4gVCkpID0+IHZvaWQsICgpID0+IHZvaWRdIHtcbiAgbGV0IHZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICBjb25zdCBzdWJzY3JpYmVycyA9IG5ldyBTZXQ8RnVuY3Rpb24+KCk7XG4gIGNvbnN0IGRvbVdpdGhWbm9kZXNUb1VwZGF0ZSA9IG5ldyBXZWFrU2V0PERvbUVsZW1lbnQ+KCk7XG5cbiAgY29uc3QgcnVuU3Vic2NyaWJlcnMgPSAoKSA9PiB7XG4gICAgc3Vic2NyaWJlcnMuZm9yRWFjaCgoc3Vic2NyaWJlcikgPT4gc3Vic2NyaWJlcigpKTtcbiAgfTtcblxuICBjb25zdCByZWFkID0gKCk6IFQgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRFZmZlY3QgPSBlZmZlY3RTdGFja1tlZmZlY3RTdGFjay5sZW5ndGggLSAxXTtcbiAgICBpZiAoY3VycmVudEVmZmVjdCAmJiAhc3Vic2NyaWJlcnMuaGFzKGN1cnJlbnRFZmZlY3QpKSB7XG4gICAgICBzdWJzY3JpYmVycy5hZGQoY3VycmVudEVmZmVjdCk7XG4gICAgfVxuICAgIHJlZ2lzdGVyRG9tU3Vic2NyaXB0aW9uKHN1YnNjcmliZXJzLCBkb21XaXRoVm5vZGVzVG9VcGRhdGUpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICBjb25zdCB3cml0ZSA9IChuZXdWYWx1ZTogVCB8ICgoY3VycmVudDogVCkgPT4gVCkpOiB2b2lkID0+IHtcbiAgICBjb25zdCByZXNvbHZlZFZhbHVlID0gdHlwZW9mIG5ld1ZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyAobmV3VmFsdWUgYXMgKGN1cnJlbnQ6IFQpID0+IFQpKHZhbHVlKSA6IG5ld1ZhbHVlO1xuICAgIGlmICghaGFzQ2hhbmdlZCh2YWx1ZSwgcmVzb2x2ZWRWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFsdWUgPSByZXNvbHZlZFZhbHVlO1xuICAgIHJ1blN1YnNjcmliZXJzKCk7XG4gIH07XG5cbiAgcmV0dXJuIFtyZWFkLCB3cml0ZSwgcnVuU3Vic2NyaWJlcnNdO1xufVxuIl0sIm1hcHBpbmdzIjoiZ0pBQUFBLEVBQUEsRyx5REFBQUMsQ0FBQUQsRUFBQSxDQUFBRSxhQUFBLElBQUFBLEVBQUFDLG1CQUFBLElBQUFBLEVBQUFDLFlBQUEsSUFBQUEsRUFBQUMsaUJBQUEsSUFBQUEsSUFBQSxJLEVBQUFDLEcsRUFBQU4sRSwwTUFFQU8sRUFBK0RDLFFBQUEsZUFDL0RDLEVBQTBERCxRQUFBLHFCQVlwREUsRUFBMEIsR0FRaEMsU0FBU0MsRUFBd0JDLEVBQTRCQyxHQUMzRCxNQUFNQyxFQUFlUCxFQUFBUSxRQUFRQyxNQUM3QixJQUFLRixHQUFnQkQsRUFBc0JJLElBQUlILEVBQWFJLEtBQzFELE9BR0YsSUFBSUMsR0FBWSxFQUNaQyxFQUFTTixFQUFhSSxJQUFJRyxjQUM5QixLQUFPRCxHQUFRLENBQ2IsR0FBSVAsRUFBc0JJLElBQUlHLEdBQVMsQ0FDckNELEdBQVksRUFDWixLQUNGLENBQ0FDLEVBQVNBLEVBQU9DLGFBQ2xCLENBRUEsSUFBS0YsRUFBVyxDQUNkLE1BQU1ELEVBQU1KLEVBQWFJLElBQ25CSSxFQUFlLE1BQ25CLEVBQUFmLEVBQUFnQixhQUFZTCxFQUFJRixPQUNYRSxFQUFJRyxnQkFDUFQsRUFBWVksT0FBT0YsR0FDbkJULEVBQXNCVyxPQUFPTixLQUdqQ04sRUFBWWEsSUFBSUgsR0FDaEJULEVBQXNCWSxJQUFJUCxFQUM1QixDQUNGLENBRUEsU0FBU1EsRUFDUEMsRUFDQUMsRUFDQUMsR0FBWSxHQU1aLE1BQU1qQixFQUFjLElBQUlrQixJQUNsQmpCLEVBQXdCLElBQUlrQixRQUU1QkMsRUFBd0MsQ0FBQyxFQUMvQyxVQUFXQyxLQUFPTCxFQUFRLENBQ3hCLEdBQTJCLG1CQUFoQkEsRUFBT0ssR0FDaEIsTUFBTSxJQUFJQyxNQUFNLFVBQVVELHlCQUU1QixHQUFZLFVBQVJBLEVBQ0YsTUFBTSxJQUFJQyxN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