{"version":3,"file":"valyrian.min.js","sources":["../lib/patch.js","../lib/index.js"],"sourcesContent":["let plugin = function (v) {\n  let mountedComponent;\n  let oldTree;\n  let newTree;\n  let mainContainer;\n  let und;\n  let oninit = 'oninit';\n  let oncreate = 'oncreate';\n  let onupdate = 'onupdate';\n  let onremove = 'onremove';\n  let svgstr = 'http://www.w3.org/2000/svg';\n\n  function lifecycleCall(vnode, methodName, oldNode, i, l) {\n    if (vnode.nt === 1) {\n      if (vnode.props[methodName] !== und) {\n        vnode.props[methodName](vnode, oldNode);\n      }\n\n      if (methodName === onremove) {\n        i = 0;\n        l = vnode.children.length;\n        for (; i < l; i++) {\n          lifecycleCall(vnode.children[i], onremove);\n        }\n        vnode.children = [];\n      }\n    }\n  }\n\n  function eventListener(e) {\n    if (e.currentTarget.events['on' + e.type] !== und) {\n      e.currentTarget.events['on' + e.type](e);\n    }\n    v.update();\n  }\n\n  function createElement(newNode, isSVG) {\n    lifecycleCall(newNode, oninit);\n    newNode.dom = isSVG ? document.createElementNS(svgstr, newNode.name) : document.createElement(newNode.name);\n    newNode.dom.events = {};\n  }\n\n  // eslint-disable-next-line complexity, sonarjs/cognitive-complexity\n  function patch($parent, newTree, oldTree, isSVG, max, newNode, oldNode, i, isNew, name) {\n    if (newTree.length === 0) {\n      $parent.textContent = '';\n      return;\n    }\n\n    max = newTree.length > oldTree.length ? newTree.length : oldTree.length;\n    for (i = 0; i < max; i++) {\n      newNode = newTree[i];\n      oldNode = oldTree[i];\n\n      if (newNode === und) {\n        // Removed\n        if (oldNode !== und) {\n          if (oldNode.nt === 3) {\n            lifecycleCall(oldNode, onremove);\n          }\n          $parent.removeChild(oldNode.dom);\n        }\n        continue;\n      }\n\n      if (newNode.nt === und || newNode.nt === 3) {\n        // Is text\n        if (newNode.nt === und) {\n          newTree[i] = newNode = {\n            name: '#text',\n            isVnode: true,\n            nodeValue: newNode,\n            children: [],\n            nt: 3\n          };\n        }\n\n        if (oldNode === und) {\n          newNode.dom = document.createTextNode(newNode.nodeValue);\n          $parent.appendChild(newNode.dom);\n        } else {\n          // Replaced\n          if (oldNode.nt === 1) {\n            newNode.dom = document.createTextNode(newNode.nodeValue);\n            lifecycleCall(oldNode, onremove);\n            $parent.replaceChild(newNode.dom, oldNode.dom);\n          } else {\n            newNode.dom = oldNode.dom;\n            if (newNode.nodeValue !== oldNode.nodeValue) {\n              newNode.dom.nodeValue = newNode.nodeValue;\n            }\n          }\n        }\n\n        continue;\n      }\n\n      isNew = !v.is.mounted;\n\n      isSVG = isSVG || newNode.isSVG;\n\n      if (oldNode === und) {\n        // Added\n        createElement(newNode, isSVG);\n\n        $parent.appendChild(newNode.dom);\n        oldNode = { children: [] };\n        isNew = true;\n      } else {\n        if (newNode.name !== oldNode.name) {\n          // Replaced\n          createElement(newNode, isSVG);\n\n          lifecycleCall(oldNode, onremove);\n          $parent.replaceChild(newNode.dom, oldNode.dom);\n          isNew = true;\n        } else {\n          // Updated\n          newNode.dom = oldNode.dom;\n          for (name in oldNode.props) {\n            if (newNode.props[name] === und) {\n              if (typeof oldNode.props[name] === 'function') {\n                newNode.dom.removeEventListener(name.slice(2), eventListener);\n                continue;\n              }\n\n              if (v.is.node || isSVG || newNode.dom[name] === und) {\n                newNode.dom.removeAttribute(name);\n                continue;\n              }\n\n              newNode.dom[name] = null;\n            }\n          }\n        }\n      }\n\n      patch(newNode.dom, newNode.children, oldNode.children, isSVG);\n\n      // Update props\n      for (name in newNode.props) {\n        if ((isNew || newNode.props[name] !== oldNode.props[name]) && newNode.props[name] !== und) {\n          if (typeof newNode.props[name] === 'function') {\n            switch (name) {\n              case oninit:\n              case oncreate:\n              case onupdate:\n              case onremove:\n                break;\n              default:\n                if (newNode.dom.events[name] === und) {\n                  newNode.dom.events[name] = newNode.props[name];\n                  newNode.dom.addEventListener(name.slice(2), eventListener);\n                }\n                break;\n            }\n\n            continue;\n          }\n\n          if (v.is.node || isSVG || newNode.dom[name] === und) {\n            newNode.dom.setAttribute(name, newNode.props[name]);\n            continue;\n          }\n\n          newNode.dom[name] = newNode.props[name];\n        }\n      }\n\n      if (!v.is.mounted && !isNew) {\n        lifecycleCall(newNode, oninit);\n        lifecycleCall(newNode, oncreate);\n      }\n\n      lifecycleCall(newNode, isNew ? oncreate : onupdate, oldNode);\n    }\n  }\n\n  function serialize(el, outer = true) {\n    if (el.nodeType === 3) {\n      return el.textContent;\n    }\n\n    let name = el.nodeName.toLowerCase();\n    let str = '';\n    let i;\n    let attr = el.attributes;\n    let child = el.childNodes;\n\n    if (outer) {\n      str += `<${name}`;\n\n      for (i = 0; i < attr.length; i++) {\n        str += ` ${attr[i].name}=\"${attr[i].value}\"`;\n      }\n\n      str += '>';\n    }\n\n    for (i = 0; i < child.length; i++) {\n      str += serialize(child[i]);\n    }\n\n    str += outer ? `</${name}>` : '';\n    return str;\n  }\n\n  v.update = function (args) {\n    args = v.utils.flat(arguments, 0, []);\n    if (args[0] !== und && args[0].isComponent !== und) {\n      mountedComponent = args.shift();\n    }\n\n    return new Promise((resolve) => {\n      if (!v.is.updating) {\n        v.is.updating = true;\n        args.unshift(mountedComponent);\n        newTree = v.apply(v, args);\n        patch(mainContainer, newTree, oldTree);\n        oldTree = newTree;\n        v.is.updating = false;\n        v.is.mounted = true;\n        if (v.is.node) {\n          return resolve(serialize(mainContainer, false));\n        }\n        resolve();\n      }\n    });\n  };\n\n  v.mount = function (container) {\n    mainContainer = v.is.node\n      ? document.createElement('div')\n      : typeof container === 'string'\n        ? document.querySelectorAll(container)[0]\n        : container;\n\n    oldTree = v.utils.dom2vnode(mainContainer).children;\n\n    return v.update.apply(this, v.utils.flat(arguments, 1, []));\n  };\n};\n\nexport default plugin;\n","'use strict';\nimport Patch from './patch';\n\nfunction v(tagOrComponent, props, vnode, i, children) {\n  if (typeof tagOrComponent === 'string') {\n    vnode = {\n      name: tagOrComponent,\n      props: {},\n      children: [],\n      dom: null,\n      isVnode: true,\n      nt: 1,\n      isSVG: tagOrComponent === 'svg'\n    };\n\n    for (i in props) {\n      vnode.props[i] = props[i];\n    }\n\n    v.utils.flat(arguments, 2, vnode.children, true);\n    return vnode;\n  }\n\n  if (typeof tagOrComponent !== 'undefined' && tagOrComponent.isComponent !== true) {\n    if (typeof tagOrComponent === 'function') {\n      Object.assign(tagOrComponent, { view: tagOrComponent, isComponent: true }, props);\n      return tagOrComponent;\n    }\n\n    if (typeof tagOrComponent === 'object' && typeof tagOrComponent.view === 'function') {\n      tagOrComponent.isComponent = true;\n      return tagOrComponent;\n    }\n  }\n\n  if (tagOrComponent.isComponent) {\n    children = tagOrComponent.view.apply(tagOrComponent, v.utils.flat(arguments, 1, []));\n    return Array.isArray(children) ? children : [children];\n  }\n}\n\nv.utils = {\n  flat: function (args, start, arr, notEmpty, l) {\n    l = args.length;\n\n    if (notEmpty === undefined) {\n      notEmpty = false;\n    }\n\n    for (; start < l; start++) {\n      if (Array.isArray(args[start])) {\n        arr = v.utils.flat(args[start], 0, arr);\n        continue;\n      }\n      if (notEmpty === false || (args[start] !== undefined && args[start] !== null)) {\n        arr.push(args[start]);\n      }\n    }\n\n    return arr;\n  },\n  dom2vnode($el, vnode) {\n    if ($el.nodeType === 3) {\n      return {\n        name: '#text',\n        isVnode: true,\n        nodeValue: $el.nodeValue,\n        children: [],\n        dom: $el,\n        nt: 3\n      };\n    }\n\n    if ($el.nodeType === 1) {\n      vnode = {\n        name: $el.nodeName.toLowerCase(),\n        props: {},\n        children: [],\n        dom: $el,\n        isVnode: true,\n        nodeValue: null,\n        nt: 1\n      };\n\n      if (vnode.name === 'svg') {\n        vnode.isSVG = true;\n      }\n\n      vnode.dom.events = {};\n\n      Array.prototype.map.call($el.attributes, function (property) {\n        vnode.props[property.nodeName] = property.nodeValue;\n      });\n\n      Array.prototype.forEach.call($el.childNodes, function ($el) {\n        let childvnode = v.utils.dom2vnode($el);\n        if (childvnode !== undefined) {\n          vnode.children.push(childvnode);\n        }\n      });\n\n      return vnode;\n    }\n  }\n};\n\nv.is = {\n  node: typeof window === 'undefined',\n  mounted: false,\n  updating: false\n};\nv.is.browser = !v.is.node;\n\n// TODO: This could not be working with undom for server side\n// See: https://github.com/developit/undom/issues/7\nv.trust = function (htmlString) {\n  let div = document.createElement('div');\n  div.innerHTML = htmlString.trim();\n\n  return Array.prototype.map.call(div.childNodes, (item) => v.utils.dom2vnode(item));\n};\n\nlet plugins = [];\nv.use = function (plugin, options) {\n  if (plugins.indexOf(plugin) === -1) {\n    plugin(v, options);\n    plugins.push(plugin);\n  }\n  return v;\n};\n\nv.use(Patch);\n\n(v.is.node ? global : window).v = v;\n"],"names":["plugin","v","mountedComponent","oldTree","newTree","mainContainer","und","oninit","oncreate","onupdate","onremove","svgstr","lifecycleCall","vnode","methodName","oldNode","i","l","eventListener","e","createElement","newNode","isSVG","patch","$parent","max","isNew","name","serialize","el","outer","str","attr","child","args","resolve","container","tagOrComponent","props","children","start","arr","notEmpty","$el","property","childvnode","htmlString","div","item","plugins","options","Patch"],"mappings":"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"}