{"version":3,"file":"valyrian.min.js","sources":["../lib/router.js","../lib/h.js","../lib/s.js","../lib/request.js","../lib/patch.js","../lib/index.js"],"sourcesContent":["\r\n/**\r\n * Handles the mix of single and array of middlewares\r\n * @method parseMiddlewares\r\n * @param  {Function|Array}         middlewares     // Middleware or array of middlewares\r\n * @param  {Array}                  [array=[]]      // The array to store the final list of middlewares\r\n * @return {Array}                                  // The final list of middlewares\r\n */\r\nlet parseMiddlewares = (middlewares, array = []) => {\r\n    if (typeof middlewares === 'function') {\r\n        array.push(middlewares);\r\n        return array;\r\n    }\r\n\r\n    let i = 0, l = middlewares.length;\r\n    for (; i < l; i++) {\r\n        if (Array.isArray(middlewares[i])) {\r\n            parseMiddlewares(middlewares[i], array);\r\n        }\r\n\r\n        if (!Array.isArray(middlewares[i])) {\r\n            array.push(middlewares[i]);\r\n        }\r\n    }\r\n    return array;\r\n};\r\n\r\n/**\r\n * Adds a path to a router\r\n * @method addPath\r\n * @param  {Router} router              The router in which to add the path\r\n * @param  {String} method              The method that will handle this path\r\n * @param  {Array} args                The mixed params (String|Function|Array)\r\n */\r\nlet addPath = (router, method, args) => {\r\n    let path, middlewares;\r\n\r\n    // Get the first argument\r\n    if (typeof args[0] === 'string') {\r\n        path = args.shift();\r\n    }\r\n\r\n    // If the seccond argument is a function and has paths\r\n    // and regexpList properties then\r\n    // Treat it as a subrouter\r\n    if (\r\n        typeof args[0] === 'function' &&\r\n        args[0].paths !== undefined &&\r\n        args[0].regexpList !== undefined\r\n    ) {\r\n        let subrouter = args.shift(),\r\n            i = 0,\r\n            l = subrouter.paths.length;\r\n\r\n        // For each path of the subrouter\r\n        for (; i < l; i++) {\r\n            let submiddlewares = subrouter.paths[i].middlewares;\r\n            let submethod = subrouter.paths[i].method;\r\n            let subpath = subrouter.paths[i].path;\r\n\r\n            // If there is a path add it as prefix to the subpath\r\n            if (path !== undefined) {\r\n                subpath = path + (subpath || '*');\r\n            }\r\n\r\n            // If there are a subpath set it as the first element\r\n            // on the submiddlewares array\r\n            if (subpath !== undefined) {\r\n                submiddlewares.unshift(subpath);\r\n            }\r\n\r\n            // Add the path to the router\r\n            router = addPath(router, submethod, submiddlewares);\r\n        }\r\n    }\r\n\r\n    // Parse middlwares to handle mixed arrays of middlwares and sequenced middlwares\r\n    middlewares = parseMiddlewares(args);\r\n\r\n    // Add the path only if there are middlewares passed\r\n    if (middlewares.length > 0) {\r\n        // If the path wasn't set before, set the regexp and params list\r\n        if (path !== undefined && router.regexpList[path] === undefined) {\r\n            // Remove the last slash\r\n            path = path.replace(/\\/(\\?.*)?$/gi, '$1');\r\n\r\n            // Find the params like express params\r\n            let params = path.match(/:(\\w+)?/gi) || [];\r\n\r\n            // Set the names of the params found\r\n            for (let i in params) {\r\n                params[i] = params[i].replace(':', '');\r\n            }\r\n\r\n            let regexpPath = path\r\n                // Catch params\r\n                .replace(/:(\\w+)/gi, '([^\\\\s\\\\/]+)')\r\n                // To set to any url with the path as prefix\r\n                .replace(/\\*/g, '.*')\r\n                // Remove the last slash\r\n                .replace(/\\/(\\?.*)?$/gi, '$1');\r\n\r\n            // Set the object to the path\r\n            router.regexpList[path] = {\r\n                regexp: new RegExp('^' + regexpPath + '/?(\\\\?.*)?$', 'gi'),\r\n                params: params\r\n            };\r\n        }\r\n\r\n        // Add the path to the paths list\r\n        router.paths.push({\r\n            method: method,\r\n            path: path,\r\n            middlewares: middlewares\r\n        });\r\n    }\r\n\r\n    return router;\r\n};\r\n\r\n\r\nlet RouterFactory = (v, options = {}) => {\r\n    let opt = Object.assign({}, {\r\n        acceptedMethods: ['get', 'use'] // The methods that will be handled by the router\r\n    }, options);\r\n\r\n    /**\r\n     * new Rotuer\r\n     * @return {Function}           The async function to be passed to micro\r\n     */\r\n    const Router = function (container, mainComponent, attributes = {}) {\r\n        Router.container = container;\r\n        Router.attributes = attributes;\r\n        // This is the component that will be used on the backend to serve the initial load\r\n        Router.mainComponent = mainComponent;\r\n        return Router;\r\n    };\r\n\r\n    Router.default = '/';\r\n    Router.params = {};\r\n\r\n    Router.run = async function (url = Router.default, attributes = {}) {\r\n        let method = 'get',\r\n            middlewares = [],\r\n            response,\r\n            i = 0,\r\n            l = Router.paths.length;\r\n\r\n        Router.params = {};\r\n        v.assignAttributes(Router, attributes);\r\n\r\n        for (; i < l; i++) {\r\n            let path = Router.paths[i];\r\n            if (method !== path.method && path.method !== 'use') {\r\n                continue;\r\n            }\r\n\r\n            if ((path.method === 'use' || method === path.method) && path.path === undefined) {\r\n                middlewares = parseMiddlewares(path.middlewares, middlewares);\r\n                continue;\r\n            }\r\n\r\n            let matches = Router.regexpList[path.path].regexp.exec(url);\r\n            Router.regexpList[path.path].regexp.lastIndex = -1;\r\n            if (Array.isArray(matches)) {\r\n                matches.shift();\r\n                let l = Router.regexpList[path.path].params.length;\r\n                for (; l--;) {\r\n                    if (Router.params[Router.regexpList[path.path].params[l]] === undefined) {\r\n                        Router.params[Router.regexpList[path.path].params[l]] = matches[l];\r\n                    }\r\n                }\r\n                middlewares = parseMiddlewares(path.middlewares, middlewares);\r\n            }\r\n        }\r\n\r\n        if (middlewares.length > 0) {\r\n\r\n            let i = 0, l = middlewares.length;\r\n            // call sequentially every middleware\r\n            for (; i < l; i++) {\r\n                response = await middlewares[i]();\r\n                // If there is a response and the response is a component\r\n                // break the for block\r\n                if (v.isComponent(response)) {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            // If there is a response and no other response was sent to the client\r\n            // return the response\r\n            if (v.isComponent(response)) {\r\n                this.attributes.params = this.params;\r\n\r\n                if (this.isNode) {\r\n                    /* if (v.isMounted) {\r\n                        return v.update(this.mainComponent, v(response, this.attributes));\r\n                    } */\r\n                    return v.mount(this.container, this.mainComponent, v(response, this.attributes));\r\n                }\r\n\r\n                if (v.isMounted) {\r\n                    return v.update(response, this.attributes);\r\n                }\r\n                return v.mount(this.container, response, this.attributes);\r\n            }\r\n        }\r\n\r\n\r\n        throw new Error(`The url ${url} requested by ${method}, wasn't found`);\r\n    };\r\n\r\n    /**\r\n     * Where to store the paths and its middlewares\r\n     * @type {Object}\r\n     */\r\n    Router.paths = [];\r\n\r\n    /**\r\n     * Where to store the regexp and params list for the paths\r\n     * @type {[type]}\r\n     */\r\n    Router.regexpList = {};\r\n\r\n    /**\r\n     * For each accepted method, add the method to the router\r\n     * @type {Array}\r\n     */\r\n    opt.acceptedMethods.map(method => {\r\n        Router[method] = (...args) => addPath(Router, method, args);\r\n    });\r\n\r\n    Router.isNode = typeof window === 'undefined';\r\n\r\n    Router.go = function (url, attributes = {}) {\r\n        if (!Router.isNode) {\r\n            if (typeof url === 'number') {\r\n                window.history.go(url);\r\n                return;\r\n            };\r\n            window.history.pushState({}, '', url);\r\n        }\r\n        return Router.run(url, attributes);\r\n    };\r\n\r\n    if (!Router.isNode) {\r\n        Router.back = () => window.history.back();\r\n        Router.forward = () => window.history.forward();\r\n\r\n        window.addEventListener(\"popstate\", function (e) {\r\n            Router.run(document.location.pathname);\r\n        }, false);\r\n\r\n        window.document.addEventListener(\r\n            /https?:\\/\\//.test(window.document.URL) ?\r\n                'DOMContentLoaded' :\r\n                'deviceready',\r\n            function () {\r\n                Router.run(document.location.pathname);\r\n            },\r\n            false\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Return the new router\r\n     * @type {Router}\r\n     */\r\n    return Router;\r\n};\r\n\r\nexport default RouterFactory;\r\n","let h = function (...args) {\r\n    var vnode = {\r\n        name: 'div',\r\n        props: {},\r\n        children: []\r\n    },\r\n        l,\r\n        i,\r\n        attributes,\r\n        children;\r\n\r\n    if (typeof args[0] === 'string' && args[0].trim().length > 0) {\r\n        vnode.name = args.shift();\r\n    }\r\n\r\n    if (vnode.name === 'textNode') {\r\n        vnode.value = args.join(' ').trim();\r\n        return vnode;\r\n    }\r\n\r\n    if (!h.isVnode(args[0]) && typeof args[0] === 'object' && !Array.isArray(args[0]) && args[0] !== null) {\r\n        vnode.props = args.shift();\r\n    }\r\n\r\n    if (/(\\.|\\[|#)/gi.test(vnode.name)) {\r\n        attributes = vnode.name.match(/([\\.|\\#]\\w+|\\[[^\\]]+\\])/gi);\r\n        vnode.name = vnode.name.replace(/([\\.|\\#]\\w+|\\[[^\\]]+\\])/gi, '');\r\n        if (attributes) {\r\n            for (l = attributes.length; l--;) {\r\n                if (attributes[l].charAt(0) === '#') {\r\n                    vnode.props.id = attributes[l].slice(1);\r\n                    continue;\r\n                }\r\n\r\n                if (attributes[l].charAt(0) === '.') {\r\n                    vnode.props.class = ((vnode.props.class || '') + ' ' + attributes[l].slice(1)).trim();\r\n                    continue;\r\n                }\r\n\r\n                if (attributes[l].charAt(0) === '[') {\r\n                    attributes[l] = attributes[l].trim().slice(1, -1).split('=');\r\n                    vnode.props[attributes[l][0]] = attributes[l][1];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    for (i = 0, l = args.length; i < l; i++) {\r\n        if (Array.isArray(args[i])) {\r\n            for (var k = 0, kl = args[i].length; k < kl; k++) {\r\n                vnode.children.push(h.isVnode(args[i][k]) ? args[i][k] : h('textNode', args[i][k]));\r\n            }\r\n            // vnode.children.push.apply(vnode.children, args[i]);\r\n            continue;\r\n        }\r\n\r\n        vnode.children.push(h.isVnode(args[i]) ? args[i] : h('textNode', args[i]));\r\n        // vnode.children.push(typeof args[i] === 'undefined' ? 'undefined' : args[i]);\r\n    }\r\n\r\n    return vnode;\r\n};\r\n\r\nh.isVnode = function (vnode) {\r\n    return vnode && vnode.name && vnode.props && vnode.children;\r\n};\r\n\r\nh.vnode = function ($el) {\r\n    if ($el) {\r\n        if ($el.nodeType === 3) {\r\n            return {\r\n                value: $el.nodeValue,\r\n                name: 'textNode',\r\n                props: {},\r\n                children: [],\r\n                dom: $el\r\n            };\r\n        }\r\n\r\n        return {\r\n            name: $el.nodeName.toLowerCase(),\r\n            props: {},\r\n            children: Array.prototype.map.call($el.childNodes, $el => h.vnode($el)),\r\n            dom: $el\r\n        };\r\n    }\r\n};\r\n\r\nexport default h;\r\n","let SFactory = function (v) {\r\n    let s = {\r\n        storeUpdateMethods: [],\r\n        onStoreUpdate(onupdate) {\r\n            if (typeof onupdate === 'function') {\r\n                s.storeUpdateMethods.push(onupdate);\r\n            }\r\n        },\r\n        update() {\r\n            var l = s.storeUpdateMethods.length,\r\n                i = 0;\r\n\r\n            for (; i < l; i++) {\r\n                s.storeUpdateMethods[i]();\r\n            }\r\n        },\r\n        fps: 60,\r\n\r\n        storeUpdated() {\r\n            s.t = s.t || Date.now();\r\n            if (Date.now() - s.t > 1000 / s.fps) {\r\n                if (typeof requestAnimationFrame === 'function') {\r\n                    requestAnimationFrame(s.update);\r\n                } else {\r\n                    setTimeout(s.update, 1);\r\n                }\r\n                s.t = Date.now();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Simple Getter Setter\r\n         * Can call a given function when updated\r\n         * @param Any\r\n         * @param function (optional)\r\n         * @return function\r\n         */\r\n        storeData(val, onchange) {\r\n            let previousVal = undefined, newval = undefined, ret;\r\n            /**\r\n             * Returned function\r\n             * If param is provided, sets the current value to this param,\r\n             * call the function if any and return the final value.\r\n             * You can process the value provided in the function by accessing it with this.val\r\n             * If no param is provided, gets the current value\r\n             * @param Any (optional)\r\n             */\r\n            ret = function (val) {\r\n                if (val !== undefined) {\r\n                    ret.value = val;\r\n                }\r\n\r\n                return ret.valueOf();\r\n            };\r\n\r\n            ret.toString = function () {\r\n                return ret.valueOf().toString();\r\n            };\r\n\r\n            ret.valueOf = function () {\r\n                if (typeof ret.value === 'function') {\r\n                    newval = ret.value();\r\n                }\r\n\r\n                if (typeof ret.value !== 'function') {\r\n                    newval = ret.value;\r\n                }\r\n\r\n                if (newval !== previousVal) {\r\n                    if (typeof onchange === 'function') {\r\n                        onchange.apply(ret, [previousVal, newval]);\r\n                    }\r\n                    s.storeUpdated();\r\n                }\r\n\r\n                previousVal = newval;\r\n\r\n                return newval;\r\n            };\r\n\r\n            ret(val);\r\n\r\n            return ret;\r\n        }\r\n    };\r\n    return s;\r\n};\r\n\r\n\r\nexport default SFactory;\r\n","let Request = function (baseUrl = '', options = {}) {\r\n    let url = baseUrl.replace(/\\/$/gi, '').trim(),\r\n        opts = Object.assign({}, options);\r\n\r\n    let methods = ['get', 'post', 'put', 'patch', 'delete', 'options'];\r\n\r\n    let r = function (baseUrl, options) {\r\n        let url = r.baseUrl + '/' + baseUrl,\r\n            opts = Object.assign({}, r.options, options);\r\n        return Request(url, opts);\r\n    };\r\n\r\n    r.apiUrl = undefined;\r\n    r.nodeUrl = undefined;\r\n    r.isNode = typeof window === 'undefined';\r\n    r.options = opts;\r\n    r.baseUrl = url;\r\n    r.fetch = r.isNode ? require('node-fetch') : fetch.bind(window);\r\n\r\n    r.serialize = function (obj, prefix) {\r\n        let e = encodeURIComponent;\r\n        return '?' + Object.keys(obj).map(k => {\r\n            if (prefix !== undefined) {\r\n                k = prefix + \"[\" + k + \"]\";\r\n            }\r\n\r\n            return typeof obj[k] === 'object' ?\r\n                r.serlialize(obj[k], k) :\r\n                e(k) + '=' + e(obj[k]);\r\n        }).join('&');\r\n    };\r\n\r\n    r.request = function (method, url, data, options = {}) {\r\n        let opts = Object.assign({\r\n            method: method.toLowerCase(),\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }, r.options, options),\r\n            type = opts.headers.Accept;\r\n\r\n        if (data !== undefined) {\r\n            if (opts.method === 'get' && typeof data === 'object') {\r\n                url += data = r.serialize(data);\r\n            }\r\n\r\n            if (opts.method !== 'get') {\r\n                opts.body = JSON.stringify(data);\r\n            }\r\n        }\r\n\r\n        return r.fetch(r.parseUrl(url), opts)\r\n            .then(response => {\r\n                if (response.status < 200 || response.status > 300) {\r\n                    let err = new Error(response.statusText);\r\n                    err.response = response;\r\n                    throw err;\r\n                }\r\n\r\n                if (/text/gi.test(type)) {\r\n                    return response.text();\r\n                }\r\n\r\n                if (/json/gi.test(type)) {\r\n                    return response.json();\r\n                }\r\n\r\n                return response;\r\n            });\r\n    };\r\n\r\n    r.parseUrl = function (url) {\r\n        let u = (r.baseUrl + '/' + url).trim().replace(/^\\/\\//gi, '/').trim();\r\n        if (\r\n            r.isNode &&\r\n            typeof r.nodeUrl === 'string'\r\n        ) {\r\n            r.nodeUrl = r.nodeUrl.replace(/\\/$/gi, '').trim();\r\n\r\n            if (/^http/gi.test(u) && typeof r.apiUrl === 'string') {\r\n                r.apiUrl = r.apiUrl.replace(/\\/$/gi, '').trim();\r\n                u = u.replace(r.apiUrl, r.nodeUrl);\r\n            }\r\n\r\n            if (!/^http/gi.test(u)) {\r\n                u = r.nodeUrl + u;\r\n            }\r\n        }\r\n        return u;\r\n    };\r\n\r\n    methods.forEach(method =>\r\n        r[method] = (url, data, options) => r.request(method, url, data, options)\r\n    );\r\n\r\n    return r;\r\n};\r\n\r\nexport default Request;\r\n","let PatchFactory = function (v) {\r\n    let document = v.document;\r\n\r\n    function setProp($target, name, value) {\r\n        if (name === 'className') {\r\n            $target.setAttribute('class', value);\r\n            return;\r\n        }\r\n\r\n        if (typeof value === 'function') {\r\n            $target[name] = value.bind($target);\r\n            return;\r\n        }\r\n\r\n        if (typeof value === 'boolean') {\r\n            $target[name] = value;\r\n        }\r\n\r\n        if (value !== undefined && value !== false) {\r\n            $target.setAttribute(name, value);\r\n        } else {\r\n            $target.removeAttribute(name);\r\n        }\r\n    }\r\n\r\n    function updateProps(newNode, oldNode = {}) {\r\n        // const props = Object.assign({}, newProps, oldProps);\r\n        var newProps = newNode.props,\r\n            oldProps = oldNode.props || {};\r\n\r\n        const props = Object.assign(\r\n            {},\r\n            newProps,\r\n            oldProps\r\n        );\r\n        for (let name in props) {\r\n            if (newProps[name] !== oldProps[name]) {\r\n                setProp(newNode.dom, name, newProps[name]);\r\n            }\r\n        }\r\n    }\r\n\r\n    function lifecycleCall(vnode, methodName, ...args) {\r\n        if (v.isVnode(vnode)) {\r\n            let method = vnode.props[methodName];\r\n            if (method && method.call) {\r\n                args.unshift(vnode);\r\n                return method.apply(vnode, args);\r\n            }\r\n        }\r\n    }\r\n\r\n    function createElement(vnode) {\r\n        var $el;\r\n        delete vnode.dom;\r\n        lifecycleCall(vnode, 'oninit');\r\n        $el = vnode.name === 'textNode' ?\r\n            document.createTextNode(vnode.value) :\r\n            vnode.name === \"svg\" ?\r\n                document.createElementNS(\"http://www.w3.org/2000/svg\", vnode.name) :\r\n                document.createElement(vnode.name);\r\n\r\n        vnode.dom = $el;\r\n        updateProps(vnode);\r\n\r\n        for (let i = 0; i < vnode.children.length; i++) {\r\n            $el.appendChild(createElement(vnode.children[i]));\r\n        }\r\n\r\n        lifecycleCall(vnode, 'oncreate');\r\n        return $el;\r\n    }\r\n\r\n    function removeElement(oldNode, destroyed = false) {\r\n        return Promise.resolve(lifecycleCall(oldNode, 'onbeforeremove'))\r\n            .then(() => {\r\n                if (!destroyed && oldNode.dom && oldNode.dom.parentElement) {\r\n                    oldNode.dom.parentElement.removeChild(oldNode.dom);\r\n                }\r\n\r\n                let i = 0, l = oldNode.children.length;\r\n                for (; i < l; i++) {\r\n                    removeElement(oldNode.children[i], destroyed);\r\n                }\r\n\r\n                lifecycleCall(oldNode, 'onremove');\r\n            });\r\n    }\r\n\r\n    function patch($parent, newNode, oldNode) {\r\n        // console.log(0, $parent, newNode, oldNode);\r\n\r\n        // New node\r\n        if (oldNode === undefined && newNode !== undefined) {\r\n            // console.log(2, newNode);\r\n            $parent.appendChild(createElement(newNode));\r\n            return $parent;\r\n        }\r\n\r\n        // Deleted node\r\n        if (newNode === undefined) {\r\n            // console.log(3, oldNode);\r\n            removeElement(oldNode);\r\n            return $parent;\r\n        }\r\n\r\n        if (v.isVnode(oldNode) && v.isVnode(newNode)) {\r\n            newNode.dom = oldNode.dom;\r\n\r\n            // Same node\r\n            if (newNode.name === 'textNode' && oldNode.value == newNode.value) {\r\n                // console.log(1, newNode, oldNode);\r\n                return $parent;\r\n            }\r\n\r\n            // New node replacing old node\r\n            if (\r\n                (newNode.name === 'textNode' && newNode.value != oldNode.value) ||\r\n                newNode.name !== oldNode.name\r\n            ) {\r\n                // console.log(4, $parent, newNode, oldNode);\r\n                createElement(newNode);\r\n                Promise.resolve(removeElement(oldNode, true))\r\n                    .then(() => {\r\n                        $parent.replaceChild(newNode.dom, oldNode.dom);\r\n                    });\r\n                return $parent;\r\n            }\r\n\r\n            // Same node updated\r\n            // console.log(5, newNode, oldNode);\r\n            // if (lifecycleCall(newNode, 'onbeforeupdate', oldNode) === false){\r\n            //     return $parent;\r\n            // }\r\n\r\n            if (!v.isMounted) {\r\n                lifecycleCall(newNode, 'oninit');\r\n                lifecycleCall(newNode, 'oncreate');\r\n            }\r\n\r\n            updateProps(newNode, oldNode);\r\n\r\n            const max = Math.max(newNode.children.length, oldNode.children.length);\r\n            for (let i = 0; i < max; i++) {\r\n                patch(\r\n                    newNode.dom,\r\n                    newNode.children[i],\r\n                    oldNode.children[i]\r\n                );\r\n            }\r\n\r\n            lifecycleCall(newNode, 'onupdate');\r\n            return $parent;\r\n        }\r\n\r\n        // console.log(6, newNode, oldNode);\r\n\r\n        return $parent;\r\n    };\r\n\r\n    return patch;\r\n};\r\n\r\nexport default PatchFactory;\r\n","import Router from './router';\r\nimport h from './h';\r\nimport S from './s';\r\nimport Request from './request';\r\nimport Patch from './patch';\r\n\r\nlet VFactory = function () {\r\n\r\n    let v = function (...args) {\r\n        if (v.isComponent(args[0])) {\r\n            return v.render.apply(v, args);\r\n        }\r\n\r\n        return h.apply(h, args);\r\n    };\r\n\r\n    v.r = Request();\r\n\r\n    ['get', 'post', 'put', 'patch', 'delete', 'options'].forEach(method =>\r\n        v[method] = (url, data, options) => v.r.request(method, url, data, options)\r\n    );\r\n\r\n    v.router = Router(v);\r\n\r\n    v.isVnode = h.isVnode;\r\n    v.vnode = h.vnode;\r\n\r\n    v.isNode = typeof window === 'undefined';\r\n\r\n    v.window = v.isNode ? require('html-element') : window;\r\n    v.document = v.window.document;\r\n\r\n    var patch = Patch(v);\r\n\r\n    v.resetToDefaults = function () {\r\n        v.isMounted = false;\r\n        v.container = v.document.createElement('html');\r\n        v.parent = v.document.createElement('div');\r\n        v.parent.appendChild(v.container);\r\n        v.rootTree = v.vnode(v.container);\r\n        v.oldTree = Object.assign({}, v.rootTree);\r\n    };\r\n    v.resetToDefaults();\r\n    // console.log(v.rootTree);\r\n\r\n    v.rootComponent = undefined;\r\n\r\n    v.assignAttributes = function (component, attributes = {}) {\r\n        if (attributes.name && attributes.props && Array.isArray(attributes.children)) {\r\n            component.attributes = { children: attributes };\r\n        } else {\r\n            component.attributes = Object.assign({}, component.attributes, attributes);\r\n        }\r\n    };\r\n\r\n    v.parseNodes = function (nodes, array = []) {\r\n        if (!Array.isArray(nodes)) {\r\n            array.push(nodes);\r\n            return array;\r\n        }\r\n\r\n        let i = 0, l = nodes.length;\r\n        for (; i < l; i++) {\r\n            if (Array.isArray(nodes[i])) {\r\n                v.parseNodes(nodes[i], array);\r\n            }\r\n\r\n            if (!Array.isArray(nodes[i])) {\r\n                array.push(nodes[i]);\r\n            }\r\n        }\r\n        return array;\r\n    };\r\n\r\n    v.render = function (component, attributes = {}) {\r\n        var nodes;\r\n        if (!v.isComponent(component)) {\r\n            throw new Error('A component is required');\r\n            return;\r\n        }\r\n\r\n        v.assignAttributes(component, attributes);\r\n\r\n        nodes = v.parseNodes(component.view());\r\n\r\n        return nodes;\r\n    };\r\n\r\n    v.mount = function (container, component, attributes = {}) {\r\n        if (container === undefined) {\r\n            throw new Error('A container element is required as first element');\r\n            return;\r\n        }\r\n\r\n        if (!v.isComponent(component)) {\r\n            throw new Error('A component is required as a second argument');\r\n            return;\r\n        }\r\n\r\n        v.container = container;\r\n        v.rootTree = v.vnode(v.container);\r\n        v.oldTree = Object.assign({}, v.rootTree);\r\n\r\n        return v.update(component, attributes);\r\n    };\r\n\r\n    v.update = function (component, attributes = {}) {\r\n        if (v.isComponent(component)) {\r\n            v.assignAttributes(component, attributes);\r\n            v.rootComponent = component;\r\n            v.rootTree.props = Object.assign({}, v.rootTree.props, v.rootComponent);\r\n            Object.keys(v.rootComponent).forEach(prop => {\r\n                if (typeof prop === 'function') {\r\n                    v.rootTree.props.bind(v.rootComponent);\r\n                }\r\n            });\r\n        };\r\n\r\n        if (v.isNode) {\r\n            v.resetToDefaults();\r\n        }\r\n\r\n        v.rootTree.children = v.render(v.rootComponent);\r\n\r\n        // console.log('******************************');\r\n        patch(v.rootTree.dom.parentElement, v.rootTree, v.oldTree);\r\n        // console.log('******************************');\r\n\r\n        v.oldTree = Object.assign({}, v.rootTree);\r\n\r\n        if (!v.isMounted) {\r\n            v.isMounted = true;\r\n        }\r\n        return v.isNode ? v.rootTree.dom.parentElement.innerHTML : v.rootTree.dom.parentElement;\r\n    };\r\n\r\n    v.isComponent = function (component) {\r\n        return typeof component === 'object' &&\r\n            component !== null &&\r\n            typeof component.view === 'function';\r\n    };\r\n\r\n    var s = S(v);\r\n\r\n    v.data = function (...args) {\r\n        return s.storeData.apply(s, args);\r\n    };\r\n\r\n    v.onStoreUpdate = function (...args) {\r\n        return s.onStoreUpdate.apply(s, args);\r\n    };\r\n\r\n    v.onStoreUpdate(function () {\r\n        v.update();\r\n    });\r\n\r\n    return v;\r\n};\r\n\r\n(typeof window === 'undefined'\r\n    ? global\r\n    : window).Valyrian = VFactory;\r\n\r\n"],"names":["let","i","const","l","Router","Patch","S"],"mappings":"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"}