{"version":3,"file":"valyrian.min.js","sources":["../lib/router.js","../lib/h.js","../lib/request.js","../lib/index.js","../lib/patch.js"],"sourcesContent":["/**\n * Handles the mix of single and array of middlewares\n * @method parseMiddlewares\n * @param  {Function|Array}         middlewares     // Middleware or array of middlewares\n * @param  {Array}                  [array=[]]      // The array to store the final list of middlewares\n * @return {Array}                                  // The final list of middlewares\n */\nlet parseMiddlewares = (middlewares, array = []) => {\n    if (typeof middlewares === 'function') {\n        array.push(middlewares);\n        return array;\n    }\n\n    let i = 0, l = middlewares.length;\n    for (; i < l; i++) {\n        if (Array.isArray(middlewares[i])) {\n            parseMiddlewares(middlewares[i], array);\n        }\n\n        if (!Array.isArray(middlewares[i])) {\n            array.push(middlewares[i]);\n        }\n    }\n    return array;\n};\n\n/**\n * Adds a path to a router\n * @method addPath\n * @param  {Router} router              The router in which to add the path\n * @param  {String} method              The method that will handle this path\n * @param  {Array} args                The mixed params (String|Function|Array)\n */\nlet addPath = (router, method, args) => {\n    let path, middlewares;\n\n    // Get the first argument\n    if (typeof args[0] === 'string') {\n        path = args.shift();\n    }\n\n    // If the seccond argument is a function and has paths\n    // and regexpList properties then\n    // Treat it as a subrouter\n    if (\n        typeof args[0] === 'function' &&\n        args[0].paths !== undefined &&\n        args[0].regexpList !== undefined\n    ) {\n        let subrouter = args.shift(),\n            i = 0,\n            l = subrouter.paths.length;\n\n        // For each path of the subrouter\n        for (; i < l; i++) {\n            let submiddlewares = subrouter.paths[i].middlewares;\n            let submethod = subrouter.paths[i].method;\n            let subpath = subrouter.paths[i].path;\n\n            // If there is a path add it as prefix to the subpath\n            if (path !== undefined) {\n                subpath = path + (subpath || '*');\n            }\n\n            // If there are a subpath set it as the first element\n            // on the submiddlewares array\n            if (subpath !== undefined) {\n                submiddlewares.unshift(subpath);\n            }\n\n            // Add the path to the router\n            router = addPath(router, submethod, submiddlewares);\n        }\n    }\n\n    // Parse middlwares to handle mixed arrays of middlwares and sequenced middlwares\n    middlewares = parseMiddlewares(args);\n\n    // Add the path only if there are middlewares passed\n    if (middlewares.length > 0) {\n        // If the path wasn't set before, set the regexp and params list\n        if (path !== undefined && router.regexpList[path] === undefined) {\n            // Remove the last slash\n            path = path.replace(/\\/(\\?.*)?$/gi, '$1');\n\n            // Find the params like express params\n            let params = path.match(/:(\\w+)?/gi) || [];\n\n            // Set the names of the params found\n            for (let i in params) {\n                params[i] = params[i].replace(':', '');\n            }\n\n            let regexpPath = path\n                // Catch params\n                .replace(/:(\\w+)/gi, '([^\\\\s\\\\/|\\\\?]+)')\n                // To set to any url with the path as prefix\n                .replace(/\\*/g, '.*')\n                // Remove the last slash\n                .replace(/\\/(\\?.*)?$/gi, '$1');\n\n            // Set the object to the path\n            router.regexpList[path] = {\n                regexp : new RegExp('^' + regexpPath  + '/?(\\\\?.*)?$', 'gi'),\n                params: params\n            }\n        }\n\n        // Add the path to the paths list\n        router.paths.push({\n            method: method,\n            path: path,\n            middlewares: middlewares\n        });\n    }\n\n    return router;\n};\n\nlet RouterFactory = () => {\n    /**\n     * new Rotuer\n     * @param  {Request}    req     NodeJs Request object\n     * @param  {Response}   res     NodeJs Response object\n     * @return {Function}           The async function to be passed to micro\n     */\n    let Router = async function (url = '/') {\n        let method = 'get',\n            params = {},\n            middlewares = [],\n            response,\n            i = 0,\n            l = Router.paths.length;\n        \n        Router.url = url;\n\n        for (; i < l; i++) {\n            let path = Router.paths[i];\n            if (method !== path.method && path.method !== 'use') {\n                continue;\n            }\n\n            if ((path.method === 'use' || method === path.method) && path.path === undefined) {\n                middlewares = parseMiddlewares(path.middlewares, middlewares);\n                continue;\n            }\n\n            let matches = Router.regexpList[path.path].regexp.exec(url);\n            Router.regexpList[path.path].regexp.lastIndex = -1;\n            if (Array.isArray(matches)) {\n                matches.shift();\n                let l = Router.regexpList[path.path].params.length;\n                for (; l--;) {\n                    if (params[Router.regexpList[path.path].params[l]] === undefined) {\n                        params[Router.regexpList[path.path].params[l]] = matches[l];\n                    }\n                }\n                middlewares = parseMiddlewares(path.middlewares, middlewares);\n            }\n        }\n\n        Router.params = params;\n\n        if (middlewares.length > 0) {\n            let i = 0, l = middlewares.length;\n            // call sequentially every middleware\n            for (; i < l; i++) {\n                response = await middlewares[i](params);\n                // If there is a response or a response was sent to the client\n                // break the for block\n                if (response !== undefined) {\n                    return response;\n                }\n            }\n        }\n\n        if (Router.throwNotFound){\n            // If no response was sent to the client throw an error\n            throw new Error(`The url ${url} requested wasn't found`);\n        }\n    };\n\n    Router.url = '/';\n    Router.params = {};\n    Router.throwNotFound = true;\n\n    /**\n     * Where to store the paths and its middlewares\n     * @type {Object}\n     */\n    Router.paths = [];\n\n    /**\n     * Where to store the regexp and params list for the paths\n     * @type {[type]}\n     */\n    Router.regexpList = {};\n\n    /**\n     * For each accepted method, add the method to the router\n     * @type {Array}\n     */\n    ['get', 'use'].map(method => {\n        Router[method] = (...args) => addPath(Router, method, args);\n    });\n\n    /**\n     * Return the new router\n     * @type {Router}\n     */\n    return Router;\n};\n\nexport default RouterFactory;","let h = function (...args) {\n    var vnode = {\n        name: 'div',\n        props: {},\n        children: []\n    },\n        l,\n        i,\n        attributes,\n        children;\n\n    if (typeof args[0] === 'string' && args[0].trim().length > 0) {\n        vnode.name = args.shift();\n    }\n\n    if (vnode.name === 'textNode') {\n        vnode.value = args.join(' ').trim();\n        return vnode;\n    }\n\n    if (!h.isVnode(args[0]) && typeof args[0] === 'object' && !Array.isArray(args[0]) && args[0] !== null) {\n        vnode.props = args.shift();\n    }\n\n    if (/(\\.|\\[|#)/gi.test(vnode.name)) {\n        attributes = vnode.name.match(/([\\.|\\#]\\w+|\\[[^\\]]+\\])/gi);\n        vnode.name = vnode.name.replace(/([\\.|\\#]\\w+|\\[[^\\]]+\\])/gi, '');\n        if (attributes) {\n            for (l = attributes.length; l--;) {\n                if (attributes[l].charAt(0) === '#') {\n                    vnode.props.id = attributes[l].slice(1);\n                    continue;\n                }\n\n                if (attributes[l].charAt(0) === '.') {\n                    vnode.props.class = ((vnode.props.class || '') + ' ' + attributes[l].slice(1)).trim();\n                    continue;\n                }\n\n                if (attributes[l].charAt(0) === '[') {\n                    attributes[l] = attributes[l].trim().slice(1, -1).split('=');\n                    vnode.props[attributes[l][0]] = attributes[l][1];\n                }\n            }\n        }\n    }\n\n    let nodes = h.flatenArray(args);\n\n    for (i = 0, l = nodes.length; i < l; i++) {\n        vnode.children.push(h.isVnode(nodes[i]) ? nodes[i] : h('textNode', nodes[i]));\n    }\n\n    return vnode;\n};\n\nh.flatenArray = function(nodes, array = []) {\n    if (!Array.isArray(nodes)) {\n        array.push(nodes);\n        return array;\n    }\n\n    let i = 0, l = nodes.length;\n    for (; i < l; i++) {\n        if (Array.isArray(nodes[i])) {\n            h.flatenArray(nodes[i], array);\n        }\n\n        if (!Array.isArray(nodes[i])) {\n            array.push(nodes[i]);\n        }\n    }\n\n    return array;\n};\n\nh.isVnode = function (vnode) {\n    return vnode && vnode.name && vnode.props && vnode.children;\n};\n\nh.vnode = function ($el) {\n    if ($el) {\n        if ($el.nodeType === 3) {\n            return {\n                value: $el.nodeValue,\n                name: 'textNode',\n                props: {},\n                children: [],\n                dom: $el\n            };\n        }\n\n        return {\n            name: $el.nodeName.toLowerCase(),\n            props: {},\n            children: Array.prototype.map.call($el.childNodes, $el => h.vnode($el)),\n            dom: $el\n        };\n    }\n};\n\nexport default h;\n","let Request = function (baseUrl = '', options = {}) {\n    let url = baseUrl.replace(/\\/$/gi, '').trim(),\n        opts = Object.assign({}, options);\n\n    let methods = ['get', 'post', 'put', 'patch', 'delete', 'options', 'head'];\n\n    let r = function (baseUrl, options) {\n        let url = r.baseUrl + '/' + baseUrl,\n            opts = Object.assign({}, r.options, options);\n        return Request(url, opts);\n    };\n\n    r.apiUrl = undefined;\n    r.nodeUrl = undefined;\n    r.isNode = typeof window === 'undefined';\n    r.options = opts;\n    r.baseUrl = url;\n    let Fetch = r.isNode ? require('node-fetch') : fetch.bind(window);\n\n    function serialize(obj, prefix) {\n        let e = encodeURIComponent;\n        return '?' + Object.keys(obj).map(k => {\n            if (prefix !== undefined) {\n                k = prefix + \"[\" + k + \"]\";\n            }\n\n            return typeof obj[k] === 'object' ?\n                serialize(obj[k], k) :\n                e(k) + '=' + e(obj[k]);\n        }).join('&');\n    };\n\n    function parseUrl (url) {\n        let u = (r.baseUrl + '/' + url).trim().replace(/^\\/\\//gi, '/').trim();\n        if (\n            r.isNode &&\n            typeof r.nodeUrl === 'string'\n        ) {\n            r.nodeUrl = r.nodeUrl.replace(/\\/$/gi, '').trim();\n\n            if (/^http/gi.test(u) && typeof r.apiUrl === 'string') {\n                r.apiUrl = r.apiUrl.replace(/\\/$/gi, '').trim();\n                u = u.replace(r.apiUrl, r.nodeUrl);\n            }\n\n            if (!/^http/gi.test(u)) {\n                u = r.nodeUrl + u;\n            }\n        }\n        return u;\n    };\n\n    function request(method, url, data, options = {}) {\n        let opts = Object.assign({\n            method: method.toLowerCase(),\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }, r.options, options),\n            type = opts.headers.Accept;\n\n        if (data !== undefined) {\n            if (opts.method === 'get' && typeof data === 'object') {\n                url += data = serialize(data);\n            }\n\n            if (opts.method !== 'get') {\n                opts.body = JSON.stringify(data);\n            }\n        }\n\n        return Fetch(parseUrl(url), opts)\n            .then(response => {\n                if (response.status < 200 || response.status > 300) {\n                    let err = new Error(response.statusText);\n                    err.response = response;\n                    throw err;\n                }\n\n                if (/text/gi.test(type)) {\n                    return response.text();\n                }\n\n                if (/json/gi.test(type)) {\n                    return response.json();\n                }\n\n                return response;\n            });\n    };\n\n    methods.forEach(method =>\n        r[method] = (url, data, options) => request(method, url, data, options)\n    );\n\n    return r;\n};\n\nexport default Request();\n","import RouterFactory from './router';\nimport h from './h';\nimport Request from './request';\nimport Patch from './patch';\n\nlet VFactory = function () {\n\n    let v = function (...args) {\n        if (v.isComponent(args[0])) {\n            return render.apply(v, args);\n        }\n\n        return h.apply(h, args);\n    };\n\n    v.ready = function(callback){\n        addEvent(\n            document, \n            /https?:\\/\\//.test(window.document.URL) ?\n                'DOMContentLoaded' :\n                'deviceready', \n            callback, \n            false\n        );\n    };\n\n    v.request = Request;\n    Object.keys(Request).forEach(key => {\n        if (typeof Request[key] === 'function'){\n            v[key] = (...args) => Request[key]\n                .apply(Request, args)\n                .then(res => {\n                    v.update();\n                    return res;\n                });\n        }\n    });\n\n    v.router = RouterFactory;\n\n    v.isVnode = h.isVnode;\n    v.vnode = h.vnode;\n    v.flatenArray = h.flatenArray;\n\n    v.isNode = typeof window === 'undefined';\n    v.isBrowser = !v.isNode;\n\n    v.window = v.isNode ? require('html-element') : window;\n    v.document = v.window.document;\n\n    let patch = Patch(v);\n\n    function resetToDefaults() {\n        v.isMounted = false;\n        v.container = v.document.createElement('html');\n        v.parent = v.document.createElement('div');\n        v.parent.appendChild(v.container);\n        v.rootTree = v.vnode(v.container);\n        v.oldTree = Object.assign({}, v.rootTree);\n    };\n    resetToDefaults();\n\n    v.rootComponent = undefined;\n\n    function assignAttributes(component, attributes = {}) {\n        if (attributes.name && attributes.props && Array.isArray(attributes.children)) {\n            component.attributes = { children: attributes };\n            return;\n        } \n\n        if (Array.isArray(attributes)){\n            component.attributes = {children: attributes.length === 1 ? attributes[0] : attributes};\n            return;\n        }\n        \n        component.attributes = Object.assign({}, component.attributes, attributes);\n    };\n\n    function render(component, attributes = {}) {\n        assignAttributes(component, attributes);\n\n        let nodes = component.view();\n\n        return Array.isArray(nodes) ? nodes : [nodes];\n    };\n\n    function addEvent(container, events, handler, useCapture){\n        if (v.isBrowser){\n            events.split(' ').forEach(event => {\n                container.addEventListener(\n                    event,\n                    handler,\n                    useCapture\n                );\n            });   \n        }\n    }\n\n    function removeEvent(container, events, handler){\n        if (v.isBrowser){\n            events.split(' ').forEach(event => {\n                container.removeEventListener(\n                    event,\n                    handler\n                );\n            });\n        }\n    }\n\n    v.mount = function (container, component, attributes = {}) {\n        if (container === undefined) {\n            throw new Error('A container element is required as first element');\n            return;\n        }\n\n        if (!v.isComponent(component)) {\n            throw new Error('A component is required as a second argument');\n            return;\n        }\n\n        if (v.isBrowser && v.container){\n            removeEvent(v.container, 'mouseup keyup', v.update);\n        }\n\n        v.container = v.isNode ? v.document.createElement('div') : typeof container === 'string' ? v.document.querySelectorAll(container)[0] : container;\n        v.rootTree = v.vnode(v.container);\n        v.oldTree = Object.assign({}, v.rootTree);\n\n        if (v.isBrowser){\n            addEvent(v.container, 'mouseup keyup', v.update, false);\n        }\n\n        return v.update(component, attributes);\n    };\n\n    function redraw(component, attributes = {}){\n        if (v.isComponent(component)) {\n            assignAttributes(component, attributes);\n            v.rootComponent = component;\n            v.rootTree.props = {};\n            Object.keys(v.rootComponent).forEach(prop => {\n                if (typeof v.rootComponent[prop] === 'function') {\n                    v.rootTree.props[prop] = (...args) => v.rootComponent[prop].apply(v.rootComponent, args);\n                }\n            });\n        };\n\n        if (v.rootComponent){\n            if (v.isNode) {\n                resetToDefaults();\n            }\n    \n            v.rootTree.children = render(v.rootComponent);\n    \n            // console.log('******************************');\n            patch(v.rootTree.dom.parentElement, v.rootTree, v.oldTree);\n            // console.log('******************************');\n    \n            v.oldTree = Object.assign({}, v.rootTree);\n    \n            if (!v.isMounted) {\n                v.isMounted = true;\n            }\n        }\n        \n        return v.isNode ? require('he').decode(v.rootTree.dom.parentElement.innerHTML) : v.rootTree.dom.parentElement;\n    };\n\n    v.update = function (component, attributes = {}) {\n        if (v.isBrowser){\n            requestAnimationFrame(() => redraw(component, attributes));\n            return;\n        }\n        return redraw(component, attributes);\n    };\n\n    v.isComponent = function (component) {\n        return typeof component === 'object' &&\n            component !== null &&\n            typeof component.view === 'function';\n    };\n\n    v.routes = function(container, router) {\n        if (container && router){\n            v.routes.router = router;\n            v.routes.container = container;\n            // Activate the use of the router\n            v.routes.init();\n            return;\n        }\n        \n        let routes = [];\n        v.routes.router.paths.forEach(path => {\n            if (path.method === 'get') {\n                routes.push(path.path === '' ? '/' : path.path);\n            }\n        });\n        return routes;\n    };\n\n    v.routes.run = async function(url = '/', parentComponent = undefined){\n        let response = await v.routes.router(url);\n        if (!v.isComponent(response)){\n            let r = response;\n            response = {view(){return r}};\n        }\n\n        if (parentComponent){\n            let c = response;\n            response = {view(){return v(parentComponent, v(c))}};\n        }\n\n        \n        if (v.isNode || !v.isMounted) {\n            return v.mount(v.routes.container, response, {params: v.routes.router.params});\n        }\n\n        \n        return v.update(response, {params: v.routes.router.params});\n    }\n\n    v.routes.go = function (url, parentComponent) {\n        if (v.isBrowser) {\n            window.history.pushState({}, '', url);\n        }\n        return v.routes.run(url, parentComponent);\n    };\n\n    v.routes.init = function(){\n        if (v.isBrowser) {\n            addEvent(window, 'popstate', function (e) {\n                v.routes.run(document.location.pathname);\n            }, false);\n            \n            v.ready(() => {\n                v.routes.run(document.location.pathname);\n            });\n        }\n    };\n\n    if (v.isBrowser){\n        v.sw = {\n            ready: false,\n            file: '/sw.js',\n            options: {scope: '/'},\n            register(file = v.sw.file, options = v.sw.options){\n                return navigator.serviceWorker.register(file, options)\n                    .then(() => navigator.serviceWorker.ready)\n                    .then(registration => {\n                        v.sw.ready = true;\n                        v.sw.file = file;\n                        v.sw.options = options;\n                        return new Promise((resolve, reject) => {\n                            setTimeout(() => {\n                                resolve();\n                            }, 10);\n                        });\n                    })\n                    .catch(err => console.error('ServiceWorker registration failed: ', err))\n            }\n        }\n    }\n\n    if (v.isNode && typeof VNodeFactory !== 'undefined'){\n        VNodeFactory(v);\n    }\n\n    v.new = VFactory;\n    \n    return v;\n};\n\n(typeof window === 'undefined'? global : window).v = VFactory();\n\n","let PatchFactory = function (v) {\n    let document = v.document;\n\n    function setProp($target, name, value) {\n        if (name === 'className') {\n            $target.setAttribute('class', value);\n            return;\n        }\n\n        if (typeof value === 'function') {\n            $target[name] = value.bind($target);\n            return;\n        }\n\n        if (typeof value === 'boolean') {\n            $target[name] = value;\n        }\n\n        if (value !== undefined && value !== false) {\n            $target.setAttribute(name, value);\n        } else {\n            $target.removeAttribute(name);\n        }\n    }\n\n    function updateProps(newNode, oldNode = {}) {\n        // const props = Object.assign({}, newProps, oldProps);\n        var newProps = newNode.props,\n            oldProps = oldNode.props || {};\n\n        const props = Object.assign(\n            {},\n            newProps,\n            oldProps\n        );\n        for (let name in props) {\n            if (newProps[name] !== oldProps[name]) {\n                setProp(newNode.dom, name, newProps[name]);\n            }\n        }\n    }\n\n    async function lifecycleCall(vnode, methodName, ...args) {\n        if (v.isVnode(vnode)) {\n            let method = vnode.props[methodName];\n            if (method && method.call) {\n                args.unshift(vnode);\n                let response = await method.apply(vnode, args);\n                return response;\n            }\n        }\n    }\n\n    function createElement(vnode) {\n        var $el;\n        delete vnode.dom;\n        lifecycleCall(vnode, 'oninit');\n        $el = vnode.name === 'textNode' ?\n            document.createTextNode(vnode.value) :\n            vnode.name === \"svg\" ?\n                document.createElementNS(\"http://www.w3.org/2000/svg\", vnode.name) :\n                document.createElement(vnode.name);\n\n        vnode.dom = $el;\n        updateProps(vnode);\n\n        for (let i = 0; i < vnode.children.length; i++) {\n            $el.appendChild(createElement(vnode.children[i]));\n        }\n\n        lifecycleCall(vnode, 'oncreate');\n        return $el;\n    }\n\n    function removeElement(oldNode, destroyed = false) {\n        return Promise.resolve(lifecycleCall(oldNode, 'onbeforeremove'))\n            .then(() => {\n                if (!destroyed && oldNode.dom && oldNode.dom.parentElement) {\n                    oldNode.dom.parentElement.removeChild(oldNode.dom);\n                }\n\n                let i = 0, l = oldNode.children.length;\n                for (; i < l; i++) {\n                    removeElement(oldNode.children[i], destroyed);\n                }\n\n                lifecycleCall(oldNode, 'onremove');\n            });\n    }\n\n    function patch($parent, newNode, oldNode) {\n        // console.log(0, $parent, newNode, oldNode);\n\n        // New node\n        if (oldNode === undefined && newNode !== undefined) {\n            // console.log(2, newNode);\n            $parent.appendChild(createElement(newNode));\n            return $parent;\n        }\n\n        // Deleted node\n        if (newNode === undefined) {\n            // console.log(3, oldNode);\n            removeElement(oldNode);\n            return $parent;\n        }\n\n        if (v.isVnode(oldNode) && v.isVnode(newNode)) {\n            newNode.dom = oldNode.dom;\n\n            // Same node\n            if (newNode.name === 'textNode' && oldNode.value == newNode.value) {\n                // console.log(1, newNode, oldNode);\n                return $parent;\n            }\n\n            // New node replacing old node\n            if (\n                (newNode.name === 'textNode' && newNode.value != oldNode.value) ||\n                newNode.name !== oldNode.name\n            ) {\n                // console.log(4, $parent, newNode, oldNode);\n                createElement(newNode);\n                Promise.resolve(removeElement(oldNode, true))\n                    .then(() => {\n                        $parent.replaceChild(newNode.dom, oldNode.dom);\n                    });\n                return $parent;\n            }\n\n            // Same node updated\n            // console.log(5, newNode, oldNode);\n            // if (lifecycleCall(newNode, 'onbeforeupdate', oldNode) === false){\n            //     return $parent;\n            // }\n\n            // if (!v.isMounted) {\n            //     lifecycleCall(newNode, 'oninit');\n            //     lifecycleCall(newNode, 'oncreate');\n            // }\n\n            updateProps(newNode, oldNode);\n\n            const max = Math.max(newNode.children.length, oldNode.children.length);\n            for (let i = 0; i < max; i++) {\n                patch(\n                    newNode.dom,\n                    newNode.children[i],\n                    oldNode.children[i]\n                );\n            }\n\n            lifecycleCall(newNode, 'onupdate');\n            return $parent;\n        }\n\n        // console.log(6, newNode, oldNode);\n\n        return $parent;\n    };\n\n    return patch;\n};\n\nexport default PatchFactory;\n"],"names":["let","parseMiddlewares","middlewares","array","push","i","l","length","Array","isArray","addPath","router","method","args","path","shift","undefined","paths","regexpList","subrouter","submiddlewares","submethod","subpath","unshift","params","replace","match","regexpPath","regexp","RegExp","RouterFactory","Router","async","url","response","matches","exec","lastIndex","throwNotFound","Error","map","h","attributes","vnode","name","props","children","trim","value","join","isVnode","test","charAt","slice","split","class","id","nodes","flatenArray","$el","nodeType","nodeValue","dom","nodeName","toLowerCase","prototype","call","childNodes","Request","baseUrl","options","opts","Object","assign","r","apiUrl","nodeUrl","isNode","window","Fetch","require","fetch","bind","request","data","headers","Accept","Content-Type","type","serialize","obj","prefix","e","encodeURIComponent","keys","k","body","JSON","stringify","u","parseUrl","then","status","err","statusText","text","json","forEach","VFactory","v","isComponent","render","apply","ready","callback","addEvent","document","URL","key","res","update","isBrowser","patch","setProp","$target","setAttribute","removeAttribute","updateProps","newNode","oldNode","newProps","oldProps","lifecycleCall","methodName","createElement","createTextNode","createElementNS","appendChild","removeElement","destroyed","Promise","resolve","parentElement","removeChild","$parent","replaceChild","const","max","Math","Patch","resetToDefaults","isMounted","container","parent","rootTree","oldTree","assignAttributes","component","view","events","handler","useCapture","event","addEventListener","redraw","rootComponent","prop","decode","innerHTML","mount","removeEventListener","removeEvent","querySelectorAll","requestAnimationFrame","routes","init","run","parentComponent","c","go","history","pushState","location","pathname","sw","file","scope","register","navigator","serviceWorker","registration","reject","setTimeout","catch","console","error","VNodeFactory","new","global"],"mappings":"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"}