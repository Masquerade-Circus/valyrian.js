(()=>{"use strict";var e=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,t=Object.prototype.hasOwnProperty,o={};((r,n)=>{for(var t in n)e(r,t,{get:n[t],enumerable:!0})})(o,{Suspense:()=>l});var s,u=(s=o,((o,s,u,i)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let a of n(s))t.call(o,a)||a===u||e(o,a,{get:()=>s[a],enumerable:!(i=r(s,a))||i.enumerable});return o})(e({},"__esModule",{value:!0}),s)),i=require("valyrian.js"),a=new WeakMap;function l({key:e,fallback:r,error:n},t){if(null==e)throw new Error("Suspense requires a 'key' prop");return(0,i.v)(()=>{const o=i.current.vnode;if(!o||!o.dom)throw new Error("Suspense must be rendered inside a component");const s=o.dom,u=function(e,r){let n=a.get(e);n||(n=new Map,a.set(e,n));let t=n.get(r);return t||(t={status:0,value:null,error:null,version:0,promise:null},n.set(r,t)),t}(s,e);if(2===u.status&&u.error)return n?n(u.error):u.error.message;if(1===u.status)return u.value;if(!u.promise){const e=++u.version,r=Promise.all(t.map(e=>(0,i.isVnodeComponent)(e)?(0,i.isPOJOComponent)(e.tag)?e.tag.view.bind(e.tag)(e.props||{},e.children):e.tag(e.props||{},e.children):(0,i.isPOJOComponent)(e)?e.view.bind(e)({},[]):(0,i.isComponent)(e)?e({},[]):e));u.promise=r,r.then(r=>{if(u.version!==e)return;u.status=1,u.value=r,u.error=null,u.promise=null;const n=s.vnode;n&&(0,i.updateVnode)(n)}).catch(r=>{if(u.version!==e)return;u.status=2,u.error=r instanceof Error?r:new Error(String(r)),u.promise=null;const n=s.vnode;n&&(0,i.updateVnode)(n)})}return r},{})}"undefined"!=typeof module?module.exports=u:self.ValyrianSuspense=u})();//# sourceMappingURL=index.min.js.map