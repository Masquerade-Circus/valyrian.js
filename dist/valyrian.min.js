!function(){"use strict";let e=Array.isArray,t=Array.prototype.forEach;function o(t,n,d,i,r){return"string"==typeof t?(d={name:t,props:n||{},children:[],el:!0,isSVG:"svg"===t},o.utils.flat(arguments,2,d.children,!0),d):(t.view||"function"!=typeof t||(t.view=t),t.view?(i=t.view.apply(t,o.utils.flat(arguments,1,[])),o.utils.flat(e(i)?i:[i],0,[],!0)):void 0)}o.addState=function(e,t){Object.assign(e,{view:e},t)},o.utils={flat(t,n,d,i,r,l){for(r=t.length;n<r;n++)l=t[n],e(l)?d=o.utils.flat(l,0,d,i):null!=l&&(!0===i&&void 0===l.el&&(l={props:{},nodeValue:String(l),children:[],el:!1}),d.push(l));return d},dom2vnode(e,n,d){if(3===(d=e.nodeType)||1===d)return n={props:{},children:[],dom:e,el:!0,isSVG:!1},3===d?(n.nodeValue=e.nodeValue,n.el=!1,n):(n.name=e.nodeName.toLowerCase(),n.isSVG="svg"===n.name,n.dom.events={},t.call(e.attributes,e=>n.props[e.nodeName]=e.nodeValue),t.call(e.childNodes,e=>{let t=o.utils.dom2vnode(e);t&&n.children.push(t)}),n)}},o.is={node:"undefined"==typeof window,mounted:!1,updating:!1},o.is.browser=!o.is.node,o.trust=function(e){let t=document.createElement("div");return t.innerHTML=e.trim(),Array.prototype.map.call(t.childNodes,e=>o.utils.dom2vnode(e))};let n=[];o.use=function(e,t){return-1===n.indexOf(e)&&(e(o,t),n.push(e)),o},o.use(function(e){let t,o,n,d,i="oncreate",r="onupdate",l="onremove",s="onbeforeupdate",u="http://www.w3.org/2000/svg",a=[];function p(e,o,n,d,i,r){for(e=a.length;e--;){for(i in n=(o=a[e]).v.props[o.a]||"",d=!1,o.b)(r=o.b[i](o.v))!==o.p[i]&&(o.p[i]=r,d=!0),"string"==typeof r?n+=` ${r}`:r&&(n+=` ${i}`);d&&(o.v.dom[o.a]===t||o.v.dom[o.a]===n||o.v.isSVG?o.v.dom.setAttribute(o.a,n):o.v.dom[o.a]=n)}setTimeout(()=>p(),0)}function m(e,t,o,n){if(t===l)for(;e.children.length;)(n=e.children.pop()).el&&m(n,l);if(e.props[t])return e.props[t](e,o)}function c(t){t.currentTarget.events[t.type]&&(t.currentTarget.events[t.type](t),t.defaultPrevented||e.update())}function f(e,t){e.dom=t?document.createElementNS(u,e.name):document.createElement(e.name),e.dom.events={}}function v(o,n,d,u,p,h,g,y,w,V,b,S){for(;d.length>n.length;)(h=d.pop()).el&&m(h,l),o.removeChild(h.dom);for(g=0;g<n.length;g++)if(p=n[g],h=d[g],p.el){if(y=!e.is.mounted,u=u||p.isSVG,S=!1,h===t)f(p,u),o.appendChild(p.dom),h={children:[],props:{}},y=!0;else if(p.name!==h.name)f(p,u),m(h,l),o.replaceChild(p.dom,h.dom),y=!0;else if(p.dom=h.dom,S=!1===m(p,s,h))p.children=h.children;else for(w in h.props)p.props[w]!==t||"v"===w[0]&&"-"===w[1]||("function"==typeof h.props[w]?(V=w.slice(2),p.dom.events[V]&&(delete p.dom.events[V],p.dom.removeEventListener(V,c))):p.dom[w]!==t?p.dom[w]=null:p.dom.removeAttribute(w));if(!S){for(w in p.props)if("function"==typeof(b=p.props[w]))switch(V=w.slice(2),w){case i:case r:case l:case"onbeforeupdate":break;default:p.dom.events[V]||p.dom.addEventListener(V,c),p.dom.events[V]=b}else p.dom[w]===t||p.dom[w]===b||u?"v"===w[0]&&"-"===w[1]?a.push({v:p,a:w.slice(2),b:b,p:{}}):b!==h.props[w]&&p.dom.setAttribute(w,b):p.dom[w]=b;m(p,y?i:r,h),v(p.dom,p.children,h.children,u)}}else h===t?(p.dom=document.createTextNode(p.nodeValue),o.appendChild(p.dom)):h.el?(p.dom=document.createTextNode(p.nodeValue),m(h,l),o.replaceChild(p.dom,h.dom)):(p.dom=h.dom,p.nodeValue!==h.nodeValue&&(p.dom.nodeValue=p.nodeValue));return n}e.update=function(t){if(a=[],t=e.utils.flat(arguments,0,[]),!e.is.node&&e.is.updating||(e.is.updating=!0,t.unshift(o),n=v(d,e.apply(e,t),n),e.is.updating=!1),e.is.node)return d.innerHTML},e.mount=function(t,i){let r=e.utils.flat(arguments,2,[]);return d=e.is.node?document.createElement("div"):"string"==typeof t?document.querySelectorAll(t)[0]:t,n=e.utils.dom2vnode(d).children,i.view||"function"!=typeof i||(i.view=i),i.view&&(o=i),e.is.mounted=!0,p(),e.update.apply(e,r)}}),(o.is.node?global:window).v=o}();//# sourceMappingURL=valyrian.min.js.map
