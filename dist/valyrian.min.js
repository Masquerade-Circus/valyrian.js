!function(){"use strict";function e(n,o){if(3===n.nodeType||1===n.nodeType)return(o={name:"div",props:{},children:[],dom:null,isVnode:!0,isText:!1,nodeValue:null}).name=n.nodeName.toLowerCase(),o.dom=n,3===n.nodeType?(o.nodeValue=n.nodeValue,o.isText=!0,o):(o.dom.events={},Array.prototype.map.call(n.attributes,function(e){o.props[e.nodeName]=e.nodeValue}),Array.prototype.forEach.call(n.childNodes,function(n){let t=e(n);void 0!==t&&o.children.push(t)}),o)}function n(e,o,t,i){if("string"==typeof e){for(i in(t={name:"div",props:{},children:[],dom:null,isVnode:!0,isText:!1,nodeValue:null}).name=e,o)t.props[i]=o[i];return function e(n,o,t,i,r){for(t=0,i=n.length;t<i;t++)if(n[t]){if(Array.isArray(n[t])){e(n[t],o);continue}if("object"==typeof n[t]&&n[t].isVnode){o.push(n[t]);continue}(r={name:"div",props:{},children:[],dom:null,isVnode:!0,isText:!1,nodeValue:null}).name="#text",r.isText=!0,r.nodeValue=n[t],o.push(r)}}(n.utils.arguments2Array(arguments,2),t.children),t}if("function"==typeof e)return Object.assign({view:e,isComponent:!0},o);if("object"==typeof e){if(e.isComponent)return r=e,d=n.utils.arguments2Array(arguments,1),s=r.view.apply(r,d),Array.isArray(s)?s:[s];if("function"==typeof e.view)return Object.assign(e,{isComponent:!0})}var r,d,s}let o,t,i,r;function d(e,n){if(!e.isText&&void 0!==e.props&&void 0!==e.props[n])return e.props[n](e)}function s(e){e.currentTarget.events["on"+event.type](e),n.update()}(n.utils={}).arguments2Array=function(e,n,o,t){for(o=[],t=e.length,void 0===n&&(n=0);n<t;n++)o.push(e[n]);return o},(n.is={}).node="undefined"==typeof window,n.is.browser=!n.is.node,n.is.mounted=!1,n.trust=function(n){let o=document.createElement("div");return o.innerHTML=n.trim(),Array.prototype.map.call(o.childNodes,n=>e(n))};let u=!1;n.update=function(e){return"object"==typeof(e=n.utils.arguments2Array(arguments))[0]&&e[0].isComponent&&(o=e.shift()),new Promise(a=>{u||(u=!0,e.unshift(o),i=n.apply(n,e),function e(o,t,i,r,u,a,l,p,m,c){if(0!==t.length)for(u=t.length>i.length?t.length:i.length,p=0;p<u;p++)if(l=i[p],m=!n.is.mounted,void 0!==(a=t[p])){if(r=r||"svg"===a.name,void 0===l){if(d(a,"oninit"),a.dom=a.isText?document.createTextNode(a.nodeValue):r?document.createElementNS("http://www.w3.org/2000/svg",a.name):document.createElement(a.name),o.appendChild(a.dom),a.isText)continue;l={children:[]},m=!0}else if(a.name!==l.name){if(d(a,"oninit"),a.dom=a.isText?document.createTextNode(a.nodeValue):r?document.createElementNS("http://www.w3.org/2000/svg",a.name):document.createElement(a.name),d(l,"onremove"),o.replaceChild(a.dom,l.dom),a.isText)continue;m=!0}else if(a.dom=l.dom,a.isText){a.dom.nodeValue=a.nodeValue;continue}if(e(a.dom,a.children,l.children,r),!m)for(c in l.props)if(void 0===a.props[c]){if("function"==typeof l.props[c]){a.dom.removeEventListener(c.slice(2),s);continue}a.dom[c]=null,n.is.node&&a.dom.removeAttribute(c)}for(c in a.props)if(m||a.props[c]!==l.props[c]){if("function"==typeof a.props[c]){switch(c){case"oninit":case"oncreate":case"onupdate":case"onremove":break;default:void 0===a.dom.events&&(a.dom.events={}),void 0===a.dom.events[c]&&(a.dom.events[c]=a.props[c],a.dom.addEventListener(c.slice(2),s))}continue}if(n.is.node){a.dom.setAttribute(c,a.props[c]);continue}a.dom[c]=a.props[c]}n.is.mounted||(d(a,"oninit"),d(a,"oncreate")),d(a,m?"oncreate":"onupdate")}else d(l,"onremove"),o.removeChild(l.dom);else o.textContent=""}(r,i,t),t=i,u=!1,n.is.mounted=!0,a(r.innerHTML))})},n.mount=function(i,d){return o=d,r=n.is.node?document.createElement("div"):"string"==typeof i?document.querySelectorAll(i)[0]:i,t=e(r).children,n.update.apply(this,n.utils.arguments2Array(arguments,2))};let a=[];n.use=function(e,o){return-1===a.indexOf(e)&&(e(n,o),a.push(e)),n},(n.is.node?global:window).v=n}();
//# sourceMappingURL=valyrian.min.js.map
