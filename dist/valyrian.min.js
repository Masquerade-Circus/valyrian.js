!function(){"use strict";let e,n,o,t=void 0,r=null,d=Object.create(r),i=[];function l(e,n,o){this.props=n||d,this.children=o,this.name=e}function p(e){this.dom=e}p.prototype={props:d,children:i};let s=new p;function c(e,n){return n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}function a(e,n,...o){return new l(e,n,o)}a.isNode="undefined"==typeof window,a.addState=(e,n)=>Object.assign(e,n),a.dom2vnode=function(e){if(3===e.nodeType)return new p(e);if(1===e.nodeType){let n={};i.forEach.call(e.attributes,e=>n[e.nodeName]=e.nodeValue);let o=new l(e.nodeName,n,[]);o.dom=e;for(let n=0,t=e.childNodes.length;n<t;n++){let t=a.dom2vnode(e.childNodes[n]);t&&o.children.push(t)}return o}},a.trust=e=>{let n=c("div");return n.innerHTML=e.trim(),i.map.call(n.childNodes,e=>a.dom2vnode(e))};let m=new Map;a.usePlugin=(e,n)=>!m.has(e)&&m.set(e,!0)&&e(a,n),a.reservedWords={key:r,"v-list":r,"v-noop":r,"v-create":r,"v-beforeupdate":r,"v-update":r,"v-remove":r};let u={};function f(e){let n=e.target,o=`__on${e.type}`;for(;n;){if(o in n)return n[o](e),void(!1===e.defaultPrevented&&a.update());n=n.parentNode}}function v(e,n,o){if("v-remove"===n){w(e);for(let n=0,o=e.children.length;n<o;n++)v(e.children[n],"v-remove")}if(n in e.props)return e.props[n](e,o)}function h(e,n,o){for(let t in e.props)a.updateProperty(t,e,n,o)}function g(e,n){e.dom=c(e.name,n),h(e,s,n),v(e,"v-create"),V(e,s,n)}function y(e,n,o){if(e.dom=n.dom,"v-noop"in e.props||!1===v(e,"v-beforeupdate",n))e.children=n.children;else{for(let o in n.props)o in a.reservedWords==!1&&o in e.props==!1&&"function"!=typeof n.props[o]&&(o in e.dom?e.dom[o]=t:e.dom.removeAttribute(o));h(e,n,o),v(e,a.isMounted?"v-update":"v-create",n),V(e,n,o)}}function N(e,n,o,r,d){o.dom?y(n,o,r):g(n,r),n.dom!==e.childNodes[d]&&(e.childNodes[d]!==t?e.replaceChild(n.dom,e.childNodes[d]):e.appendChild(n.dom))}function w(e){if(e.cleanUp)for(let n of e.onCleanup)n()}a.updateProperty=(e,n,o,t)=>{let r=n.props[e];e in a.reservedWords?"function"==typeof a.reservedWords[e]&&a.reservedWords[e](r,n,o,t):"function"==typeof r?((e=`__${e}`)in u==!1&&(document.addEventListener(e.slice(4),f),u[e]=!0),n.dom[e]=r):e in n.dom&&!t?n.dom[e]!==r&&(n.dom[e]=r):r!==o.props[e]&&n.dom.setAttribute(e,r)},a.onCleanup=function(e){a.current.parentVnode.onCleanup===t&&(a.current.parentVnode.onCleanup=[],a.current.parentVnode.cleanUp=!0),a.current.parentVnode.onCleanup.push(e)},a.current={parentVnode:r,oldParentVnode:r,component:r};let C=Array.isArray;function V(e,n,o){let{dom:r,children:d}=e,i=n.children;a.current.parentVnode=e,a.current.oldParentVnode=n,w(n),!1===C(d)&&(d=[d]);for(let e=0;e<d.length;e++){let n=d[e];if(n instanceof l)if("string"!=typeof n.name){a.current.component=n;let o="view"in n.name?n.name.view:n.name;d.splice(e--,1,o.call(o,n.props,...n.children))}else"svg"===n.name&&(n.isSVG=!0);else C(n)&&d.splice(e--,1,...n)}if(0===d.length){let e=i.length;for(;e--;)v(i[e],"v-remove");r.textContent=""}else if(i.length>0&&"v-list"in e.props){let e=i.map(e=>e.props.key),n=d.map(e=>e.props.key);for(let l=0,p=n.length;l<p;l++){let p=n[l],c=d[l];if(o=o||c.isSVG,p===e[l])i[l].processed=!0,N(r,c,i[l],o,l);else{let n=e.indexOf(p),d=l>=e.length?t:l;-1!==n?(i[n].processed=!0,N(r,c,i[n],o,d)):N(r,c,s,o,d)}}let l=i.length;for(;l--;)"processed"in i[l]==!1&&(v(i[l],"v-remove"),i[l].dom.parentNode&&r.removeChild(i[l].dom))}else{let e=i.length,n=d.length;for(;e-- >n;)v(i[e],"v-remove"),r.removeChild(i[e].dom);for(e=0;e<n;e++){let n=d[e],s=i[e];if(n instanceof l)o=o||n.isSVG,s===t?(g(n,o),r.appendChild(n.dom)):n.name===s.name?y(n,s,o):(g(n,o),v(s,"v-remove"),r.replaceChild(n.dom,s.dom));else if(s instanceof p)n=String(n),n!==s.dom.nodeValue&&(s.dom.nodeValue=n),d[e]=s;else{let o=document.createTextNode(n);s===t?r.appendChild(o):(v(s,"v-remove"),r.replaceChild(o,s.dom)),d[e]=new p(o)}}}e.children=d}a.update=(t,...r)=>{if(e)return o&&(n=e,e=new l(e.name,e.props,a(o,t,...r)),e.dom=n.dom,V(e,n,e.isSVG),a.isMounted=!0),a.isNode&&e.dom.innerHTML},a.mount=(n,t,r,...d)=>{let i=a.isNode?c("div"):"string"==typeof n?document.querySelectorAll(n)[0]:n;return e=a.dom2vnode(i),o=t,a.update(r,...d)},a.unmount=()=>{o=()=>"";let e=a.update();return o=t,a.isMounted=!1,e},a.directive=(e,n)=>e in a.reservedWords==!1&&(a.reservedWords[e]=n),a.directive("v-for",(e,n)=>n.children=e.map(n.children[0]));let b=e=>(n,o,t)=>{if(n===e){let e=document.createTextNode("");t.dom&&t.dom.parentNode&&(v(t,"v-remove"),t.dom.parentNode.replaceChild(e,t.dom)),o.name="",o.children=i,o.props=d,o.dom=e}};a.directive("v-if",b(!1)),a.directive("v-unless",b(!0)),a.directive("v-show",(e,n)=>n.dom.style.display=e?"":"none"),(a.isNode?global:window).v=a}();//# sourceMappingURL=valyrian.min.js.map
