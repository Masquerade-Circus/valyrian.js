!function(){"use strict";var e=function(t,r){if(void 0===r&&(r=[]),"function"==typeof t)return r.push(t),r;for(var n=0,o=t.length;n<o;n++)Array.isArray(t[n])?e(t[n],r):r.push(t[n]);return r},t=function(r,n,o){var i,a;if("string"==typeof o[0]&&(i=o.shift()),"function"==typeof o[0]&&o[0].paths&&o[0].regexpList)for(var s=o.shift(),u=0,d=s.paths.length;u<d;u++){var p=s.paths[u].middlewares,c=s.paths[u].method,f=s.paths[u].path;i&&(f=i+(f||"*")),f&&p.unshift(f),r=t(r,c,p)}if((a=e(o)).length>0){if(i&&void 0===r.regexpList[i]){var l=(i=i.replace(/\/(\?.*)?$/gi,"$1")).match(/:(\w+)?/gi)||[];for(var h in l)l[h]=l[h].slice(1);var m=i.replace(/:(\w+)/gi,"([^\\s\\/|\\?]+)").replace(/\*/g,".*").replace(/\/(\?.*)?$/gi,"$1");r.regexpList[i]={regexp:RegExp("^"+m+"/?(\\?.*)?$","gi"),params:l}}r.paths.push({method:n,path:i,middlewares:a})}return r},r=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,o,i,a={name:"",props:{},children:[]};if("string"==typeof e[0]&&e[0].trim().length>0&&(a.name=e.shift()),"textNode"===a.name)return a.value=e.join(""),a;if(r.isVnode(e[0])||"object"!=typeof e[0]||Array.isArray(e[0])||null===e[0]||Object.assign(a.props,e.shift()),/(\.|\[|#)/gi.test(a.name)&&(i=a.name.match(/([\.\#][\w-]+|\[[^\]]+\])/gi),a.name=a.name.replace(/([\.\#][\w-]+|\[[^\]]+\])/gi,""),i))for(n=i.length;n--;){var s=i[n];"#"!==s.charAt(0)?"."!==s.charAt(0)?"["===s.charAt(0)&&(s=s.trim().slice(1,-1).split("="),a.props[s.shift()]=(s.join("=")||"true").replace(/^["'](.*)["']$/gi,"$1")):a.props.class=((a.props.class||"")+" "+s.slice(1)).trim():a.props.id=s.slice(1).trim()}var u=r.flatenArray(e);for(o=0,n=u.length;o<n;o++)a.children.push(r.isVnode(u[o])?u[o]:r("textNode",u[o]));return a.name=""===a.name.trim()?"div":a.name.trim(),a};r.flatenArray=function(e,t){if(void 0===t&&(t=[]),!Array.isArray(e))return t.push(e),t;for(var n=0,o=e.length;n<o;n++)Array.isArray(e[n])&&r.flatenArray(e[n],t),Array.isArray(e[n])||t.push(e[n]);return t},r.isVnode=function(e){return e&&e.name&&e.props&&e.children},r.vnode=function(e){var t={name:"",props:{},children:[],dom:e};return e&&(3===e.nodeType&&(t.value=e.nodeValue,t.name="textNode"),3!==e.nodeType&&(Array.prototype.map.call(e.attributes,function(e){t.props[e.nodeName]=e.nodeValue}),t.name=e.nodeName.toLowerCase(),t.children=Array.prototype.map.call(e.childNodes,function(e){return r.vnode(e)}))),t};var n=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var r,o=e.replace(/\/$/gi,"").trim(),i=Object.assign({methods:["get","post","put","patch","delete"]},t),a="undefined"==typeof window,s=a?require("node-fetch"):window.fetch;function u(e,t,n,o){void 0===o&&(o={});var i=Object.assign({method:e.toLowerCase(),headers:{Accept:"application/json","Content-Type":"application/json"}},u.options,o),a=i.headers.Accept;return void 0!==n&&("get"===i.method&&"object"==typeof n&&(t+=n=function e(t,r){var n=encodeURIComponent;return"?"+Object.keys(t).map(function(o){return void 0!==r&&(o=r+"["+o+"]"),"object"==typeof t[o]?e(t[o],o):n(o)+"="+n(t[o])}).join("&")}(n)),"get"!==i.method&&(i.body=JSON.stringify(n))),s(r(t),i).then(function(e){if(e.status<200||e.status>300){var t=Error(e.statusText);throw t.response=e,t}return/text/gi.test(a)?e.text():/json/gi.test(a)?e.json():e})}return r=function(e){var t=/^https?/gi.test(e)?e:(u.baseUrl+"/"+e).trim().replace(/^\/\//gi,"/").trim();return a&&"string"==typeof u.nodeUrl&&(u.nodeUrl=u.nodeUrl.replace(/\/$/gi,"").trim(),/^https?/gi.test(t)&&"string"==typeof u.apiUrl&&(u.apiUrl=u.apiUrl.replace(/\/$/gi,"").trim(),t=t.replace(u.apiUrl,u.nodeUrl)),/^https?/gi.test(t)||(t=u.nodeUrl+t)),t},u.new=function(e,t){return n(e,t)},u.apiUrl=void 0,u.nodeUrl=void 0,u.options=i,u.baseUrl=o,i.methods.forEach(function(e){return u[e]=function(t,r,n){return u(e,t,r,n)}}),u},o=n();function i(e){return"object"==typeof e&&null!==e&&"function"==typeof e.view}function a(e,t){return r.flatenArray(e.view.apply(e,t))}function s(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(i(e[0]))return a(e.shift(),e);if("function"==typeof e[0]){var n={view:e.shift()};return e.forEach(function(e){return Object.assign(n,e)}),n}return r.apply(r,e)}function u(e,t,r,n){s.is.browser&&t.split(" ").forEach(function(t){e.addEventListener(t,r,n)})}s.request=o,s.router=function(){var r=async function(t){void 0===t&&(t="/");var n,o={},i=[],a=0,s=r.paths.length;for(r.url=t;a<s;a++){var u=r.paths[a];if("get"===u.method||"use"===u.method)if("use"!==u.method&&"get"!==u.method||void 0!==u.path){var d=r.regexpList[u.path].regexp.exec(t);if(r.regexpList[u.path].regexp.lastIndex=-1,Array.isArray(d)){d.shift();for(var p=r.regexpList[u.path].params.length;p--;)void 0===o[r.regexpList[u.path].params[p]]&&(o[r.regexpList[u.path].params[p]]=d[p]);e(u.middlewares,i)}}else e(u.middlewares,i)}if(r.params=o,i.length>0)for(var c=0,f=i.length;c<f;c++)if(n=await i[c](o))return n;if(r.throwNotFound)throw Error("The url "+t+" requested wasn't found")};return r.url="/",r.params={},r.throwNotFound=!0,r.paths=[],r.regexpList={},r.get=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t(r,"get",e)},r.use=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t(r,"use",e)},r},(s.is={}).node="undefined"==typeof window,s.is.browser=!s.is.node,s.is.mounted=!1,s.window=s.is.node?(new(require("jsdom").JSDOM)).window:window;var d,p,c,f,l,h,m=function(e){var t=e.window.document;function n(e,t,r){r?"function"!=typeof r?("boolean"==typeof r&&(e[t]=r),e.setAttribute("className"===t?"class":t,r)):e[t]=r.bind(e):e.removeAttribute(t)}function o(e,t){void 0===t&&(t={});var r=e.props,o=t.props||{},i=Object.assign({},r,o);for(var a in i)r[a]!==o[a]&&n(e.dom,a,r[a])}function i(e,t){return e.props&&e.props[t]&&e.props[t](e)}function a(e,r){var n;delete e.dom,i(e,"oninit"),r=r||"svg"===e.name,n="textNode"===e.name?t.createTextNode(e.value):r?t.createElementNS("http://www.w3.org/2000/svg",e.name):t.createElement(e.name),e.dom=n,o(e);for(var s=0;s<e.children.length;s++)n.appendChild(a(e.children[s],r));return i(e,"oncreate"),n}function s(e,t){return void 0===t&&(t=!1),Promise.resolve(i(e,"onbeforeremove")).then(function(){!t&&e.dom&&e.dom.parentElement&&e.dom.parentElement.removeChild(e.dom);for(var r=0,n=e.children.length;r<n;r++)s(e.children[r],t);i(e,"onremove")})}return function t(n,u,d){if(void 0===d&&void 0!==u&&n.appendChild(a(u)),void 0===u&&s(d),r.isVnode(d)&&r.isVnode(u)){if(u.dom=d.dom,"textNode"===u.name&&d.value==u.value)return n;if("textNode"===u.name&&u.value!=d.value||u.name!==d.name)return a(u),Promise.resolve(s(d,!0)).then(function(){n.replaceChild(u.dom,d.dom)}),n;e.isMounted||(i(u,"oninit"),i(u,"oncreate")),o(u,d);for(var p=Math.max(u.children.length,d.children.length),c=0;c<p;c++)t(u.dom,u.children[c],d.children[c]);i(u,"onupdate")}return n}}(s);function v(){s.is.mounted=!1,d=s.window.document.createElement("div"),s.window.document.createElement("div").appendChild(d),p=r.vnode(d),c=Object.assign({},p)}function g(e,t){return i(e)&&(f=e,p.props={},Object.keys(f).forEach(function(e){"function"==typeof f[e]&&(p.props[e]=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return f[e].apply(f,t)})})),f&&(s.is.node&&v(),p.children=a(f,t),m(p.dom.parentElement,p,c),c=Object.assign({},p),s.is.mounted||(s.is.mounted=!0)),s.is.node?p.dom.innerHTML:p.dom.parentElement}v(),s.trust=function(e){var t=s.window.document.createElement("div");return t.innerHTML=e.trim(),Array.prototype.map.call(t.childNodes,function(e){return r.vnode(e)})},s.mount=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(void 0===e)throw Error("A container element is required as first element");if(!i(t[0]))throw Error("A component is required as a second argument");return s.is.browser&&d&&function(e,t,r){s.is.browser&&t.split(" ").forEach(function(t){e.removeEventListener(t,r)})}(d,"mouseup keyup",s.update),d=s.is.node?s.window.document.createElement("div"):"string"==typeof e?s.window.document.querySelectorAll(e)[0]:e,p=r.vnode(d),c=Object.assign({},p),s.is.browser&&u(d,"mouseup keyup",s.update,!1),s.update.apply(s,t)},s.update=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return s.is.browser?requestAnimationFrame(function(){return g(e.shift(),e)}):g(e.shift(),e)},(s.routes=function(e,t){if(!e||!t){var r=[];return l.paths.forEach(function(e){"get"===e.method&&r.push(""===e.path?"/":e.path)}),r}if(l=t,h=e,s.is.browser){function n(){s.routes.go(document.location.pathname)}u(window,"popstate",n,!1),n()}}).current="/",s.routes.params={},s.routes.go=function(e,t){return s.is.browser&&window.history.pushState({},"",e),function(e,t){void 0===e&&(e="/"),void 0===t&&(t=void 0);for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return l(e).then(function(e){if(!i(e))throw Error("A component is required as response to a route");return t&&(r.unshift(a(e,r)),e=t),s.is.node||!s.is.mounted?(r.unshift(e),r.unshift(h),s.mount.apply(s,r)):(r.unshift(e),s.update.apply(s,r))})}(e,t)},s.is.browser&&((s.sw=function(e,t){return void 0===e&&(e=s.sw.file),void 0===t&&(t=s.sw.options),navigator.serviceWorker.register(e,t).then(function(){return navigator.serviceWorker.ready}).then(function(r){return s.sw.ready=!0,s.sw.file=e,s.sw.options=t,new Promise(function(e,t){setTimeout(function(){e(navigator.serviceWorker)},10)})}).catch(console.log)}).ready=!1,s.sw.file="/sw.js",s.sw.options={scope:"/"}),s.is.node&&require("./valyrian.node.helpers.min.js")(s),(s.is.node?global:window).v=s}();
