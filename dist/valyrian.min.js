!function(){"use strict";let e=Array.isArray,n=Array.prototype.forEach;function o(n,t,d,i,l){return"string"==typeof n?(d={name:n,props:t||{},children:[],el:!0,isSVG:"svg"===n},o.utils.flat(arguments,2,d.children),d):(n.view||"function"!=typeof n||(n.view=n),n.view?(i=n.view.apply(n,o.utils.flat(arguments,1,[])),e(i)?i:[i]):void 0)}o.addState=function(e,n){Object.assign(e,{view:e},n)},o.utils={flat(n,t,d,i,l){for(i=n.length;t<i;t++)l=n[t],e(l)?d=o.utils.flat(l,0,d):null!=l&&d.push(l);return d},dom2vnode(e,t,d){if(3===(d=e.nodeType)||1===d)return t={props:{},children:[],dom:e,el:!0,isSVG:!1},3===d?(t.nodeValue=e.nodeValue,t.el=!1,t):(t.name=e.nodeName.toLowerCase(),t.isSVG="svg"===t.name,t.dom.events={},n.call(e.attributes,e=>t.props[e.nodeName]=e.nodeValue),n.call(e.childNodes,e=>{let n=o.utils.dom2vnode(e);n&&t.children.push(n)}),t)}},o.is={node:"undefined"==typeof window,mounted:!1,updating:!1},o.is.browser=!o.is.node,o.trust=function(e){let n=document.createElement("div");return n.innerHTML=e.trim(),Array.prototype.map.call(n.childNodes,e=>o.utils.dom2vnode(e))};let t=[];o.use=function(e,n){return-1===t.indexOf(e)&&(e(o,n),t.push(e)),o},o.use(function(e){let n,o,t,d,i="oncreate",l="onupdate",r="onremove",u="http://www.w3.org/2000/svg";function s(e,n,o,t){if(e.props[n]&&e.props[n](e,o),n===r)for(;e.children.length;)(t=e.children.pop()).el&&s(t,r)}function a(n){n.currentTarget.events[n.type]&&(n.currentTarget.events[n.type](n),e.update())}function p(e,n){e.dom=n?document.createElementNS(u,e.name):document.createElement(e.name),e.dom.events={}}e.update=function(){let u=e.utils.flat(arguments,0,[]);if(!e.is.node&&e.is.updating||(e.is.updating=!0,u.unshift(o),t=function o(t,d,u,m,c,f,v,h,y,g,w){for(;u.length>d.length;)(f=u.pop()).el&&s(f,r),t.removeChild(f.dom);for(v=0;v<d.length;v++)if(c=d[v],f=u[v],c.el){if(h=!e.is.mounted,m=m||c.isSVG,f===n)p(c,m),t.appendChild(c.dom),f={children:[],props:{}},h=!0;else if(c.name!==f.name)p(c,m),s(f,r),t.replaceChild(c.dom,f.dom),h=!0;else for(y in c.dom=f.dom,f.props)c.props[y]===n&&("function"==typeof f.props[y]?c.dom.removeEventListener(y.slice(2),a):c.dom[y]!==n?c.dom[y]=null:c.dom.removeAttribute(y));for(y in c.props)if("function"==typeof(w=c.props[y]))switch(g=y.slice(2),y){case i:case l:case r:break;default:c.dom.events[g]||(c.dom.events[g]=w,c.dom.addEventListener(g,a))}else c.dom[y]===n||c.dom[y]===w||m?w!==f.props[y]&&c.dom.setAttribute(y,w):c.dom[y]=w;s(c,h?i:l,f),o(c.dom,c.children,f.children,m)}else c.el===n&&(d[v]=c={props:{},nodeValue:c,children:[],el:!1}),f===n?(c.dom=document.createTextNode(c.nodeValue),t.appendChild(c.dom)):f.el?(c.dom=document.createTextNode(c.nodeValue),s(f,r),t.replaceChild(c.dom,f.dom)):(c.dom=f.dom,c.nodeValue!==f.nodeValue&&(c.dom.nodeValue=c.nodeValue));return d}(d,e.apply(e,u),t),e.is.updating=!1),e.is.node)return d.innerHTML},e.mount=function(n,i){let l=e.utils.flat(arguments,2,[]);return d=e.is.node?document.createElement("div"):"string"==typeof n?document.querySelectorAll(n)[0]:n,t=e.utils.dom2vnode(d).children,i.view||"function"!=typeof i||(i.view=i),i.view&&(o=i),e.is.mounted=!0,e.update.apply(e,l)}}),(o.is.node?global:window).v=o}();//# sourceMappingURL=valyrian.min.js.map
