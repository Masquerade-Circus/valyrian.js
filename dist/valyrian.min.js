!function(){"use strict";let e=Array.isArray,o=Array.prototype.forEach;function t(o,n,d,i,r){return"string"==typeof o?(d={name:o,props:n||{},children:[],el:!0,isSVG:"svg"===o},t.utils.flat(arguments,2,d.children),d):(o.view||"function"!=typeof o||(o.view=o),o.view?(i=o.view.apply(o,t.utils.flat(arguments,1,[])),e(i)?i:[i]):void 0)}t.addState=function(e,o){Object.assign(e,{view:e},o)},t.utils={flat(o,n,d,i,r){for(i=o.length;n<i;n++)r=o[n],e(r)?d=t.utils.flat(r,0,d):null!=r&&d.push(r);return d},dom2vnode(e,n,d){if(3===(d=e.nodeType)||1===d)return n={props:{},children:[],dom:e,el:!0,isSVG:!1},3===d?(n.nodeValue=e.nodeValue,n.el=!1,n):(n.name=e.nodeName.toLowerCase(),n.isSVG="svg"===n.name,n.dom.events={},o.call(e.attributes,e=>n.props[e.nodeName]=e.nodeValue),o.call(e.childNodes,e=>{let o=t.utils.dom2vnode(e);o&&n.children.push(o)}),n)}},t.is={node:"undefined"==typeof window,mounted:!1,updating:!1},t.is.browser=!t.is.node,t.trust=function(e){let o=document.createElement("div");return o.innerHTML=e.trim(),Array.prototype.map.call(o.childNodes,e=>t.utils.dom2vnode(e))};let n=[];t.use=function(e,o){return-1===n.indexOf(e)&&(e(t,o),n.push(e)),t},t.use(function(e){let o,t,n,d,i="oncreate",r="onupdate",l="onremove",s="http://www.w3.org/2000/svg",u=[];function p(e,o,t,n){if(e.props[o]&&e.props[o](e,t),o===l)for(;e.children.length;)(n=e.children.pop()).el&&p(n,l)}function a(o){o.currentTarget.events[o.type]&&(o.currentTarget.events[o.type](o),e.update())}function m(e,o){e.dom=o?document.createElementNS(s,e.name):document.createElement(e.name),e.dom.events={}}e.update=function(s){if(u=[],s=e.utils.flat(arguments,0,[]),!e.is.node&&e.is.updating||(e.is.updating=!0,s.unshift(t),n=function t(n,d,s,c,f,v,h,y,g,w,V){for(;s.length>d.length;)(v=s.pop()).el&&p(v,l),n.removeChild(v.dom);for(h=0;h<d.length;h++)if(f=d[h],v=s[h],f.el){if(y=!e.is.mounted,c=c||f.isSVG,v===o)m(f,c),n.appendChild(f.dom),v={children:[],props:{}},y=!0;else if(f.name!==v.name)m(f,c),p(v,l),n.replaceChild(f.dom,v.dom),y=!0;else for(g in f.dom=v.dom,v.props)f.props[g]!==o||"v"===g[0]&&"-"===g[1]||("function"==typeof v.props[g]?(w=g.slice(2),f.dom.events[w]&&(delete f.dom.events[w],f.dom.removeEventListener(w,a))):f.dom[g]!==o?f.dom[g]=null:f.dom.removeAttribute(g));for(g in f.props)if(V=f.props[g],"v"===g[0]&&"-"===g[1])u.push({v:f,a:g.slice(2),b:V,p:{}});else if("function"==typeof V)switch(w=g.slice(2),g){case i:case r:case l:break;default:f.dom.events[w]||(f.dom.events[w]=V,f.dom.addEventListener(w,a))}else f.dom[g]===o||f.dom[g]===V||c?V!==v.props[g]&&f.dom.setAttribute(g,V):f.dom[g]=V;p(f,y?i:r,v),t(f.dom,f.children,v.children,c)}else f.el===o&&(d[h]=f={props:{},nodeValue:f,children:[],el:!1}),v===o?(f.dom=document.createTextNode(f.nodeValue),n.appendChild(f.dom)):v.el?(f.dom=document.createTextNode(f.nodeValue),p(v,l),n.replaceChild(f.dom,v.dom)):(f.dom=v.dom,f.nodeValue!==v.nodeValue&&(f.dom.nodeValue=f.nodeValue));return d}(d,e.apply(e,s),n),e.is.updating=!1),e.is.node)return d.innerHTML},e.mount=function(i,r){let l=e.utils.flat(arguments,2,[]);return d=e.is.node?document.createElement("div"):"string"==typeof i?document.querySelectorAll(i)[0]:i,n=e.utils.dom2vnode(d).children,r.view||"function"!=typeof r||(r.view=r),r.view&&(t=r),e.is.mounted=!0,function e(t,n,d,i,r,l,s){for(t=0,n=u.length;t<n;t++){for(l in i=[],r=!1,(d=u[t]).b)(s=d.b[l](d.v))!==d.p[l]&&(d.p[l]=s,r=!0),"boolean"==typeof s?s&&i.push(l):i.push(s);r&&(i.unshift(d.v.props[d.a]),i=i.join(" ").trim(),d.v.dom[d.a]===o||d.v.dom[d.a]===i||d.v.isSVG?d.v.dom.setAttribute(d.a,i):d.v.dom[d.a]=i)}setTimeout(()=>e(),1)}(),e.update.apply(e,l)}}),(t.is.node?global:window).v=t}();//# sourceMappingURL=valyrian.min.js.map
