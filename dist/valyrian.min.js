!function(){"use strict";function e(n,o){if(3===n.nodeType||1===n.nodeType)return(o={name:"div",props:{},children:[],dom:null,isVnode:!0,isText:!1,nodeValue:null}).name=n.nodeName.toLowerCase(),o.dom=n,3===n.nodeType?(o.nodeValue=n.nodeValue,o.isText=!0,o):(o.dom.events={},Array.prototype.map.call(n.attributes,function(e){o.props[e.nodeName]=e.nodeValue}),Array.prototype.forEach.call(n.childNodes,function(n){let t=e(n);void 0!==t&&o.children.push(t)}),o)}function n(e,o,t,i,r){if("string"==typeof e){for(i in(t={name:"div",props:{},children:[],dom:null,isVnode:!0,isText:!1,nodeValue:null}).name=e,o)t.props[i]=o[i];return function e(n,o,t,i,r){for(t=0,i=n.length;t<i;t++)if(n[t]){if(Array.isArray(n[t])){e(n[t],o);continue}if("object"==typeof n[t]&&n[t].isVnode){o.push(n[t]);continue}(r={name:"div",props:{},children:[],dom:null,isVnode:!0,isText:!1,nodeValue:null}).name="#text",r.isText=!0,r.nodeValue=n[t],o.push(r)}}(n.utils.flat(arguments,2),t.children),t}return"function"==typeof e?Object.assign({view:e,isComponent:!0},o):"object"==typeof e&&("function"==typeof e.view&&Object.assign(e,{isComponent:!0}),e.isComponent)?(r=e.view.apply(e,n.utils.flat(arguments,1)),Array.isArray(r)?r:[r]):void 0}let o,t,i,r;function d(e,n){if(!e.isText&&void 0!==e.props&&void 0!==e.props[n])return e.props[n](e)}function s(e){e.currentTarget.events["on"+event.type](e),n.update()}(n.utils={}).flat=function(e,o,t,i){for(void 0===t&&(t=[]),i=e.length,void 0===o&&(o=0);o<i;o++)Array.isArray(e[o])?t=n.utils.flat(e[o],0,t):t.push(e[o]);return t},(n.is={}).node="undefined"==typeof window,n.is.browser=!n.is.node,n.is.mounted=!1,n.trust=function(n){let o=document.createElement("div");return o.innerHTML=n.trim(),Array.prototype.map.call(o.childNodes,n=>e(n))};let u=!1;n.update=function(e){return"object"==typeof(e=n.utils.flat(arguments))[0]&&e[0].isComponent&&(o=e.shift()),new Promise(l=>{u||(u=!0,e.unshift(o),i=n.apply(n,e),function e(o,t,i,r,u,l,p,a,c,m){if(0!==t.length)for(u=t.length>i.length?t.length:i.length,a=0;a<u;a++)if(p=i[a],c=!n.is.mounted,void 0!==(l=t[a])){if(r=r||"svg"===l.name,void 0===p){if(d(l,"oninit"),l.dom=l.isText?document.createTextNode(l.nodeValue):r?document.createElementNS("http://www.w3.org/2000/svg",l.name):document.createElement(l.name),o.appendChild(l.dom),l.isText)continue;p={children:[]},c=!0}else if(l.name!==p.name){if(d(l,"oninit"),l.dom=l.isText?document.createTextNode(l.nodeValue):r?document.createElementNS("http://www.w3.org/2000/svg",l.name):document.createElement(l.name),d(p,"onremove"),o.replaceChild(l.dom,p.dom),l.isText)continue;c=!0}else if(l.dom=p.dom,l.isText){l.dom.nodeValue=l.nodeValue;continue}if(e(l.dom,l.children,p.children,r),!c)for(m in p.props)if(void 0===l.props[m]){if("function"==typeof p.props[m]){l.dom.removeEventListener(m.slice(2),s);continue}l.dom[m]=null,n.is.node&&l.dom.removeAttribute(m)}for(m in l.props)if((c||l.props[m]!==p.props[m])&&void 0!==l.props[m]){if("function"==typeof l.props[m]){switch(m){case"oninit":case"oncreate":case"onupdate":case"onremove":break;default:void 0===l.dom.events&&(l.dom.events={}),void 0===l.dom.events[m]&&(l.dom.events[m]=l.props[m],l.dom.addEventListener(m.slice(2),s))}continue}if(n.is.node||r||void 0===l.dom[m]){l.dom.setAttribute(m,l.props[m]);continue}l.dom[m]=l.props[m]}n.is.mounted||(d(l,"oninit"),d(l,"oncreate")),d(l,c?"oncreate":"onupdate")}else d(p,"onremove"),o.removeChild(p.dom);else o.textContent=""}(r,i,t),t=i,u=!1,n.is.mounted=!0,l(r.innerHTML))})},n.mount=function(i,d){return o=d,r=n.is.node?document.createElement("div"):"string"==typeof i?document.querySelectorAll(i)[0]:i,t=e(r).children,n.update.apply(this,n.utils.flat(arguments,2))};let l=[];n.use=function(e,o){return-1===l.indexOf(e)&&(e(n,o),l.push(e)),n},(n.is.node?global:window).v=n}();
