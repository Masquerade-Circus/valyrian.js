!function(){"use strict";var e=function(r,t){if(void 0===t&&(t=[]),"function"==typeof r)return t.push(r),t;for(var o=0,n=r.length;o<n;o++)Array.isArray(r[o])&&e(r[o],t),Array.isArray(r[o])||t.push(r[o]);return t},r=function(t,o,n){var i,a;if("string"==typeof n[0]&&(i=n.shift()),"function"==typeof n[0]&&void 0!==n[0].paths&&void 0!==n[0].regexpList)for(var s=n.shift(),u=0,d=s.paths.length;u<d;u++){var p=s.paths[u].middlewares,c=s.paths[u].method,f=s.paths[u].path;void 0!==i&&(f=i+(f||"*")),void 0!==f&&p.unshift(f),t=r(t,c,p)}if((a=e(n)).length>0){if(void 0!==i&&void 0===t.regexpList[i]){var l=(i=i.replace(/\/(\?.*)?$/gi,"$1")).match(/:(\w+)?/gi)||[];for(var m in l)l[m]=l[m].replace(":","");var h=i.replace(/:(\w+)/gi,"([^\\s\\/|\\?]+)").replace(/\*/g,".*").replace(/\/(\?.*)?$/gi,"$1");t.regexpList[i]={regexp:RegExp("^"+h+"/?(\\?.*)?$","gi"),params:l}}t.paths.push({method:o,path:i,middlewares:a})}return t},t=function(){var t=async function(r){void 0===r&&(r="/");var o,n={},i=[],a=0,s=t.paths.length;for(t.url=r;a<s;a++){var u=t.paths[a];if("get"===u.method||"use"===u.method)if("use"!==u.method&&"get"!==u.method||void 0!==u.path){var d=t.regexpList[u.path].regexp.exec(r);if(t.regexpList[u.path].regexp.lastIndex=-1,Array.isArray(d)){d.shift();for(var p=t.regexpList[u.path].params.length;p--;)void 0===n[t.regexpList[u.path].params[p]]&&(n[t.regexpList[u.path].params[p]]=d[p]);i=e(u.middlewares,i)}}else i=e(u.middlewares,i)}if(t.params=n,i.length>0)for(var c=0,f=i.length;c<f;c++)if(void 0!==(o=await i[c](n)))return o;if(t.throwNotFound)throw Error("The url "+r+" requested wasn't found")};return t.url="/",t.params={},t.throwNotFound=!0,t.paths=[],t.regexpList={},["get","use"].map(function(e){t[e]=function(){for(var o=[],n=arguments.length;n--;)o[n]=arguments[n];return r(t,e,o)}}),t},o=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t,n,i,a={name:"div",props:{},children:[]};if("string"==typeof e[0]&&e[0].trim().length>0&&(a.name=e.shift()),"textNode"===a.name)return a.value=e.join(" ").trim(),a;if(o.isVnode(e[0])||"object"!=typeof e[0]||Array.isArray(e[0])||null===e[0]||(a.props=e.shift()),/(\.|\[|#)/gi.test(a.name)&&(i=a.name.match(/([\.|\#]\w+|\[[^\]]+\])/gi),a.name=a.name.replace(/([\.|\#]\w+|\[[^\]]+\])/gi,""),i))for(t=i.length;t--;)"#"!==i[t].charAt(0)?"."!==i[t].charAt(0)?"["===i[t].charAt(0)&&(i[t]=i[t].trim().slice(1,-1).split("="),a.props[i[t][0]]=i[t][1]):a.props.class=((a.props.class||"")+" "+i[t].slice(1)).trim():a.props.id=i[t].slice(1);var s=o.flatenArray(e);for(n=0,t=s.length;n<t;n++)a.children.push(o.isVnode(s[n])?s[n]:o("textNode",s[n]));return a};o.flatenArray=function(e,r){if(void 0===r&&(r=[]),!Array.isArray(e))return r.push(e),r;for(var t=0,n=e.length;t<n;t++)Array.isArray(e[t])&&o.flatenArray(e[t],r),Array.isArray(e[t])||r.push(e[t]);return r},o.isVnode=function(e){return e&&e.name&&e.props&&e.children},o.vnode=function(e){if(e)return 3===e.nodeType?{value:e.nodeValue,name:"textNode",props:{},children:[],dom:e}:{name:e.nodeName.toLowerCase(),props:{},children:Array.prototype.map.call(e.childNodes,function(e){return o.vnode(e)}),dom:e}};var n=function(e,r){void 0===e&&(e=""),void 0===r&&(r={});var t=e.replace(/\/$/gi,"").trim(),o=Object.assign({},r),i=function(e,r){var t=i.baseUrl+"/"+e,o=Object.assign({},i.options,r);return n(t,o)};i.apiUrl=void 0,i.nodeUrl=void 0,i.isNode="undefined"==typeof window,i.options=o,i.baseUrl=t;var a=i.isNode?require("node-fetch"):fetch.bind(window);function s(e,r,t,o){void 0===o&&(o={});var n=Object.assign({method:e.toLowerCase(),headers:{Accept:"application/json","Content-Type":"application/json"}},i.options,o),s=n.headers.Accept;return void 0!==t&&("get"===n.method&&"object"==typeof t&&(r+=t=function e(r,t){var o=encodeURIComponent;return"?"+Object.keys(r).map(function(n){return void 0!==t&&(n=t+"["+n+"]"),"object"==typeof r[n]?e(r[n],n):o(n)+"="+o(r[n])}).join("&")}(t)),"get"!==n.method&&(n.body=JSON.stringify(t))),a(function(e){var r=(i.baseUrl+"/"+e).trim().replace(/^\/\//gi,"/").trim();return i.isNode&&"string"==typeof i.nodeUrl&&(i.nodeUrl=i.nodeUrl.replace(/\/$/gi,"").trim(),/^http/gi.test(r)&&"string"==typeof i.apiUrl&&(i.apiUrl=i.apiUrl.replace(/\/$/gi,"").trim(),r=r.replace(i.apiUrl,i.nodeUrl)),/^http/gi.test(r)||(r=i.nodeUrl+r)),r}(r),n).then(function(e){if(e.status<200||e.status>300){var r=Error(e.statusText);throw r.response=e,r}return/text/gi.test(s)?e.text():/json/gi.test(s)?e.json():e})}return["get","post","put","patch","delete","options","head"].forEach(function(e){return i[e]=function(r,t,o){return s(e,r,t,o)}}),i},i=n(),a=function(){var e=function(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return e.isComponent(r[0])?u.apply(e,r):o.apply(o,r)};e.ready=function(e){d(document,/https?:\/\//.test(window.document.URL)?"DOMContentLoaded":"deviceready",e,!1)},e.request=i,Object.keys(i).forEach(function(r){"function"==typeof i[r]&&(e[r]=function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];return i[r].apply(i,t).then(function(r){return e.update(),r})})}),e.router=t,e.isVnode=o.isVnode,e.vnode=o.vnode,e.flatenArray=o.flatenArray,e.isNode="undefined"==typeof window,e.isBrowser=!e.isNode,e.window=e.isNode?require("html-element"):window,e.document=e.window.document;var r=function(e){var r=e.document;function t(e,r,t){"className"!==r?"function"!=typeof t?("boolean"==typeof t&&(e[r]=t),void 0!==t&&!1!==t?e.setAttribute(r,t):e.removeAttribute(r)):e[r]=t.bind(e):e.setAttribute("class",t)}function o(e,r){void 0===r&&(r={});var o=e.props,n=r.props||{},i=Object.assign({},o,n);for(var a in i)o[a]!==n[a]&&t(e.dom,a,o[a])}async function n(r,t){for(var o=[],n=arguments.length-2;n-- >0;)o[n]=arguments[n+2];if(e.isVnode(r)){var i=r.props[t];if(i&&i.call)return o.unshift(r),await i.apply(r,o)}}function i(e){var t;delete e.dom,n(e,"oninit"),t="textNode"===e.name?r.createTextNode(e.value):"svg"===e.name?r.createElementNS("http://www.w3.org/2000/svg",e.name):r.createElement(e.name),e.dom=t,o(e);for(var a=0;a<e.children.length;a++)t.appendChild(i(e.children[a]));return n(e,"oncreate"),t}function a(e,r){return void 0===r&&(r=!1),Promise.resolve(n(e,"onbeforeremove")).then(function(){!r&&e.dom&&e.dom.parentElement&&e.dom.parentElement.removeChild(e.dom);for(var t=0,o=e.children.length;t<o;t++)a(e.children[t],r);n(e,"onremove")})}return function r(t,s,u){if(void 0===u&&void 0!==s)return t.appendChild(i(s)),t;if(void 0===s)return a(u),t;if(e.isVnode(u)&&e.isVnode(s)){if(s.dom=u.dom,"textNode"===s.name&&u.value==s.value)return t;if("textNode"===s.name&&s.value!=u.value||s.name!==u.name)return i(s),Promise.resolve(a(u,!0)).then(function(){t.replaceChild(s.dom,u.dom)}),t;o(s,u);for(var d=Math.max(s.children.length,u.children.length),p=0;p<d;p++)r(s.dom,s.children[p],u.children[p]);return n(s,"onupdate"),t}return t}}(e);function n(){e.isMounted=!1,e.container=e.document.createElement("html"),e.parent=e.document.createElement("div"),e.parent.appendChild(e.container),e.rootTree=e.vnode(e.container),e.oldTree=Object.assign({},e.rootTree)}function s(e,r){void 0===r&&(r={}),e.attributes=r.name&&r.props&&Array.isArray(r.children)?{children:r}:Array.isArray(r)?{children:1===r.length?r[0]:r}:Object.assign({},e.attributes,r)}function u(e,r){void 0===r&&(r={}),s(e,r);var t=e.view();return Array.isArray(t)?t:[t]}function d(r,t,o,n){e.isBrowser&&t.split(" ").forEach(function(e){r.addEventListener(e,o,n)})}function p(t,o){return void 0===o&&(o={}),e.isComponent(t)&&(s(t,o),e.rootComponent=t,e.rootTree.props={},Object.keys(e.rootComponent).forEach(function(r){"function"==typeof e.rootComponent[r]&&(e.rootTree.props[r]=function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];return e.rootComponent[r].apply(e.rootComponent,t)})})),e.rootComponent&&(e.isNode&&n(),e.rootTree.children=u(e.rootComponent),r(e.rootTree.dom.parentElement,e.rootTree,e.oldTree),e.oldTree=Object.assign({},e.rootTree),e.isMounted||(e.isMounted=!0)),e.isNode?require("he").decode(e.rootTree.dom.parentElement.innerHTML):e.rootTree.dom.parentElement}return n(),e.rootComponent=void 0,e.mount=function(r,t,o){if(void 0===o&&(o={}),void 0===r)throw Error("A container element is required as first element");if(!e.isComponent(t))throw Error("A component is required as a second argument");return e.isBrowser&&e.container&&function(r,t,o){e.isBrowser&&t.split(" ").forEach(function(e){r.removeEventListener(e,o)})}(e.container,"mouseup keyup",e.update),e.container=e.isNode?e.document.createElement("div"):"string"==typeof r?e.document.querySelectorAll(r)[0]:r,e.rootTree=e.vnode(e.container),e.oldTree=Object.assign({},e.rootTree),e.isBrowser&&d(e.container,"mouseup keyup",e.update,!1),e.update(t,o)},e.update=function(r,t){if(void 0===t&&(t={}),!e.isBrowser)return p(r,t);requestAnimationFrame(function(){return p(r,t)})},e.isComponent=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.view},e.routes=function(r,t){if(r&&t)return e.routes.router=t,e.routes.container=r,void e.routes.init();var o=[];return e.routes.router.paths.forEach(function(e){"get"===e.method&&o.push(""===e.path?"/":e.path)}),o},e.routes.run=async function(r,t){void 0===r&&(r="/"),void 0===t&&(t=void 0);var o=await e.routes.router(r);if(!e.isComponent(o)){var n=o;o={view:function(){return n}}}if(t){var i=o;o={view:function(){return e(t,e(i))}}}return e.isNode||!e.isMounted?e.mount(e.routes.container,o,{params:e.routes.router.params}):e.update(o,{params:e.routes.router.params})},e.routes.go=function(r,t){return e.isBrowser&&window.history.pushState({},"",r),e.routes.run(r,t)},e.routes.init=function(){e.isBrowser&&(d(window,"popstate",function(r){e.routes.run(document.location.pathname)},!1),e.ready(function(){e.routes.run(document.location.pathname)}))},e.isBrowser&&(e.sw={ready:!1,file:"/sw.js",options:{scope:"/"},register:function(r,t){return void 0===r&&(r=e.sw.file),void 0===t&&(t=e.sw.options),navigator.serviceWorker.register(r,t).then(function(){return navigator.serviceWorker.ready}).then(function(o){return e.sw.ready=!0,e.sw.file=r,e.sw.options=t,new Promise(function(e,r){setTimeout(function(){e()},10)})}).catch(function(e){return console.error("ServiceWorker registration failed: ",e)})}}),e.isNode&&"undefined"!=typeof VNodeFactory&&VNodeFactory(e),e.new=a,e};("undefined"==typeof window?global:window).v=a()}();
