!function(){"use strict";function e(n,o,t,i,d){if("string"==typeof n){for(i in t={name:n,props:{},children:[],dom:null,isVnode:!0,el:!0,isSVG:"svg"===n},o)t.props[i]=o[i];return e.utils.flat(arguments,2,t.children,!0),t}if(n.view||"function"!=typeof n||(n.view=n),n.view)return d=n.view.apply(n,e.utils.flat(arguments,1,[])),Array.isArray(d)?d:[d]}e.addState=function(e,n){Object.assign(e,{view:e},n)},e.utils={flat:function(n,o,t,i,d){for(d=n.length;o<d;o++)Array.isArray(n[o])?t=e.utils.flat(n[o],0,t):(!i||void 0!==n[o]&&null!==n[o])&&t.push(n[o]);return t},dom2vnode(n,o,t){if(3===(t=n.nodeType)||1===t)return o={props:{},children:[],dom:n,isVnode:!0,el:!0,isSVG:!1},3===t?(o.nodeValue=n.nodeValue,o.el=!1,o):(o.name=n.nodeName.toLowerCase(),"svg"===o.name&&(o.isSVG=!0),o.dom.events={},Array.prototype.map.call(n.attributes,function(e){o.props[e.nodeName]=e.nodeValue}),Array.prototype.forEach.call(n.childNodes,function(n){let t=e.utils.dom2vnode(n);t&&o.children.push(t)}),o)}},e.is={node:"undefined"==typeof window,mounted:!1,updating:!1},e.is.browser=!e.is.node,e.trust=function(n){let o=document.createElement("div");return o.innerHTML=n.trim(),Array.prototype.map.call(o.childNodes,n=>e.utils.dom2vnode(n))};let n=[];e.use=function(o,t){return-1===n.indexOf(o)&&(o(e,t),n.push(o)),e},e.use(function(e){let n,o,t,i,d,r="oninit",l="oncreate",s="onupdate",u="onremove",p="http://www.w3.org/2000/svg";function a(e,n,o,t){if(e.el&&(e.props[n]&&e.props[n](e,o),n===u)){for(t=e.children.length;t--;)e.children[t].el&&a(e.children[t],u);e.children=[]}}function c(n){n.currentTarget.events["on"+n.type]&&n.currentTarget.events["on"+n.type](n),e.update()}function m(e,n){a(e,r),e.dom=n?document.createElementNS(p,e.name):document.createElement(e.name),e.dom.events={}}e.update=function(p){if((p=e.utils.flat(arguments,0,[]))[0]&&(p[0].view||"function"!=typeof p[0]||(p[0].view=p[0]),p[0].view&&(n=p.shift())),e.is.updating||(e.is.updating=!0,p.unshift(n),t=e.apply(e,p),function n(o,t,i,p,f,h,v,y,g,w){if(0!==t.length)for(f=t.length>i.length?t.length:i.length,y=0;y<f;y++)if(h=t[y],v=i[y],h)if(h.el!==d&&h.el){if(g=!e.is.mounted,p=p||h.isSVG,v){if(h.name!==v.name)m(h,p),a(v,u),o.replaceChild(h.dom,v.dom),g=!0;else for(w in h.dom=v.dom,v.props)if(h.props[w]===d){if("function"==typeof v.props[w]){h.dom.removeEventListener(w.slice(2),c);continue}if(e.is.browser&&!p&&h.dom[w]!==d){h.dom[w]=null;continue}h.dom.removeAttribute(w)}}else m(h,p),o.appendChild(h.dom),v={children:[]},g=!0;for(w in n(h.dom,h.children,v.children,p),h.props)if((g||h.props[w]!==v.props[w])&&h.props[w]!==d){if("function"==typeof h.props[w]){switch(w){case r:case l:case s:case u:break;default:h.dom.events[w]||(h.dom.events[w]=h.props[w],h.dom.addEventListener(w.slice(2),c))}continue}if(e.is.browser&&!p&&h.dom[w]!==d){h.dom[w]=h.props[w];continue}h.dom.setAttribute(w,h.props[w])}e.is.mounted||g||(a(h,r),a(h,l)),a(h,g?l:s,v)}else h.el===d&&(t[y]=h={isVnode:!0,nodeValue:h,children:[],el:!1}),v?v.el?(h.dom=document.createTextNode(h.nodeValue),a(v,u),o.replaceChild(h.dom,v.dom)):(h.dom=v.dom,h.nodeValue!==v.nodeValue&&(h.dom.nodeValue=h.nodeValue)):(h.dom=document.createTextNode(h.nodeValue),o.appendChild(h.dom));else v!==d&&(v.el&&a(v,u),o.removeChild(v.dom));else{for(y=i.length;y--;)i[y].el&&a(i[y],u);o.textContent=""}}(i,t,o),o=t,e.is.updating=!1,e.is.mounted=!0),e.is.node)return i.innerHTML},e.mount=function(n){return i=e.is.node?document.createElement("div"):"string"==typeof n?document.querySelectorAll(n)[0]:n,o=e.utils.dom2vnode(i).children,e.update.apply(this,e.utils.flat(arguments,1,[]))}}),(e.is.node?global:window).v=e}();