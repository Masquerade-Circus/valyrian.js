!function(){"use strict";function e(o,n,t,d){return"string"==typeof o?(t={name:o,props:n||{},children:[],dom:null,isVnode:!0,el:!0,isSVG:"svg"===o},e.utils.flat(arguments,2,t.children),t):(o.view||"function"!=typeof o||(o.view=o),o.view?(d=o.view.apply(o,e.utils.flat(arguments,1,[])),Array.isArray(d)?d:[d]):void 0)}e.addState=function(e,o){Object.assign(e,{view:e},o)},e.utils={flat(o,n,t,d,r){for(d=o.length;n<d;n++)r=o[n],Array.isArray(r)?t=e.utils.flat(r,0,t):null!=r&&t.push(r);return t},dom2vnode(o,n,t){if(3===(t=o.nodeType)||1===t)return n={props:{},children:[],dom:o,isVnode:!0,el:!0,isSVG:!1},3===t?(n.nodeValue=o.nodeValue,n.el=!1,n):(n.name=o.nodeName.toLowerCase(),n.isSVG="svg"===n.name,n.dom.events={},Array.prototype.map.call(o.attributes,function(e){n.props[e.nodeName]=e.nodeValue}),Array.prototype.forEach.call(o.childNodes,function(o){let t=e.utils.dom2vnode(o);t&&n.children.push(t)}),n)}},e.is={node:"undefined"==typeof window,mounted:!1,updating:!1},e.is.browser=!e.is.node,e.trust=function(o){let n=document.createElement("div");return n.innerHTML=o.trim(),Array.prototype.map.call(n.childNodes,o=>e.utils.dom2vnode(o))};let o=[];e.use=function(n,t){return-1===o.indexOf(n)&&(n(e,t),o.push(n)),e},e.use(function(e){let o,n,t,d,r="create",i="update",l="remove",s="http://www.w3.org/2000/svg";function p(e,o,n,t){if(e.props[o]&&e.props[o](e,n),o===l){for(t=e.children.length;t--;)e.children[t].el&&p(e.children[t],l);e.children=[]}}function u(o){o.currentTarget.events[o.type]&&o.currentTarget.events[o.type](o),e.update()}function a(e,o){e.dom=o?document.createElementNS(s,e.name):document.createElement(e.name),e.dom.events={}}e.update=function(){let s=e.utils.flat(arguments,0,[]);return!e.is.node&&e.is.updating||(e.is.updating=!0,s.unshift(o),n=function o(n,t,s,m,c,f,h,v,y,g){if(0===t.length){for(;s.length;)(f=s.pop()).el&&p(f,l);n.textContent=""}else{for(;s.length>t.length;)(f=s.pop()).el&&p(f,l),n.removeChild(f.dom);for(h=0;h<t.length;h++)if(c=t[h],f=s[h],c.el!==d&&c.el){if(v=!e.is.mounted,m=m||c.isSVG,f===d)a(c,m),n.appendChild(c.dom),f={children:[],props:{}},v=!0;else if(c.name!==f.name)a(c,m),p(f,l),n.replaceChild(c.dom,f.dom),v=!0;else for(y in c.dom=f.dom,f.props)c.props[y]===d&&("function"==typeof f.props[y]?(g=y.slice(2),c.dom.removeEventListener(g,u)):e.is.browser&&!m&&c.dom[y]!==d?c.dom[y]=null:c.dom.removeAttribute(y));for(y in c.props)if(c.props[y]!==d)if("function"==typeof c.props[y])switch(g=y.slice(2)){case r:case i:case l:break;default:c.dom.events[g]||(c.dom.events[g]=c.props[y],c.dom.addEventListener(g,u))}else e.is.browser&&!m&&c.dom[y]!==d&&c.props[y]!==c.dom[y]?c.dom[y]=c.props[y]:c.props[y]!==f.props[y]&&c.dom.setAttribute(y,c.props[y]);p(c,v?r:i,f),o(c.dom,c.children,f.children,m)}else c.el===d&&(t[h]=c={props:{},isVnode:!0,nodeValue:c,children:[],el:!1}),f===d?(c.dom=document.createTextNode(c.nodeValue),n.appendChild(c.dom)):f.el?(c.dom=document.createTextNode(c.nodeValue),p(f,l),n.replaceChild(c.dom,f.dom)):(c.dom=f.dom,c.nodeValue!==f.nodeValue&&(c.dom.nodeValue=c.nodeValue))}return t}(t,e.apply(e,s),n),e.is.updating=!1),t.innerHTML},e.mount=function(d,r){let i=e.utils.flat(arguments,2,[]);return t=e.is.node?document.createElement("div"):"string"==typeof d?document.querySelectorAll(d)[0]:d,n=e.utils.dom2vnode(t).children,r.view||"function"!=typeof r||(r.view=r),r.view&&(o=r),e.is.mounted=!0,e.update.apply(e,i)}}),(e.is.node?global:window).v=e}();//# sourceMappingURL=valyrian.min.js.map
