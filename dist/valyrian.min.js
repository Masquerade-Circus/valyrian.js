!function(){'use strict';let a=function(a){let b,c,d,f;function g(a,b,c,d,e){if(a.nt===1){a.props[b]!==undefined&&a.props[b](a,c);if(b==='onremove'){d=0;e=a.children.length;for(;d<e;d++)g(a.children[d],'onremove');a.children=[]}}}function h(b){b.currentTarget.events['on'+b.type]!==undefined&&b.currentTarget.events['on'+b.type](b);a.update()}function j(b,c,d,e,f,i,k,l,m,n){if(c.length===0){b.textContent='';return}f=c.length>d.length?c.length:d.length;l=0;for(;l<f;l++){i=c[l];k=d[l];if(i===undefined){k!==undefined&&(k.nt===3&&g(k,'onremove'),b.removeChild(k.dom));continue}if(i.nt===undefined||i.nt===3){i.nt===undefined&&(c[l]=i={name:'#text',isVnode:!0,nodeValue:i,children:[],nt:3});k===undefined?(i.dom=document.createTextNode(i.nodeValue),b.appendChild(i.dom)):k.nt===1?(i.dom=document.createTextNode(i.nodeValue),g(k,'onremove'),b.replaceChild(i.dom,k.dom)):(i.dom=k.dom,i.nodeValue!=k.nodeValue&&(i.dom.nodeValue=i.nodeValue));continue}m=!a.is.mounted;e=e||i.isSVG;if(k===undefined)g(i,'oninit'),i.dom=e?document.createElementNS("http://www.w3.org/2000/svg",i.name):document.createElement(i.name),i.dom.events={},b.appendChild(i.dom),k={children:[]},m=!0;else{if(i.name!==k.name)g(i,'oninit'),i.dom=e?document.createElementNS("http://www.w3.org/2000/svg",i.name):document.createElement(i.name),i.dom.events={},g(k,'onremove'),b.replaceChild(i.dom,k.dom),m=!0;else{i.dom=k.dom;for(n in k.props){if(i.props[n]===undefined){if(typeof k.props[n]==='function'){i.dom.removeEventListener(n.slice(2),h);continue}if(a.is.node||e||i.dom[n]===undefined){i.dom.removeAttribute(n);continue}i.dom[n]=null}}}}j(i.dom,i.children,k.children,e);for(n in i.props){if((m||i.props[n]!==k.props[n])&&i.props[n]!==undefined){if(typeof i.props[n]==='function'){switch(n){case 'oninit':;case 'oncreate':;case 'onupdate':;case 'onremove':break;default:i.dom.events[n]===undefined&&(i.dom.events[n]=i.props[n],i.dom.addEventListener(n.slice(2),h));break};continue}if(a.is.node||e||i.dom[n]===undefined){i.dom.setAttribute(n,i.props[n]);continue}i.dom[n]=i.props[n]}}!a.is.mounted&&!m&&(g(i,'oninit'),g(i,'oncreate'));g(i,m?'oncreate':'onupdate',k)}}a.update=function(e){e=a.utils.flat(arguments,0,[]);typeof e[0]==='object'&&(typeof e[0].isComponent==='undefined'&&typeof e[0].view==='function'?(b=Object.assign(e.shift(),{isComponent:!0})):e[0].isComponent&&(b=e.shift()));return new Promise(function h(g){if(!a.is.updating){a.is.updating=!0;e.unshift(b);d=a.apply(a,e);j(f,d,c);c=d;a.is.updating=!1;a.is.mounted=!0;if(a.is.node){return g(f.innerHTML)}g()}})};a.mount=function(b){f=a.is.node?document.createElement('div'):typeof b==='string'?document.querySelectorAll(b)[0]:b;c=a.utils.dom2vnode(f).children;return a.update.apply(this,a.utils.flat(arguments,1,[]))}};function b(a,c,d,e,f){if(typeof a==='string'){d={name:a,props:{},children:[],dom:null,isVnode:!0,nt:1,isSVG:a==='svg'};for(e in c)d.props[e]=c[e];b.utils.flat(arguments,2,d.children,!0);return d}if(typeof a==='function'){return Object.assign({view:a,isComponent:!0},c)}if(typeof a==='object'){typeof a.view==='function'&&(a.isComponent=!0);if(a.isComponent){f=a.view.apply(a,b.utils.flat(arguments,1,[]));return Array.isArray(f)?f:[f]}}}b.utils={flat:function(a,c,d,e,f){f=a.length;e===undefined&&(e=!1);for(;c<f;c++){if(Array.isArray(a[c])){d=b.utils.flat(a[c],0,d);continue}(e===!1||a[c]!==undefined&&a[c]!==null)&&d.push(a[c])}return d},dom2vnode(a,c){if(a.nodeType===3){return{name:'#text',isVnode:!0,nodeValue:a.nodeValue,children:[],dom:a,nt:3}}if(a.nodeType===1){c={name:a.nodeName.toLowerCase(),props:{},children:[],dom:a,isVnode:!0,nodeValue:null,nt:1};c.name==='svg'&&(c.isSVG=!0);c.dom.events={};Array.prototype.map.call(a.attributes,function(a){c.props[a.nodeName]=a.nodeValue});Array.prototype.forEach.call(a.childNodes,function(a){let d=b.utils.dom2vnode(a);d!==undefined&&c.children.push(d)});return c}}};b.is={node:typeof window==='undefined',mounted:!1,updating:!1};b.is.browser=!b.is.node;b.trust=function(a){let c=document.createElement('div');c.innerHTML=a.trim();return Array.prototype.map.call(c.childNodes,a=>b.utils.dom2vnode(a))};let c=[];b.use=function(a,d){c.indexOf(a)===-1&&(a(b,d),c.push(a));return b};b.use(a);(b.is.node?global:window).v=b}()//# sourceMappingURL=valyrian.min.js.map
