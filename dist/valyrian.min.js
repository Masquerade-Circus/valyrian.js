!function(){"use strict";let e=Array.isArray,n=Array.prototype.forEach;function t(n,o,d,i,l){return"string"==typeof n?(d={name:n,props:o||{},children:[],el:!0,isSVG:"svg"===n},t.utils.flat(arguments,2,d.children),d):(n.view||"function"!=typeof n||(n.view=n),n.view?(i=n.view.apply(n,t.utils.flat(arguments,1,[])),e(i)?i:[i]):void 0)}t.addState=function(e,n){Object.assign(e,{view:e},n)},t.utils={flat(n,o,d,i,l){for(i=n.length;o<i;o++)l=n[o],e(l)?d=t.utils.flat(l,0,d):null!=l&&d.push(l);return d},dom2vnode(e,o,d){if(3===(d=e.nodeType)||1===d)return o={props:{},children:[],dom:e,el:!0,isSVG:!1},3===d?(o.nodeValue=e.nodeValue,o.el=!1,o):(o.name=e.nodeName.toLowerCase(),o.isSVG="svg"===o.name,o.dom.events={},n.call(e.attributes,e=>o.props[e.nodeName]=e.nodeValue),n.call(e.childNodes,e=>{let n=t.utils.dom2vnode(e);n&&o.children.push(n)}),o)}},t.is={node:"undefined"==typeof window,mounted:!1,updating:!1},t.is.browser=!t.is.node,t.trust=function(e){let n=document.createElement("div");return n.innerHTML=e.trim(),Array.prototype.map.call(n.childNodes,e=>t.utils.dom2vnode(e))};let o=[];t.use=function(e,n){return-1===o.indexOf(e)&&(e(t,n),o.push(e)),t},t.use(function(e){let n,t,o,d,i="oncreate",l="onupdate",r="onremove",u="http://www.w3.org/2000/svg";function s(e,n,t,o){if(e.props[n]&&e.props[n](e,t),n===r)for(;e.children.length;)(o=e.children.pop()).el&&s(o,r)}function a(n){n.currentTarget.events[n.type]&&(n.currentTarget.events[n.type](n),e.update())}function p(e,n){e.dom=n?document.createElementNS(u,e.name):document.createElement(e.name),e.dom.events={}}e.update=function(){let u=e.utils.flat(arguments,0,[]);if(!e.is.node&&e.is.updating||(e.is.updating=!0,u.unshift(t),o=function t(o,d,u,m,c,f,v,h,y,g,w){for(;u.length>d.length;)(f=u.pop()).el&&s(f,r),o.removeChild(f.dom);for(v=0;v<d.length;v++)if(c=d[v],f=u[v],c.el){if(h=!e.is.mounted,m=m||c.isSVG,f===n)p(c,m),o.appendChild(c.dom),f={children:[],props:{}},h=!0;else if(c.name!==f.name)p(c,m),s(f,r),o.replaceChild(c.dom,f.dom),h=!0;else for(y in c.dom=f.dom,f.props)c.props[y]===n&&("function"==typeof f.props[y]?(g=y.slice(2),c.dom.removeEventListener(g,a)):c.dom[y]!==n?c.dom[y]=null:c.dom.removeAttribute(y));for(y in c.props)if("function"==typeof(w=c.props[y]))switch(g=y.slice(2),y){case i:case l:case r:break;default:c.dom.events[g]||(c.dom.events[g]=w,c.dom.addEventListener(g,a))}else w!==f.props[y]&&(m||c.dom[y]===n?c.dom.setAttribute(y,w):c.dom[y]=w);s(c,h?i:l,f),t(c.dom,c.children,f.children,m)}else c.el===n&&(d[v]=c={props:{},nodeValue:c,children:[],el:!1}),f===n?(c.dom=document.createTextNode(c.nodeValue),o.appendChild(c.dom)):f.el?(c.dom=document.createTextNode(c.nodeValue),s(f,r),o.replaceChild(c.dom,f.dom)):(c.dom=f.dom,c.nodeValue!==f.nodeValue&&(c.dom.nodeValue=c.nodeValue));return d}(d,e.apply(e,u),o),e.is.updating=!1),e.is.node)return d.innerHTML},e.mount=function(n,i){let l=e.utils.flat(arguments,2,[]);return d=e.is.node?document.createElement("div"):"string"==typeof n?document.querySelectorAll(n)[0]:n,o=e.utils.dom2vnode(d).children,i.view||"function"!=typeof i||(i.view=i),i.view&&(t=i),e.is.mounted=!0,e.update.apply(e,l)}}),(t.is.node?global:window).v=t}();//# sourceMappingURL=valyrian.min.js.map
