!function(){"use strict";let e,t,n,o,i,l="oncreate",r="onupdate",d="onremove",s="onbeforeupdate",c=!1,f=!0,u=Object.create(null),p=[],a="key";function h(e,t,n){this.props=t||u,this.children=n,this.isSVG="svg"===e,this.name=e}function m(){}m.prototype={props:u,children:p};let g=new m;function w(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}function y(e){let t=e.nodeType;if(3===t){let t=new m;return t.dom=e,t}if(1===t){let t=new h(e.nodeName.toLowerCase(),{},[]);t.dom=e;for(let n=e.attributes.length;n--;){let o=e.attributes[n];t.props[o.nodeName]=o.nodeValue}for(let n=e.childNodes.length;n--;){let o=y(e.childNodes[n]);o&&t.children.push(o)}return t}}function v(e,t,...n){return"string"==typeof e?new h(e,t,n):("view"in e===c&&(e.view=e),e.view(t,...n))}v.isNode="undefined"==typeof window,v.addState=(e,t)=>Object.assign(e,{view:e},t),v.trust=e=>{let t=w("div",c);return t.innerHTML=e.trim(),p.map.call(t.childNodes,e=>y(e))};let N=new Map;v.use=(e,t)=>!N.has(e)&&N.set(e,e(v,t));let b={};function A(e){let n=e.target,o=`__on${e.type}`;for(;n;){if(o in n)return n[o](e),void t();n=n.parentNode}}function C(e,t,n){if(t===d)for(let t=0,n=e.children.length;t<n;t++)C(e.children[t],d);if(t in e.props)return e.props[t](e,n)}function S(e,t,n){let o=e.dom;for(let i in e.props)if(i!==a){let u=e.props[i];if("function"==typeof u)switch(i){case l:case r:case d:case s:break;default:(i=`__${i}`)in b===c&&(document.addEventListener(i.slice(4),A),b[i]=f),o[i]=u}else i in o&&o[i]!==u&&!n?o[i]=u:u!==t.props[i]&&o.setAttribute(i,u)}}function V(t,n,o,i){o||n.isSVG,n.dom=w(n.name,o),S(n,g,o),i===e?t.appendChild(n.dom):t.insertBefore(n.dom,t.children[i]||null),C(n,l),n.children=G(n.dom,n.children,p,o)}function x(e,t,n){if(n=n||e.isSVG,e.dom=t.dom,C(e,s,t)===c)e.children=t.children;else{for(let n in t.props)n in e.props===c&&"function"!=typeof t.props[n]&&(n in e.dom?e.dom[n]=null:e.dom.removeAttribute(n));S(e,t,n),C(e,v.isMounted?r:l,t),e.children=G(e.dom,e.children,t.children,n)}}function M(e,t){C(t,d),e.removeChild(t.dom)}function T(e){let t=[];for(let n=0,o=e.length;n<o;n++)t.push(e[n].props.key);return t}function G(t,n,o,i){if(Array.isArray(n)===c&&(n=[n]),0===n.length){for(let e=o.length;e--;)C(o[e],d);t.textContent=""}else{for(let e=0;e<n.length;e++)Array.isArray(n[e])&&(n.splice(e,1,...n[e]),e--);if(o.length>0&&n[0]instanceof h&&a in n[0].props){let e=T(o),l=T(n),r=o.length,d=n.length,s=[...o],c=new Array(r).fill(0);for(let o=0;o<d;o++){let d=l[o],f=e.indexOf(d);if(-1===f){let e=n[o];s.splice(o,0,e),V(t,e,i,o),c[r-1]++}else{let e=f;for(let t=r-1;t>=f;t--)e+=c[t];if(o===e){x(n[o],s[o],i);continue}let l=s.splice(e,1)[0];s.splice(o,0,l),x(n[o],l,i),t.insertBefore(n[o].dom,t.children[o]),c[f]++}}for(let n=0,o=e.length;n<o;n++)-1===l.indexOf(e[n])&&M(t,s.splice(d,1)[0])}else{if(o.length>n.length)for(let e=o.length,i=n.length;e--&&e>=i;)M(t,o[e]);for(let r=0,s=n.length;r<s;r++){let s=n[r],c=o[r];if(s instanceof h)c===e?V(t,s,i):s.name===c.name?x(s,c,i):(i=i||s.isSVG,s.dom=w(s.name,i),C(c,d),S(s,g,i),t.replaceChild(s.dom,c.dom),C(s,l),s.children=G(s.dom,s.children,p,i));else{let o;c===e?(o=document.createTextNode(s),t.appendChild(o)):c instanceof m?s!==(o=c.dom).nodeValue&&(o.nodeValue=s):(o=document.createTextNode(s),C(c,d),t.replaceChild(o,c.dom)),n[r]=new m,n[r].dom=o}}}}return n}v.update=t=(e,...t)=>(n=G(o,v(i,e,t),n),v.isMounted=f,v.isNode&&o.innerHTML),v.mount=(e,l,r,...d)=>(o=v.isNode?w("div"):"string"==typeof e?document.querySelectorAll(e)[0]:e,n=y(o).children,i=l,t(r,d)),(v.isNode?global:window).v=v}();