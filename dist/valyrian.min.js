!function(){"use strict";let e,n,t,o,i,r="oncreate",l="onupdate",d="onremove",s="onbeforeupdate",c=!1,p=!0,f=Object.create(null),u=[],a="key";function h(e,n,t){this.props=n||f,this.children=t,this.isSVG="svg"===e,this.name=e}function m(){}m.prototype={props:f,children:u};let g=new m;function w(e,n){return n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}function y(e){let n;if(3===e.nodeType)(n=new m).dom=e;else if(1===e.nodeType){(n=new h(e.nodeName.toLowerCase(),{},[])).dom=e;for(let t=e.attributes.length;t--;){let o=e.attributes[t];n.props[o.nodeName]=o.nodeValue}for(let t=e.childNodes.length;t--;){let o=y(e.childNodes[t]);o&&n.children.push(o)}}return n}function v(e,n,...t){return"string"==typeof e?new h(e,n,t):("view"in e===c&&(e.view=e),e.view(n,...t))}v.isNode="undefined"==typeof window,v.addState=(e,n)=>Object.assign(e,{view:e},n),v.trust=e=>{let n=w("div",c);return n.innerHTML=e.trim(),u.map.call(n.childNodes,e=>y(e))};let N=new Map;v.use=(e,n)=>!N.has(e)&&N.set(e,e(v,n));let C={};function b(e){let t=e.target,o=`__on${e.type}`;for(;t;){if(o in t)return t[o](e),void n();t=t.parentNode}}function A(e,n,t){if(n===d)for(let n=0,t=e.children.length;n<t;n++)A(e.children[n],d);if(n in e.props)return e.props[n](e,t)}function S(e,n,t){let o=e.dom;for(let i in e.props)if(i!==a){let f=e.props[i];if("function"==typeof f)switch(i){case r:case l:case d:case s:break;default:(i=`__${i}`)in C===c&&(document.addEventListener(i.slice(4),b),C[i]=p),o[i]=f}else i in o&&o[i]!==f&&!t?o[i]=f:f!==n.props[i]&&o.setAttribute(i,f)}}function T(e,n){e.dom=w(e.name,n),S(e,g,n),A(e,r),e.children=_(e.dom,e.children,u,n)}function V(e,n,t){if(t=t||e.isSVG,e.dom=n.dom,A(e,s,n)===c)e.children=n.children;else{for(let t in n.props)t in e.props===c&&"function"!=typeof n.props[t]&&(t in e.dom?e.dom[t]=null:e.dom.removeAttribute(t));S(e,n,t),A(e,v.isMounted?l:r,n),e.children=_(e.dom,e.children,n.children,t)}}function M(e,n){A(n,d),e.removeChild(n.dom)}function x(n,t,o,i,r){"dom"in o?V(t,o,i):T(t,i),t.dom!==n.children[r]&&(n.children[r]!==e?n.replaceChild(t.dom,n.children[r]):n.appendChild(t.dom))}function L(e){let n=[];for(let t=0,o=e.length;t<o;t++)n.push(e[t].props.key);return n}function _(n,t,o,i){if(Array.isArray(t)===c&&(t=[t]),0===t.length){for(let e=o.length;e--;)A(o[e],d);n.textContent=""}else{for(let e=0;e<t.length;e++)Array.isArray(t[e])&&(t.splice(e,1,...t[e]),e--);if(o.length>0&&t[0]instanceof h&&a in t[0].props){let r=L(o),l=L(t);for(let d=0,s=l.length;d<s;d++){let s=l[d],c=t[d];if(s===r[d])o[d].processed=p,x(n,c,o[d],i,d);else{let t=r.indexOf(s),l=d>=r.length?e:d;-1!==t?(o[t].processed=p,x(n,c,o[t],i,l)):x(n,c,g,i,l)}}for(let e=0,t=o.length;e<t;e++)"processed"in o[e]===c&&(A(o[e],d),o[e].dom.parentNode&&n.removeChild(o[e].dom))}else{if(o.length>t.length)for(let e=o.length,i=t.length;e--&&e>=i;)M(n,o[e]);for(let r=0,l=t.length;r<l;r++){let l=t[r],s=o[r];if(l instanceof h)i=i||l.isSVG,s===e||l.name!==s.name?(T(l,i),s===e?n.appendChild(l.dom):(A(s,d),n.replaceChild(l.dom,s.dom))):V(l,s,i);else{let o;s===e?(o=document.createTextNode(l),n.appendChild(o)):s instanceof m?l!==(o=s.dom).nodeValue&&(o.nodeValue=l):(o=document.createTextNode(l),A(s,d),n.replaceChild(o,s.dom)),t[r]=new m,t[r].dom=o}}}}return t}v.update=n=(e,...n)=>(t=_(o,v(i,e,n),t),v.isMounted=p,v.isNode&&o.innerHTML),v.mount=(e,r,l,...d)=>(o=v.isNode?w("div"):"string"==typeof e?document.querySelectorAll(e)[0]:e,t=y(o).children,i=r,n(l,d)),(v.isNode?global:window).v=v}();