(()=>{var e=class{constructor(e,o=null,n){this.props=o||{},this.children=n,this.name=e}},o=class{constructor(e){this.dom=e}},n=class{constructor(e,o=null,n){this.props=o,this.children=n,this.component=e}},t=void 0,d=null,r=Array.isArray,p="function",i="v-once",l="key",s=(e,o=!1)=>o?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e),a=n=>{if(1===n.nodeType){let o={};[].forEach.call(n.attributes,e=>o[e.nodeName]=e.nodeValue);let t=new e(n.nodeName,o,[]);t.dom=n;for(let e=0,o=n.childNodes.length;e<o;e++){let o=a(n.childNodes[e]);o&&t.children.push(o)}return t}if(3===n.nodeType)return new o(n)},c=new e("empty",d,[]),m=o=>{for(let n=0,t=o.children.length;n<t;n++)o.children[n]instanceof e&&m(o.children[n]);o.props.onremove&&o.props.onremove(o)},u="undefined"==typeof window||"undefined"!=typeof global,f=e=>{let o=s("div");return o.innerHTML=e.trim(),[].map.call(o.childNodes,e=>a(e))};(u?global:window).v=function h(){function v(o,t=null,...d){return"string"==typeof o?new e(o,t,d):new n(o,t,d)}v.isMounted=!1,v.isNode=u;let g,w,N,y=d,V=[l,"data",i,"oncreate","onupdate","onremove","onbeforeupdate"];v.reservedWords=V;let C={parentVnode:t,oldParentVnode:t,component:t};v.current=C;let b=new Map;v.usePlugin=(e,o={})=>!b.has(e)&&b.set(e,!0)&&e(v,o);let x={};function S(e){let o=e.target,n=`__on${e.type}`;for(;o;){if(o[n])return o[n](e,o),void(e.defaultPrevented||v.update());o=o.parentNode}}v.trust=f;let M=[];v.onCleanup=e=>{let o=v.current.parentVnode;o.onCleanup||(o.onCleanup=[]),o.onCleanup.push(e),-1===M.indexOf(o)&&M.push(o)};let A=e=>{for(let o in e.props){let n=e.props[o];if(!(o in e.props))return;-1!==V.indexOf(o)?P[o]&&P[o](n,e):typeof n===p?(o=`__${o}`,x[o]||(y.addEventListener(o.slice(4),S),x[o]=!0),e.dom[o]=n):o in e.dom&&!e.isSVG?e.dom[o]!=n&&(e.dom[o]=n):!1!==n&&e.dom.setAttribute(o,n)}},G=(e,o,n)=>{if(e in o.props){let t=o.props[e];-1!==V.indexOf(e)?P[e]&&P[e](t,o,n):typeof t===p?(x[e=`__${e}`]||(y.addEventListener(e.slice(4),S),x[e]=!0),o.dom[e]=t):e in o.dom&&!o.isSVG?o.dom[e]!=t&&(o.dom[e]=t):(!n||t!==n.props[e])&&(!1===t?o.dom.removeAttribute(e):o.dom.setAttribute(e,t))}};v.updateProperty=G;let O=(e,o)=>{for(let n in e.props){if(!(n in e.props))return;G(n,e,o)}},T=(e,o)=>{for(let n in o.props)-1===V.indexOf(n)&&!(n in e.props)&&(o===c||typeof o.props[n]!==p)&&(n in e.dom?e.dom[n]=t:e.dom.removeAttribute(n))},_=(e,o,n)=>{n?o.replaceChild(e,n):o.appendChild(e)},E=(e,o,n,t)=>{let d=e.childNodes[n];t?(o.dom=t.dom,i in o.props||o.props.onbeforeupdate&&!1===o.props.onbeforeupdate(o,t)?(o.children=t.children,o.dom!==d&&_(o.dom,e,d)):(T(o,t),O(o,t),o.dom!==d&&_(o.dom,e,d),v.isMounted?o.props.onupdate&&o.props.onupdate(o,t):o.props.oncreate&&o.props.oncreate(o),L(o,t))):(o.dom=s(o.name,o.isSVG),A(o),o.dom!==d&&_(o.dom,e,d),o.props.oncreate&&o.props.oncreate(o),L(o))},L=(p,a=c)=>{let u=r(p.children)?p.children:[p.children],f=a.children;C.parentVnode=p,C.oldParentVnode=a;for(let o=0;o<u.length;o++){let i=u[o];i instanceof e?i.isSVG=p.isSVG||"svg"===i.name:i===d||i===t?u.splice(o--,1):i instanceof n?(C.component=i,u.splice(o--,1,("view"in i.component?i.component.view:i.component).call(i.component,i.props,...i.children))):r(i)&&u.splice(o--,1,...i)}if(0===u.length){if(f.length>0){for(let o=f.length;o--;)f[o]instanceof e&&m(f[o]);p.dom.textContent=""}}else if(f.length&&u[0]instanceof e&&l in u[0].props){let o=l in(f[0].props||{})?f.map(e=>e.props.key):[],n=u.map(e=>e.props.key);for(let e=0,t=n.length;e<t;e++){let t=n[e],d=u[e];if(t===o[e])f[e].processed=!0,E(p.dom,d,e,f[e]);else{let n=o.indexOf(t),r=e>=o.length?-1:e;-1!==n?(f[n].processed=!0,E(p.dom,d,r,f[n])):E(p.dom,d,r)}}let t=f.length;for(;t--;)if(!f[t].processed){let o=f[t];o instanceof e&&m(o),o.dom&&o.dom.parentNode&&o.dom.parentNode.removeChild(o.dom)}}else{let n=f.length,t=u.length;for(;n-- >t;){let o=f[n];o instanceof e&&m(o),o.dom&&o.dom.parentNode&&o.dom.parentNode.removeChild(o.dom)}for(n=0;n<t;n++){let t=u[n],d=f[n];if(t instanceof e)d&&t.name===d.name?(t.dom=d.dom,i in t.props||t.props.onbeforeupdate&&!1===t.props.onbeforeupdate(t,d)?t.children=d.children:(T(t,d),O(t,d),v.isMounted?t.props.onupdate&&t.props.onupdate(t,d):t.props.oncreate&&t.props.oncreate(t),L(t,d))):(t.dom=s(t.name,t.isSVG),A(t),d?(d instanceof e&&m(d),p.dom.replaceChild(t.dom,p.dom.childNodes[n])):p.dom.appendChild(t.dom),t.props.oncreate&&t.props.oncreate(t),L(t));else{let e,r=t instanceof o?t.dom.nodeValue:String(t);d instanceof o?(e=d.dom,r!=e.nodeValue&&(e.nodeValue=r)):(e=document.createTextNode(r),d?(m(d),p.dom.replaceChild(e,d.dom)):p.dom.appendChild(e)),u[n]=new o(e)}}}p.children=u};v.update=(o=null,...n)=>{if(g)return N&&((()=>{for(let e=M.length;e--;)for(let o of M[e].onCleanup)o();M=[]})(),w=g,g=new e(g.name,g.props,[v(N,o,...n)]),g.dom=w.dom,g.isSVG="svg"===g.name,L(g,w),v.isMounted=!0),v.isNode&&g.dom.innerHTML},v.mount=(e,o,n=null,...t)=>(y=v.isNode?s(e):document.querySelectorAll(e)[0],g=a(y),N=o,v.update(n,...t)),v.unMount=()=>{y=d,N=()=>"";let e=v.update();return v.isMounted=!1,e};let P={};v.directive=(e,o)=>{let n=`v-${e}`;-1===V.indexOf(n)&&(V.push(n),P[n]=o)};let $=o=>(n,t,d)=>{if(o?n:!n){let o=document.createTextNode("");d&&d.dom&&d.dom.parentNode&&(d instanceof e&&m(d),d.dom.parentNode.replaceChild(o,d.dom)),t.name="#text",t.children=[],t.props={},t.dom=o}};return v.directive("if",$(!1)),v.directive("unless",$(!0)),v.directive("for",(e,o)=>o.children=e.map(o.children[0])),v.directive("show",(e,o)=>o.dom.style.display=e?"":"none"),v.directive("class",(e,o)=>{for(let n in e)o.dom.classList.toggle(n,e[n])}),v.directive("html",(e,o)=>o.children=f(e)),v.newInstance=h,v}()})();