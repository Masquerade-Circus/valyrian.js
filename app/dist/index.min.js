(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
	typeof define === 'function' && define.amd ? define(factory) :
	(global.App = factory());
}(this, (function () { 'use strict';

	var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

	(function () {

	    var mountedComponent;
	    var oldTree;
	    var newTree;
	    var mainContainer;
	    var plugins = [];

	    function v(tagOrComponent, props, vnode, i, children) {
	        if (typeof tagOrComponent === 'string') {
	            vnode = {
	                name: tagOrComponent,
	                props: {},
	                children: [],
	                dom: null,
	                isVnode: true,
	                nt: 1,
	                isSVG: tagOrComponent === 'svg'
	            };

	            for (i in props) {
	                vnode.props[i] = props[i];
	            }

	            v.utils.flat(arguments, 2, vnode.children, true);
	            return vnode;
	        }

	        if (typeof tagOrComponent === 'function') {
	            return Object.assign({view: tagOrComponent, isComponent: true}, props);
	        }

	        if (typeof tagOrComponent === 'object') {
	            if (typeof tagOrComponent.view === 'function') {
	                Object.assign(tagOrComponent, {isComponent: true});
	            }

	            if (tagOrComponent.isComponent) {
	                children = tagOrComponent.view.apply(tagOrComponent, v.utils.flat(arguments, 1, []));
	                return Array.isArray(children) ? children : [children];
	            }
	        }
	    }

	    function dom2vnode($el, vnode) {
	        if ($el.nodeType === 3 || $el.nodeType === 1) {
	            vnode = {
	                name: $el.nodeName.toLowerCase(),
	                props: {},
	                children: [],
	                dom: $el,
	                isVnode: true,
	                nodeValue: null,
	                nt: $el.nodeType
	            };

	            if (vnode.nt === 3) {
	                vnode.nodeValue = $el.nodeValue;
	                return vnode;
	            }

	            if (vnode.name === 'svg') {
	                vnode.isSVG = true;
	            }

	            vnode.dom.events = {};

	            Array.prototype.map.call($el.attributes, function (property) {
	                vnode.props[property.nodeName] = property.nodeValue;
	            });

	            Array.prototype.forEach.call($el.childNodes, function ($el) {
	                var childvnode = dom2vnode($el);
	                if (childvnode !== undefined) {
	                    vnode.children.push(childvnode);
	                }
	            });

	            return vnode;
	        }
	    }

	    function lifecycleCall(vnode, methodName) {
	        if (vnode.props[methodName] !== undefined) {
	            return vnode.props[methodName](vnode);
	        }
	    }

	    function eventListener(e) {
	        if (e.currentTarget.events['on' + event.type] !== undefined) {
	            e.currentTarget.events['on' + event.type](e);
	        }
	        v.update();
	    }

	    function patch($parent, newTree, oldTree, isSVG, max, newNode, oldNode, i, isNew, name) {
	        if (newTree.length === 0) {
	            $parent.textContent = '';
	            return;
	        }

	        max = newTree.length > oldTree.length ? newTree.length : oldTree.length;
	        i = 0;
	        for (; i < max; i++) {
	            newNode = newTree[i];
	            oldNode = oldTree[i];

	            if (newNode === undefined) { // Removed
	                if (oldNode !== undefined) {
	                    if (oldNode.nt === 3) {
	                        lifecycleCall(oldNode, 'onremove');
	                    }
	                    $parent.removeChild(oldNode.dom);
	                }
	                continue;
	            }

	            if (newNode.nt === undefined) { // Is text
	                newTree[i] = newNode = {
	                    name: '#text',
	                    isVnode: true,
	                    nodeValue: newNode,
	                    nt: 3
	                };

	                if (oldNode === undefined) {
	                    newNode.dom = document.createTextNode(newNode.nodeValue);
	                    $parent.appendChild(newNode.dom);
	                } else { // Replaced
	                    if (oldNode.nt === 1) {
	                        newNode.dom = document.createTextNode(newNode.nodeValue);
	                        lifecycleCall(oldNode, 'onremove');
	                        $parent.replaceChild(newNode.dom, oldNode.dom);
	                    } else {
	                        newNode.dom = oldNode.dom;
	                        if (newNode.nodeValue != oldNode.nodeValue) {
	                            newNode.dom.nodeValue = newNode.nodeValue;
	                        }
	                    }
	                }

	                continue;
	            }

	            isNew = !v.is.mounted;

	            isSVG = isSVG || newNode.isSVG;

	            if (oldNode === undefined) { // Added
	                lifecycleCall(newNode, 'oninit');
	                newNode.dom = isSVG ?
	                    document.createElementNS("http://www.w3.org/2000/svg", newNode.name) :
	                    document.createElement(newNode.name);
	                newNode.dom.events = {};
	                $parent.appendChild(newNode.dom);
	                oldNode = {children: []};
	                isNew = true;
	            } else {
	                if (newNode.name !== oldNode.name) { // Replaced
	                    lifecycleCall(newNode, 'oninit');
	                    newNode.dom = isSVG ?
	                        document.createElementNS("http://www.w3.org/2000/svg", newNode.name) :
	                        document.createElement(newNode.name);
	                    newNode.dom.events = {};

	                    lifecycleCall(oldNode, 'onremove');
	                    $parent.replaceChild(newNode.dom, oldNode.dom);
	                    isNew = true;
	                } else { // Updated
	                    newNode.dom = oldNode.dom;
	                    for (name in oldNode.props) {
	                        if (newNode.props[name] === undefined) {
	                            if (typeof oldNode.props[name] === 'function') {
	                                newNode.dom.removeEventListener(name.slice(2), eventListener);
	                                continue;
	                            }

	                            if (v.is.node || isSVG || newNode.dom[name] === undefined) {
	                                newNode.dom.removeAttribute(name);
	                                continue;
	                            }

	                            newNode.dom[name] = null;
	                        }
	                    }
	                }
	            }

	            patch(newNode.dom, newNode.children, oldNode.children, isSVG);

	            // Update props
	            for (name in newNode.props) {
	                if (
	                    (
	                        isNew ||
	                        (newNode.props[name] !== oldNode.props[name])
	                    ) &&
	                    newNode.props[name] !== undefined
	                ) {
	                    if (typeof newNode.props[name] === 'function') {
	                        switch (name) {
	                            case 'oninit':
	                            case 'oncreate':
	                            case 'onupdate':
	                            case 'onremove':
	                                break;
	                            default:
	                                if (newNode.dom.events[name] === undefined) {
	                                    newNode.dom.events[name] = newNode.props[name];
	                                    newNode.dom.addEventListener(name.slice(2), eventListener);
	                                }
	                                break;
	                        }

	                        continue;
	                    }

	                    if (v.is.node || isSVG || newNode.dom[name] === undefined) {
	                        newNode.dom.setAttribute(name, newNode.props[name]);
	                        continue;
	                    }

	                    newNode.dom[name] = newNode.props[name];
	                }
	            }

	            if (!v.is.mounted && !isNew) {
	                lifecycleCall(newNode, 'oninit');
	                lifecycleCall(newNode, 'oncreate');
	            }

	            lifecycleCall(newNode, isNew ? 'oncreate' : 'onupdate');
	        }
	    }


	    v.utils = {
	        flat: function (args, start, arr, notEmpty, l) {
	            l = args.length;

	            if (notEmpty === undefined) {
	                notEmpty = false;
	            }

	            for (; start < l; start++) {
	                if (Array.isArray(args[start])) {
	                    arr = v.utils.flat(args[start], 0, arr);
	                    continue;
	                }
	                if (
	                    notEmpty === false
	                    || (
	                        args[start] !== undefined
	                        && args[start] !== null
	                    )
	                ) {
	                    arr.push(args[start]);
	                }
	            }

	            return arr;
	        }
	    };

	    v.is = {
	        node: typeof window === 'undefined',
	        mounted: false,
	        updating: false
	    };
	    v.is.browser = !v.is.node;

	    v.trust = function (htmlString) {
	        var div = document.createElement('div');
	        div.innerHTML = htmlString.trim();

	        return Array.prototype.map.call(div.childNodes, function (item) { return dom2vnode(item); });
	    };

	    v.update = function (args) {
	        args = v.utils.flat(arguments, 0, []);
	        if (typeof args[0] === 'object' && args[0].isComponent) {
	            mountedComponent = args.shift();
	        }

	        return new Promise(function update(resolve) {
	            if (!v.is.updating) {
	                v.is.updating = true;
	                args.unshift(mountedComponent);
	                newTree = v.apply(v, args);
	                patch(mainContainer, newTree, oldTree);
	                oldTree = newTree;
	                v.is.updating = false;
	                v.is.mounted = true;
	                if (v.is.node) {
	                    return resolve(mainContainer.innerHTML);
	                }
	                resolve();
	            }
	        });
	    };

	    v.mount = function (container, component) {
	        mainContainer = v.is.node
	            ? document.createElement('div')
	            : typeof container === 'string'
	                ? document.querySelectorAll(container)[0]
	                : container;

	        oldTree = dom2vnode(mainContainer).children;

	        return v.update.apply(this, v.utils.flat(arguments, 1, []));
	    };

	    v.use = function (plugin, options) {
	        if (plugins.indexOf(plugin) === -1) {
	            plugin(v, options);
	            plugins.push(plugin);
	        }
	        return v;
	    };

	    (v.is.node ? commonjsGlobal : window).v = v;

	}());

	/**
	 * Handles the mix of single and array of middlewares
	 * @method parseMiddlewares
	 * @param  {Function|Array}         middlewares     // Middleware or array of middlewares
	 * @param  {Array}                  [array=[]]      // The array to store the final list of middlewares
	 * @return {Array}                                  // The final list of middlewares
	 */
	var parseMiddlewares = function (middlewares, array) {
	    if ( array === void 0 ) array = [];

	    if (typeof middlewares === 'function') {
	        array.push(middlewares);
	        return array;
	    }

	    var i = 0, l = middlewares.length;
	    for (; i < l; i++) {
	        if (Array.isArray(middlewares[i])) {
	            parseMiddlewares(middlewares[i], array);
	            continue;
	        }

	        array.push(middlewares[i]);
	    }
	    return array;
	};

	/**
	 * @description Adds a path to a router
	 * @method addPath
	 * @param  {Router} router              The router in which to add the path
	 * @param  {String} method              The method that will handle this path
	 * @param  {Array} args                The mixed params (String|Function|Array)
	 * @returns {Router}                    The router
	 */
	var addPath = function (router, method, args) {
	    var path, middlewares;

	    // Get the first argument
	    if (typeof args[0] === 'string') {
	        path = args.shift();
	    }

	    // If the seccond argument is a function and has paths
	    // and regexpList properties then
	    // Treat it as a subrouter
	    if (
	        typeof args[0] === 'function' &&
	        args[0].paths &&
	        args[0].regexpList
	    ) {
	        var subrouter = args.shift(),
	            i = 0,
	            l = subrouter.paths.length;

	        // For each path of the subrouter
	        for (; i < l; i++) {
	            var submiddlewares = subrouter.paths[i].middlewares;
	            var submethod = subrouter.paths[i].method;
	            var subpath = subrouter.paths[i].path;

	            // If there is a path add it as prefix to the subpath
	            if (path) {
	                subpath = path + (subpath || '*');
	            }

	            // If there is a subpath set it as the first element
	            // on the submiddlewares array
	            if (subpath) {
	                submiddlewares.unshift(subpath);
	            }

	            // Add the path to the router
	            router = addPath(router, submethod, submiddlewares);
	        }
	    }

	    // Parse middlwares to handle mixed arrays of middlwares and sequenced middlwares
	    middlewares = parseMiddlewares(args);

	    // Add the path only if there are middlewares passed
	    if (middlewares.length > 0) {
	        // If the path wasn't set before, set the regexp and params list
	        if (path && router.regexpList[path] === undefined) {
	            // Remove the last slash
	            path = path.replace(/\/(\?.*)?$/gi, '$1');

	            // Find the express like params
	            var params = path.match(/:(\w+)?/gi) || [];

	            // Set the names of the params found
	            for (var i$1 in params) {
	                params[i$1] = params[i$1].slice(1);
	            }

	            var regexpPath = path
	                // Catch params
	                .replace(/:(\w+)/gi, '([^\\s\\/|\\?]+)')
	                // To set to any url with the path as prefix
	                .replace(/\*/g, '.*')
	                // Remove the last slash
	                .replace(/\/(\?.*)?$/gi, '$1');

	            // Set the object to the path
	            router.regexpList[path] = {
	                regexp: new RegExp('^' + regexpPath + '/?(\\?.*)?$', 'gi'),
	                params: params
	            };
	        }

	        // Add the path to the paths list
	        router.paths.push({
	            method: method,
	            path: path,
	            middlewares: middlewares
	        });
	    }

	    return router;
	};

	var RouterFactory = function () {
	    /**
	     * new Rotuer
	     * @param  {String}    url     The path to call
	     * @return {Any}           The final response
	     */
	    var Router = async function (url) {
	        if ( url === void 0 ) url = '/';

	        var method = 'get',
	            params = {},
	            middlewares = [],
	            response,
	            i = 0,
	            l = Router.paths.length;

	        Router.url = url;

	        for (; i < l; i++) {
	            var path = Router.paths[i];
	            if (method !== path.method && path.method !== 'use') {
	                continue;
	            }

	            if ((path.method === 'use' || method === path.method) && path.path === undefined) {
	                parseMiddlewares(path.middlewares, middlewares);
	                continue;
	            }

	            var reg = Router.regexpList[path.path];
	            var matches = reg.regexp.exec(url);
	            reg.regexp.lastIndex = -1;
	            if (Array.isArray(matches)) {
	                matches.shift();
	                var regparams = reg.params;
	                var l$1 = regparams.length;
	                for (; l$1--;) {
	                    if (params[regparams[l$1]] === undefined) {
	                        params[regparams[l$1]] = matches[l$1];
	                    }
	                }
	                parseMiddlewares(path.middlewares, middlewares);
	            }
	        }

	        Router.params = params;

	        if (middlewares.length > 0) {
	            var i$1 = 0, l$2 = middlewares.length;
	            // call sequentially every middleware
	            for (; i$1 < l$2; i$1++) {
	                response = await middlewares[i$1](params);
	                // If there is a response
	                // break the for block
	                if (response) {
	                    return response;
	                }
	            }
	        }

	        if (Router.throwNotFound) {
	            // If no response was sent to the client throw an error
	            throw new Error(("The url " + url + " requested wasn't found"));
	        }
	    };

	    Router.url = '/';
	    Router.params = {};
	    Router.throwNotFound = true;

	    /**
	     * Where to store the paths and its middlewares
	     * @type {Object}
	     */
	    Router.paths = [];

	    /**
	     * Where to store the regexp and params list for the paths
	     * @type {[type]}
	     */
	    Router.regexpList = {};

	    // For each accepted method, add the method to the router
	    Router.get = function () {
	        return addPath(Router, 'get', v.utils.flat(arguments, 0, []));
	    };
	    Router.use = function () {
	        return addPath(Router, 'use', v.utils.flat(arguments, 0, []));
	    };

	    /**
	     * Return the new router
	     * @type {Router}
	     */
	    return Router;
	};


	var plugin = function (v) {
	    var mainRouter;
	    var RoutesContainer;
	    function runRoute(parentComponent, url, args) {
	        return mainRouter(url)
	            .then(function (response) {
	                if (typeof response !== 'object') {
	                    throw new Error('v.router.component.required');
	                }

	                if (!response.isComponent && typeof response.view === 'function') {
	                    Object.assign(response, {isComponent: true});
	                }

	                if (!response.isComponent) {
	                    throw new Error('v.router.component.required');
	                }

	                if (parentComponent) {
	                    args.unshift(v(response, args));
	                    response = parentComponent;
	                }

	                args.unshift(response);

	                if (v.is.node || !v.is.mounted) {
	                    args.unshift(RoutesContainer);
	                    return v.mount.apply(v, args);
	                }

	                return v.update.apply(v, args);
	            });
	    }
	    v.routes = function (elementContainer, router) {
	        if (elementContainer && router) {
	            mainRouter = router;
	            RoutesContainer = elementContainer;
	            // Activate the use of the router
	            if (v.is.browser) {
	                function onPopStateGoToRoute() {
	                    v.routes.go(document.location.pathname);
	                }
	                window.addEventListener('popstate', onPopStateGoToRoute, false);
	                onPopStateGoToRoute();
	            }
	        }
	    };

	    v.routes.get = function () {
	        var routes = [];
	        mainRouter.paths.forEach(function (path) {
	            if (path.method === 'get') {
	                routes.push(path.path === '' ? '/' : path.path);
	            }
	        });
	        return routes;
	    };

	    v.routes.current = '/';
	    v.routes.params = {};

	    v.routes.go = function () {
	        var args = v.utils.flat(arguments, 0, []);
	        var parentComponent;
	        var url;

	        if (typeof args[0] === 'object') {
	            if (!args[0].isComponent && typeof args[0].view === 'function') {
	                args[0] = Object.assign(args[0], {isComponent: true});
	            }

	            if (args[0].isComponent) {
	                parentComponent = args.shift();
	            }
	        }

	        if (typeof args[0] === 'string') {
	            url = args.shift();
	        }

	        if (!url) {
	            throw new Error('v.router.url.required');
	        }

	        if (v.is.browser) {
	            window.history.pushState({}, '', url);
	        }

	        return runRoute(parentComponent, url, args);
	    };

	    v.Router = RouterFactory;
	};

	var plugin$1 = function (v) {
	    var Request = function (baseUrl, options) {
	        if ( baseUrl === void 0 ) baseUrl = '';
	        if ( options === void 0 ) options = {};

	        var url = baseUrl.replace(/\/$/gi, '').trim(),
	            opts = Object.assign({
	                methods: ['get', 'post', 'put', 'patch', 'delete']
	            }, options),
	            parseUrl;

	        function serialize(obj, prefix) {
	            var e = encodeURIComponent;
	            return Object.keys(obj)
	                .map(function (p) {
	                    var k = prefix ? prefix + '[' + p + ']' : p;

	                    return typeof obj[p] === 'object'
	                        ? serialize(obj[p], k)
	                        : e(k) + '=' + e(obj[p]);
	                })
	                .join('&');
	        }

	        function request(method, url, data, options) {
	            if ( options === void 0 ) options = {};

	            var opts = Object.assign({
	                    method: method.toLowerCase(),
	                    headers: {
	                        'Accept': 'application/json',
	                        'Content-Type': 'application/json'
	                    }
	                }, request.options, options),
	                type = opts.headers.Accept;

	            if (data !== undefined) {
	                if (opts.method === 'get' && typeof data === 'object') {
	                    url += data = serialize(data);
	                }

	                if (opts.method !== 'get') {
	                    opts.body = JSON.stringify(data);
	                }
	            }

	            return fetch(parseUrl(url), opts)
	                .then(function (response) {
	                    if (response.status < 200 || response.status > 300) {
	                        var err = new Error(response.statusText);
	                        err.response = response;
	                        throw err;
	                    }

	                    if (/text/gi.test(type)) {
	                        return response.text();
	                    }

	                    if (/json/gi.test(type)) {
	                        return response.json();
	                    }

	                    return response;
	                });
	        }
	        parseUrl = function (url) {
	            var u = /^https?/gi.test(url)
	                ? url
	                : (request.baseUrl + '/' + url).trim().replace(/^\/\//gi, '/').trim();

	            if (
	                v.is.node &&
	                typeof request.nodeUrl === 'string'
	            ) {
	                request.nodeUrl = request.nodeUrl.replace(/\/$/gi, '').trim();

	                if (/^https?/gi.test(u) && typeof request.apiUrl === 'string') {
	                    request.apiUrl = request.apiUrl.replace(/\/$/gi, '').trim();
	                    u = u.replace(request.apiUrl, request.nodeUrl);
	                }

	                if (!/^https?/gi.test(u)) {
	                    u = request.nodeUrl + u;
	                }
	            }

	            return u;
	        };

	        request.new = function (baseUrl, options) {
	            return Request(baseUrl, options);
	        };

	        // Change this to  request.urls.api etc...
	        request.apiUrl = undefined;
	        request.nodeUrl = undefined;
	        request.options = opts;
	        request.baseUrl = url;

	        opts.methods.forEach(function (method) { return request[method] = function (url, data, options) { return request(method, url, data, options); }; }
	        );

	        return request;
	    };

	    v.request = Request();
	};

	var plugin$2 = function (v) {
	    if (v.is.browser) {
	        v.sw = function (file, options) {
	            if ( file === void 0 ) file = v.sw.file;
	            if ( options === void 0 ) options = v.sw.options;

	            return navigator.serviceWorker.register(file, options)
	                .then(function () { return navigator.serviceWorker.ready; })
	                .then(function (registration) {
	                    v.sw.ready = true;
	                    v.sw.file = file;
	                    v.sw.options = options;
	                    return new Promise(function (resolve, reject) {
	                        setTimeout(function () {
	                            resolve(navigator.serviceWorker);
	                        }, 10);
	                    });
	                });
	        };

	        v.sw.ready = false;
	        v.sw.file = '/sw.js';
	        v.sw.options = {scope: '/'};
	    }
	};

	v
	    .use(plugin)
	    .use(plugin$1)
	    .use(plugin$2);

	var links = { 
	    view: function view(){ 
	        return [
	            v("link", {"rel":"apple-touch-icon","sizes":"114x114","href":"/icons/apple-touch-icon-114x114.png"}),
	            v("link", {"rel":"apple-touch-icon","sizes":"120x120","href":"/icons/apple-touch-icon-120x120.png"}),
	            v("link", {"rel":"apple-touch-icon","sizes":"144x144","href":"/icons/apple-touch-icon-144x144.png"}),
	            v("link", {"rel":"apple-touch-icon","sizes":"152x152","href":"/icons/apple-touch-icon-152x152.png"}),
	            v("link", {"rel":"apple-touch-icon","sizes":"180x180","href":"/icons/apple-touch-icon-180x180.png"}),
	            v("link", {"rel":"apple-touch-icon","sizes":"57x57","href":"/icons/apple-touch-icon-57x57.png"}),
	            v("link", {"rel":"apple-touch-icon","sizes":"60x60","href":"/icons/apple-touch-icon-60x60.png"}),
	            v("link", {"rel":"apple-touch-icon","sizes":"72x72","href":"/icons/apple-touch-icon-72x72.png"}),
	            v("link", {"rel":"apple-touch-icon","sizes":"76x76","href":"/icons/apple-touch-icon-76x76.png"}),
	            v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)","href":"/icons/apple-touch-startup-image-320x460.png"}),
	            v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)","href":"/icons/apple-touch-startup-image-640x920.png"}),
	            v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)","href":"/icons/apple-touch-startup-image-640x1096.png"}),
	            v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)","href":"/icons/apple-touch-startup-image-750x1294.png"}),
	            v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 414px) and (device-height: 736px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3)","href":"/icons/apple-touch-startup-image-1182x2208.png"}),
	            v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 414px) and (device-height: 736px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3)","href":"/icons/apple-touch-startup-image-1242x2148.png"}),
	            v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)","href":"/icons/apple-touch-startup-image-748x1024.png"}),
	            v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)","href":"/icons/apple-touch-startup-image-1496x2048.png"}),
	            v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)","href":"/icons/apple-touch-startup-image-768x1004.png"}),
	            v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)","href":"/icons/apple-touch-startup-image-1536x2008.png"}),
	            v("link", {"rel":"icon","type":"image/png","sizes":"16x16","href":"/icons/favicon-16x16.png"}),
	            v("link", {"rel":"icon","type":"image/png","sizes":"32x32","href":"/icons/favicon-32x32.png"}),
	            v("link", {"rel":"manifest","href":"/icons/manifest.json"}),
	            v("link", {"rel":"shortcut icon","href":"/icons/favicon.ico"}),
	            v("meta", {"name":"apple-mobile-web-app-capable","content":"yes"}),
	            v("meta", {"name":"apple-mobile-web-app-status-bar-style","content":"black-translucent"}),
	            v("meta", {"name":"apple-mobile-web-app-title","content":"Valyrian.js"}),
	            v("meta", {"name":"application-name","content":"Valyrian.js"}),
	            v("meta", {"name":"mobile-web-app-capable","content":"yes"}),
	            v("meta", {"name":"msapplication-TileColor","content":"#fff"}),
	            v("meta", {"name":"msapplication-TileImage","content":"/icons/mstile-144x144.png"}),
	            v("meta", {"name":"msapplication-config","content":"/icons/browserconfig.xml"}),
	            v("meta", {"name":"theme-color","content":"#fff"})
	        ];
	    }
	};

	var version = "2.0.1";

	var Main = {
	    title: 'Valyrian.js',
	    version: version,
	    view: function view(content) {
	        return v('html', {lang: 'en'}, [
	            v('head', null, [
	                v('title', null, Main.title),
	                v('style', null, v.inline.uncss()),
	                v(links) ]),
	            v('body', null, [
	                content,
	                // v('script', v.inline.js())
	                v('script', {src: '/index.min.js', async: true})
	            ])
	        ]);
	    }
	};

	// function view(content) {
	//     return v('html', {lang: 'en'}, [
	//         v('head', null, [
	//             v('title', null, this.title),
	//             v('style', null, v.inline.uncss()),
	//             v(links),
	//             v('script', {src: '/index.min.js', async: true})
	//         ]),
	//         v('body', [
	//             content
	//             // v('script', v.inline.js())
	//         ])
	//     ]);
	// };

	// export default v(view, {title: 'Valyrian.js', version});

	var state = {
	    data: {
	        hello: 'Hello',
	        name: 'world'
	    },
	    getServer: function getServer() {
	        var this$1 = this;

	        return v.request.get('/api/hola').then(function (data) {
	            this$1.data = data;
	        });
	    }
	};

	function view() {
	    return v('div', {id: 'mundo', class: 'hola'}, ((this.data.hello) + " " + (this.data.name)));
	}

	var Hello = v(view, state);

	var Counter = {
	    count: 0,
	    down: function (value) {
	        Counter.count -= value;
	    },
	    up: function (value) {
	        Counter.count += value;
	    },
	    view: function () {
	        return v("div", null, [
	            v("h1", null, Counter.count),
	            v("button", { onclick: function () { return Counter.down(1); } }, "-"),
	            v("button", { onclick: function () { return Counter.up(1); } }, "+"),
	            v("a", { href: '/hello', onclick: function onclick(e) {
	                v.routes.go('/hello');
	                e.preventDefault();
	            } }, "Go to hello"),
	            v('div', null, [
	                Counter.count === 2 ? v('span', null, 2) : '',
	                v('br'),
	                v('div', null, 'boolean true'),
	                v('div', null, true),
	                v('br'),
	                v('div', null, 'boolean false'),
	                v('div', null, false),
	                v('br'),
	                v('div', null, 'empty object'),
	                v('div', null, {}),
	                v('br'),
	                v('div', null, 'null'),
	                v('div', null, null),
	                v('br'),
	                v('div', null, 'undefined'),
	                v('div', null, undefined),
	                v('br'),
	                v('ul', null, (function () {
	                    var elem = [];
	                    if (Counter.count >= 0) {
	                        for (var l = Counter.count; l--;) {
	                            elem.push(v('li', null, l));
	                        }
	                    }

	                    return elem;
	                }())),
	                v('img', {
	                    className: 'div',
	                    id: 'ok',
	                    src: 'http://placeimg.com/640/480/any'
	                })
	            ])
	        ]);
	    }
	};

	var Diff = {
	    s: 1,
	    up: function () { return Diff.s += 1; },
	    down: function () { return Diff.s -= 1; },
	    view: function view() {
	        return v('div', null, [
	            Diff.s > 0 ? v('h1', null, Diff.s) : v('small'),
	            v('button', { onclick: Diff.up }, '+'),
	            v('button', { onclick: Diff.down }, '-')
	        ]);
	    }
	};

	var Lifecycle = {
	    s: 1,
	    up: function () { return Lifecycle.s += 1; },
	    down: function () { return Lifecycle.s += -1; },
	    view: function view() {
	        return v('div', {
	            oninit: function oninit(vnode) { // Before dom element is created
	                console.log('component oninit', vnode);
	            },
	            oncreate: function oncreate(vnode) { // After dom element is created and attached to the document
	                console.log('component oncreate', vnode);
	            },
	            onupdate: function onupdate(vnode) { // after dom element is updated
	                console.log('component onupdate', vnode);
	            },
	            onremove: function onremove(vnode) { // after dom element is removed
	                console.log('component onremove', vnode);
	            }
	        }, [
	            Lifecycle.s > 0 ? v('h1', {
	                oninit: function oninit(vnode) { // Before dom element is created
	                    console.log('oninit', vnode);
	                },
	                oncreate: function oncreate(vnode) { // After dom element is created and attached to the document
	                    console.log('oncreate', vnode);
	                },
	                onupdate: function onupdate(vnode) { // after dom element is updated
	                    console.log('onupdate', vnode);
	                },
	                onremove: function onremove(vnode) { // after dom element is removed
	                    console.log('onremove', vnode);
	                }
	            }, Lifecycle.s) : v('small'),
	            v('button', {onclick: Lifecycle.up}, '+'),
	            v('button', {onclick: Lifecycle.down}, '-'),
	            v('ul', null, (function () {
	                var elem = [];
	                if (Lifecycle.s >= 0) {
	                    for (var l = Lifecycle.s; l--;) {
	                        if (l !== 4) {
	                            elem.push(v('li', null, v('span', {
	                                onremove: function onremove(vnode) {
	                                    console.log('onspanremove', vnode);
	                                }
	                            }, l + 1)));
	                        }
	                    }
	                }

	                return elem;
	            }()))
	        ]);
	    }
	};

	var SubcomponentFactory = function () {
	    var Subcomponent = {
	        hidden: true,
	        view: function view(vnode) {
	            var this$1 = this;

	            return [
	                v('button', {
	                    onclick: function () {
	                        this$1.hidden = !this$1.hidden;
	                        v.update();
	                    }
	                }, this.hidden ? 'Unhide' : 'Hide'),
	                v('div', null, this.hidden ? 'Hidden' : 'Unhidden')
	            ];
	        }
	    };
	    return Subcomponent;
	};

	var Component = {
	    oninit: function oninit(vnode) {
	        Component.sub1 = SubcomponentFactory();
	        Component.sub2 = SubcomponentFactory();
	        Component.sub3 = SubcomponentFactory();
	    },
	    view: function view() {
	        return [
	            v(Component.sub1, { hidden: false }),
	            v(Component.sub2, { hidden: true }),
	            v(Component.sub3)
	        ];
	    }
	};

	var Pages = {
	    Main: Main,
	    Hello: Hello,
	    Counter: Counter,
	    Diff: Diff,
	    Lifecycle: Lifecycle,
	    Subcomponent: Component
	};

	// Create a router
	var router = v.Router();
	router
	    .use(function () { return console.log('ok'); })
	    .get('/', [
	        function () { return console.log('Init'); },
	        function () { return Pages.Hello; }
	    ])
	    .get('/hello', [
	        function () { return Pages.Hello.getServer(); },
	        function () { return Pages.Hello; }
	    ])
	    .get('/counter', function () { return Pages.Counter; })
	    .get('/diff', function () { return Pages.Diff; })
	    .get('/lifecycle', function () { return Pages.Lifecycle; })
	    .get('/subcomponent', function () { return Pages.Subcomponent; })
	    .get('/hello/:ok', function (params) {
	        return Pages.Hello;
	    })
	;

	// Assign routes to ValyrianJs
	v.routes('body', router);

	// if (v.isBrowser) {
	//     v.sw('./sw.js')
	//         .then(() => {
	//             console.log('SW registered');
	//         });
	// }

	// // Export what is needed for the backend
	var index = {Pages: Pages};

	return index;

})));
//# sourceMappingURL=index.min.js.map
