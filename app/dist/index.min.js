(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.App = factory());
}(this, (function () { 'use strict';

    var links = { 
        view: function view(){ 
            return [
                v("link", {"rel":"apple-touch-icon","sizes":"114x114","href":"/icons/apple-touch-icon-114x114.png"}),
                v("link", {"rel":"apple-touch-icon","sizes":"120x120","href":"/icons/apple-touch-icon-120x120.png"}),
                v("link", {"rel":"apple-touch-icon","sizes":"144x144","href":"/icons/apple-touch-icon-144x144.png"}),
                v("link", {"rel":"apple-touch-icon","sizes":"152x152","href":"/icons/apple-touch-icon-152x152.png"}),
                v("link", {"rel":"apple-touch-icon","sizes":"180x180","href":"/icons/apple-touch-icon-180x180.png"}),
                v("link", {"rel":"apple-touch-icon","sizes":"57x57","href":"/icons/apple-touch-icon-57x57.png"}),
                v("link", {"rel":"apple-touch-icon","sizes":"60x60","href":"/icons/apple-touch-icon-60x60.png"}),
                v("link", {"rel":"apple-touch-icon","sizes":"72x72","href":"/icons/apple-touch-icon-72x72.png"}),
                v("link", {"rel":"apple-touch-icon","sizes":"76x76","href":"/icons/apple-touch-icon-76x76.png"}),
                v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)","href":"/icons/apple-touch-startup-image-320x460.png"}),
                v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)","href":"/icons/apple-touch-startup-image-640x920.png"}),
                v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)","href":"/icons/apple-touch-startup-image-640x1096.png"}),
                v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)","href":"/icons/apple-touch-startup-image-750x1294.png"}),
                v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 414px) and (device-height: 736px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3)","href":"/icons/apple-touch-startup-image-1182x2208.png"}),
                v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 414px) and (device-height: 736px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3)","href":"/icons/apple-touch-startup-image-1242x2148.png"}),
                v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)","href":"/icons/apple-touch-startup-image-748x1024.png"}),
                v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)","href":"/icons/apple-touch-startup-image-1496x2048.png"}),
                v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)","href":"/icons/apple-touch-startup-image-768x1004.png"}),
                v("link", {"rel":"apple-touch-startup-image","media":"(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)","href":"/icons/apple-touch-startup-image-1536x2008.png"}),
                v("link", {"rel":"icon","type":"image/png","sizes":"16x16","href":"/icons/favicon-16x16.png"}),
                v("link", {"rel":"icon","type":"image/png","sizes":"32x32","href":"/icons/favicon-32x32.png"}),
                v("link", {"rel":"manifest","href":"/icons/manifest.json"}),
                v("link", {"rel":"shortcut icon","href":"/icons/favicon.ico"}),
                v("meta", {"name":"apple-mobile-web-app-capable","content":"yes"}),
                v("meta", {"name":"apple-mobile-web-app-status-bar-style","content":"black-translucent"}),
                v("meta", {"name":"apple-mobile-web-app-title","content":"Valyrian.js"}),
                v("meta", {"name":"application-name","content":"Valyrian.js"}),
                v("meta", {"name":"mobile-web-app-capable","content":"yes"}),
                v("meta", {"name":"msapplication-TileColor","content":"#fff"}),
                v("meta", {"name":"msapplication-TileImage","content":"/icons/mstile-144x144.png"}),
                v("meta", {"name":"msapplication-config","content":"/icons/browserconfig.xml"}),
                v("meta", {"name":"theme-color","content":"#fff"})
            ];
        }
    };

    var version = "1.4.2";

    var Main = {
        title: 'Valyrian.js',
        version: version,
        view: function view() {
            return v('html[lang=en]', [
                v('head', [
                    v('title', Main.title),
                    v('style', v.inline.uncss()),
                    v(links),
                    v('script', {src: '/index.min.js'})
                ]),
                v('body', [
                    Main.attributes.children ])
            ]);
        }
    };

    var Hello = {
        data: {
            hello: '',
            name: ''
        },
        oninit: function oninit() {
            return Hello.getServer();
        },
        getServer: function () {
            return v.request.get('/api/hola').then(function (data) {
                Hello.data = data;
            });
        },
        view: function view() {
            return v('div#mundo.hola', ((Hello.data.hello) + " " + (Hello.data.name)));
        }
    };

    var Counter = {
        count: 0,
        down: function (value) {
            Counter.count -= value;
        },
        up: function (value) {
            Counter.count += value;
        },
        view: function () {
            return v("div", [
                v("h1", Counter.count),
                v("button", { onclick: function () { return Counter.down(1); } }, "-"),
                v("button", { onclick: function () { return Counter.up(1); } }, "+"),
                v("button", { onclick: function () { return v.routes.go('/hello'); } }, "Go to hello"),
                v([
                    Counter.count === 2 ? v(2) : '',
                    v('br'),
                    v('', 'boolean true'),
                    v(true),
                    v('br'),
                    v('', 'boolean false'),
                    v(false),
                    v('br'),
                    v('', 'empty object'),
                    v({}, {}),
                    v('br'),
                    v('', 'null'),
                    v(null),
                    v('br'),
                    v('', 'undefined'),
                    v(undefined),
                    v('br'),
                    v('ul', (function () {
                        var elem = [];
                        if (Counter.count >= 0) {
                            for (var l = Counter.count; l--;) {
                                elem.push(v('li', l));
                            }
                        }

                        return elem;
                    }())),
                    v('img.div[src=http://placeimg.com/640/480/any]#ok')
                ])
            ]);
        }
    };

    var Diff = {
        s: 1,
        up: function () { return Diff.s += 1; },
        down: function () { return Diff.s -= 1; },
        view: function view() {
            return v('div', [
                Diff.s > 0 ? v('h1', Diff.s) : v('small', ''),
                v('button', { onclick: Diff.up }, '+'),
                v('button', { onclick: Diff.down }, '-')
            ]);
        }
    };

    var Lifecycle = {
        s: 1,
        up: function () {
            Lifecycle.s += 1;
            console.log(Lifecycle.s);
        },
        down: function () { return Lifecycle.s += -1; },
        oninit: function oninit(vnode) { // Before dom element is created
            console.log('component oninit', vnode);
        },
        oncreate: function oncreate(vnode) { // After dom element is created and attached to the document
            console.log('component oncreate', vnode);
        },
        onupdate: function onupdate(vnode) { // after dom element is updated
            console.log('component onupdate', vnode);
        },
        onbeforeremove: function onbeforeremove(vnode) { // before dom element is detached from the document
            console.log('component onbeforeremove', vnode);
        },
        onremove: function onremove(vnode) { // after dom element is removed
            console.log('component onremove', vnode);
        },
        view: function view() {
            return v('div', [
                Lifecycle.s > 0 ? v('h1', {
                    oninit: function oninit(vnode) { // Before dom element is created
                        console.log('oninit', vnode);
                    },
                    oncreate: function oncreate(vnode) { // After dom element is created and attached to the document
                        console.log('oncreate', vnode);
                    },
                    onupdate: function onupdate(vnode) { // after dom element is updated
                        console.log('onupdate', vnode);
                    },
                    onbeforeremove: function onbeforeremove(vnode) { // before dom element is detached from the document
                        console.log('onbeforeremove', vnode);
                    },
                    onremove: function onremove(vnode) { // after dom element is removed
                        console.log('onremove', vnode);
                    }
                }, Lifecycle.s) : v('small', ''),
                v('button', {onclick: Lifecycle.up}, '+'),
                v('button', {onclick: Lifecycle.down}, '-'),
                v('ul', (function () {
                    var elem = [];
                    if (Lifecycle.s >= 0) {
                        for (var l = Lifecycle.s; l--;) {
                            if (l !== 4) {
                                elem.push(v('li', {
                                    onbeforeremove: function onbeforeremove(vnode) {
                                        console.log('onbeforeremovelistart');
                                        var p = new Promise(function (resolve) {
                                            setTimeout(function () {
                                                console.log('onbeforeremoveliend');
                                                resolve();
                                            }, 2000);
                                        });
                                        return p;
                                    }
                                }, v('span', {
                                    onbeforeremove: function onbeforeremove(vnode) {
                                        console.log('onbeforeremovespanstart');
                                        var p = new Promise(function (resolve) {
                                            setTimeout(function () {
                                                console.log('onbeforeremovespanend');
                                                resolve();
                                            }, 1000);
                                        });
                                        return p;
                                    },
                                    onremove: function onremove(vnode) {
                                        console.log('onspanremove', vnode);
                                    }
                                }, l)));
                            }
                        }
                    }

                    return elem;
                }()))
            ]);
        }
    };

    var SubcomponentFactory = function () {
        var Subcomponent = {
            hidden: true,
            view: function view(vnode) {
                var this$1 = this;

                return [
                    v('button', {
                        onclick: function () {
                            this$1.hidden = !this$1.hidden;
                            v.update();
                        }
                    }, this.hidden ? 'Unhide' : 'Hide'),
                    v('div', this.hidden ? 'Hidden' : 'Unhidden')
                ];
            }
        };
        return Subcomponent;
    };

    var Component = {
        oninit: function oninit(vnode) {
            Component.sub1 = SubcomponentFactory();
            Component.sub2 = SubcomponentFactory();
            Component.sub3 = SubcomponentFactory();
        },
        view: function view() {
            return [
                v(Component.sub1, { hidden: false }),
                v(Component.sub2, { hidden: true }),
                v(Component.sub3)
            ];
        }
    };

    var Page = {
        view: function view() {
            return [
                v('div'),
                v('div#hola'),
                v('div#hola-mundo'),
                v('div#hola_mundo'),
                v('div.hola'),
                v('div.hola-mundo'),
                v('div.hola_mundo'),
                v('div[hola]'),
                v('div[hola=mundo]'),
                v('div[hola-mundo]'),
                v('div[hola_mundo]'),
                v('div[hola="mundo"]'),
                v('#hola'),
                v('#hola-mundo'),
                v('#hola_mundo'),
                v('.hola'),
                v('.hola-mundo'),
                v('.hola_mundo'),
                v('[hola]'),
                v('[hola=mundo]'),
                v('[hola-mundo]'),
                v('[hola_mundo]'),
                v('[hola="mundo"]'),
                v('div#hola-mundo.hola-mundo.mundo[hola="mundo"][hola-mundo=ok]'),
                v('div', v.trust('<h1 id="hola">Hola mundo</h1>'))
            ];
        }
    };

    var Pages = {
        Main: Main,
        Hello: Hello,
        Counter: Counter,
        Diff: Diff,
        Lifecycle: Lifecycle,
        Subcomponent: Component,
        Hyperscript: Page
    };

    // Create a router
    var router = v.router();
    router
        .use(function () { return console.log('ok'); })
        .get('/', [
            function () { return console.log('Init'); },
            function () { return Pages.Hello; }
        ])
        .get('/hello', [
            function () { return Pages.Hello.getServer(); },
            function () { return Pages.Hello; }
        ])
        .get('/counter', function () { return Pages.Counter; })
        .get('/diff', function () { return Pages.Diff; })
        .get('/lifecycle', function () { return Pages.Lifecycle; })
        .get('/subcomponent', function () { return Pages.Subcomponent; })
        .get('/hello/:ok', function (params) {
            return Pages.Hello;
        })
        .get('/hyperscript', function () { return Pages.Hyperscript; })
    ;

    // Assign routes to ValyrianJs
    v.routes('body', router);

    if (v.isBrowser) {
        v.sw('./sw.js')
            .then(function () {
                console.log('SW registered');
            });
    }

    // Export what is needed for the backend
    var index = {Pages: Pages};

    return index;

})));
//# sourceMappingURL=index.min.js.map
